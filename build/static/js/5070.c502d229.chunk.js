"use strict";(self.webpackChunknipa_panel_new=self.webpackChunknipa_panel_new||[]).push([[5070],{6041:(e,t,s)=>{s.d(t,{J3:()=>n,WG:()=>i,hR:()=>o});const l=s(8852).A.actions,o=e=>async(t,s)=>{t(l.setApiLoading(e))},n=e=>async(t,s)=>{t(l.setCollapseMenu(e))},i=e=>async(t,s)=>{t(l.setOpenMenu(e))}},7311:(e,t,s)=>{s.d(t,{G:()=>n,j:()=>o});var l=s(9456);const o=()=>(0,l.wA)(),n=l.d4},7099:(e,t,s)=>{s.d(t,{DD:()=>u,JK:()=>n,Jm:()=>c,Nb:()=>i,Tu:()=>d,cz:()=>a,vc:()=>r,x7:()=>p});var l=s(8875);const o=s(8870).A.actions,n=()=>async(e,t)=>{const s=await l.A.productsList();e(o.productsList(s))},i=e=>async(t,s)=>{const n=await l.A.productStepsList(e);t(o.productStepsList(n))},a=e=>async(t,s)=>{if(0===e)return t(o.productStepInfo(null));const n=await l.A.productStepInfo(e);t(o.productStepInfo(n))},d=e=>async(t,s)=>{const n=await l.A.saveProduct(e);t(o.saveProduct(n))},r=(e,t)=>async(s,i)=>{const a=await l.A.updateProduct(e,t);s(o.updateProduct(a)),s(n())},c=e=>async(t,s)=>{t(o.setSaveSuccess(e))},u=e=>async(t,s)=>{const n=await l.A.deleteProduct(e);t(o.deleteProduct(n))},p=e=>async(t,s)=>{t(o.setDeleteSuccess(e))}},8875:(e,t,s)=>{s.d(t,{A:()=>o});var l=s(670);const o={productsList:async function(){var e;let t=await(null===(e=(0,l.A)())||void 0===e?void 0:e.get("/products"));return null===t||void 0===t?void 0:t.data},saveProduct:async function(e){var t,s;let o=await(null===(t=(0,l.A)())||void 0===t?void 0:t.post("/products",{name:e.name,code:e.code,custom:e.custom,price:e.price,count_type:e.count_type,status:e.status,description:e.description,images:null===(s=e.images)||void 0===s?void 0:s.map((e=>e.hashCode))}));return null===o||void 0===o?void 0:o.data},deleteProduct:async function(e){var t;let s=await(null===(t=(0,l.A)())||void 0===t?void 0:t.delete("/products/".concat(e)));return null===s||void 0===s?void 0:s.data},productStepsList:async function(e){var t;let s=await(null===(t=(0,l.A)())||void 0===t?void 0:t.get("/product/".concat(e,"/steps")));return null===s||void 0===s?void 0:s.data},productStepInfo:async function(e){var t;let s=await(null===(t=(0,l.A)())||void 0===t?void 0:t.get("/productSteps/".concat(e)));return null===s||void 0===s?void 0:s.data},setProductStepRoles:async function(e,t){var s;let o=await(null===(s=(0,l.A)())||void 0===s?void 0:s.post("/product/steps/".concat(e,"/setRoles"),{roles:t.join(",")}));return null===o||void 0===o?void 0:o.data},addProductConditions:async function(e){var t;let s=await(null===(t=(0,l.A)())||void 0===t?void 0:t.post("/product/steps/conditions",{step_id:e.stepId,field_id:e.fieldId,option_id:e.optionId,next_step_id:e.nextStepId}));return null===s||void 0===s?void 0:s.data},getProduct:async function(e){var t;let s=await(null===(t=(0,l.A)())||void 0===t?void 0:t.get("/products/".concat(e)));return null===s||void 0===s?void 0:s.data},updateProduct:async function(e,t){var s,o;let n=await(null===(s=(0,l.A)())||void 0===s?void 0:s.put("/products/".concat(e),{name:t.name,code:t.code,custom:t.custom,count_type:t.count_type,price:t.price,status:t.status,description:t.description,images:null===(o=t.images)||void 0===o?void 0:o.map((e=>e.hashCode))}));return null===n||void 0===n?void 0:n.data}}},7417:(e,t,s)=>{s.d(t,{gJ:()=>r,Up:()=>d,ug:()=>c,ri:()=>u,PT:()=>a,ex:()=>i});var l=s(670);const o={sendOtp:async function(e){var t;let s=await(null===(t=(0,l.A)())||void 0===t?void 0:t.post("/sendOtp",{mobile:e.mobile}));return null===s||void 0===s?void 0:s.data},confirmOtp:async function(e){var t;console.log("cscscsc",e);let s=await(null===(t=(0,l.A)())||void 0===t?void 0:t.post("/confirmOtp",{mobile:e.mobile,otp:e.otp}));return null===s||void 0===s?void 0:s.data},getRolesList:async function(){var e;let t=await(null===(e=(0,l.A)())||void 0===e?void 0:e.get("/roles"));return null===t||void 0===t?void 0:t.data},getUserInfo:async function(){var e;let t=await(null===(e=(0,l.A)())||void 0===e?void 0:e.get("/profile"));return null===t||void 0===t?void 0:t.data},getCustomersList:async function(){var e;let t=await(null===(e=(0,l.A)())||void 0===e?void 0:e.get("/customers"));return null===t||void 0===t?void 0:t.data}};const n=s(5730).A.actions,i=e=>async(t,s)=>{t(n.setUserMobile(e))},a=e=>async(t,s)=>{t(n.setUserLogin(e))},d=()=>async(e,t)=>{const s=await o.getRolesList();console.log(s),e(n.getRolesList(s))},r=()=>async(e,t)=>{const s=await o.getCustomersList();e(n.getCustomersList(s.customers))},c=()=>async(e,t)=>{const s=await o.getUserInfo();console.log(s),e(n.getUserInfo(s))},u=()=>async(e,t)=>{e(n.logout())}},670:(e,t,s)=>{s.d(t,{A:()=>a});var l=s(7154),o=s(6041),n=s(6254),i=s(5424);const a=()=>{const e=l.A.create({baseURL:"https://apidemo.nipaco.ir/api/v1",headers:localStorage.getItem("nipa_token")?{"Content-Type":"application/json",Accept:"application/json",language:localStorage.getItem("nipa-lang")||"fa",authorization:"Bearer "+localStorage.getItem("nipa_token")}:{"Content-Type":"application/json",Accept:"application/json"}});return e.interceptors.request.use((function(e){return n.A.dispatch((0,o.hR)(!0)),e}),(function(e){return n.A.dispatch((0,o.hR)(!1)),Promise.reject(e)})),e.interceptors.response.use((function(e){return n.A.dispatch((0,o.hR)(!1)),e}),(function(e){if(e.response.status,403==e.response.status&&(document.location.href="/errors/403"),e.response.data.errors){Object.keys(e.response.data.errors).map((t=>e.response.data.errors[t])).forEach((e=>{i.A.error(e)}))}else console.log("err",e.response),i.A.error(e.response.data.message||e.response.data.msg||e.response.data.error);return n.A.dispatch((0,o.hR)(!1)),Promise.reject(e)})),e}},672:(e,t,s)=>{s.d(t,{A:()=>i});var l=s(7914),o=s(5043),n=s(579);const i=e=>{let{children:t,title:s}=e;const[i,a]=(0,o.useState)(!1);return(0,n.jsxs)("div",{className:"mb-[20px]",children:[(0,n.jsxs)("div",{onClick:()=>{a(!i)},className:"border border-text-300 w-full h-[72px] bg-white flex items-center justify-between px-[16px] rounded-[5px]",children:[(0,n.jsx)("p",{className:"text-primary-dark text-[16px] font-bold cursor-pointer",children:s}),(0,n.jsx)("div",{className:"w-[28px] h-[28px] bg-text-300 flex items-center justify-center rounded-[8px] cursor-pointer hover:bg-text-400 transition-all",children:(0,n.jsx)(l.A,{className:"w-[18px] h-[18px] transition-all ".concat(i?"rotate-0":"rotate-180")})})]}),(0,n.jsx)("div",{className:"overflow-hidden ".concat(i?"h-auto opacity-100":"h-0 opacity-0"," w-full transition-all mt-[20px] flex flex-col justify-start items-start"),children:(0,n.jsx)("div",{className:"border border-text-300 bg-white rounded-[5px] w-full h-full",children:t})})]})}},3232:(e,t,s)=>{s.d(t,{A:()=>n});var l=s(7281),o=s(579);const n=e=>{let{title:t,actions:s,handleBack:n}=e;return(0,o.jsxs)("div",{className:"print:hidden w-full flex items-center justify-between mb-[20px]",children:[(0,o.jsxs)("div",{className:"flex items-center",children:[n?(0,o.jsx)("div",{className:"cursor-pointer",onClick:n,children:(0,o.jsx)(l.A,{className:"mx-[12px] text-gray-500 ltr:rotate-180"})}):(0,o.jsx)("span",{className:"inline-block w-[14px] h-[14px] rounded-[2px] bg-secondary-main me-3"}),(0,o.jsx)("p",{className:"text-gray-500 font-black",children:t})]}),(0,o.jsx)("div",{className:"flex",children:s})]})}},7578:(e,t,s)=>{s.d(t,{A:()=>i});var l=s(1637),o=(s(5043),s(5475)),n=s(579);const i=e=>{let{type:t,simple:s,bordered:i,href:a,text:d,onClick:r,icon:c,after:u,sm:p,xs:x,gray:v,disabled:m,loading:h,className:f}=e;const g="w-full ".concat(f," ").concat(x?"h-[36px]":p?"h-[38px]":"h-12"," rounded-[8px] flex items-center justify-center bg-primary-main text-white ").concat(i?"border border-primary-main bg-transparent !text-primary-main":"","\n   ").concat(s?"border-none bg-transparent !text-primary-main":"","\n   ").concat(v?"border-none !bg-text-200 !text-text-500":"","\n    ").concat(m?"opacity-90 cursor-not-allowed pointer-events-none":"","\n  "),j=()=>c?(0,n.jsx)("div",{className:"inline-block me-1",children:c}):(0,n.jsx)(n.Fragment,{});return(0,n.jsxs)(n.Fragment,{children:[a&&(0,n.jsxs)(o.N_,{to:a,className:g,children:[!u&&j(),h?(0,n.jsx)(l.A,{className:"!text-white !w-[20px] !h-[20px]"}):d,u&&j()]}),t&&(0,n.jsxs)("button",{className:g,type:t,children:[!u&&j(),h?(0,n.jsx)(l.A,{className:"!text-white !w-[20px] !h-[20px]"}):d,u&&j()]}),r&&(0,n.jsxs)("button",{className:g,onClick:r,children:[!u&&j(),h?(0,n.jsx)(l.A,{className:"!text-white !w-[20px] !h-[20px]"}):d,u&&j()]})]})}},2087:(e,t,s)=>{s.d(t,{A:()=>i});var l=s(5043),o=s(8305),n=s(579);const i=e=>{var t,s,i;let{name:a,label:d,formik:r,type:c,placeholder:u,maskChar:p,className:x,mask:v,inputActions:m,options:h,disabled:f,readonly:g,lgText:j}=e;const[b,y]=(0,l.useState)(null);return(0,n.jsxs)("div",{className:"flex flex-col w-full items-start justify-start ".concat(x),children:[(0,n.jsxs)("div",{className:"".concat(j?"text-md":"text-xs"," mb-2 flex justify-between w-full"),children:[(0,n.jsx)("label",{className:"font-normal",htmlFor:a,children:d}),null===m||void 0===m?void 0:m()]}),(0,n.jsx)(o.Ay,{isDisabled:f,defaultValue:r.values?r.values[a]:b,onChange:e=>{y(e),console.log("nice car",e),r.handleChange({target:{name:a,value:e.value,type:e.type}})},value:r.values?null===h||void 0===h?void 0:h.find((e=>e.value===r.values[a])):b,placeholder:u,options:h,className:"w-full h-12 !outline-none",isSearchable:!1,menuIsOpen:!g&&void 0,classNames:{control:e=>"h-12 !rounded-[6px] !outline-none !shadow-none ".concat(e.isFocused?"!border-primary-main":"border-text-300"),placeholder:e=>"rtl:text-right ltr:text-left ".concat(j?"text-md":"text-xs"),singleValue:e=>"rtl:text-right ltr:text-left ".concat(j?"text-md":"text-xs"),input:e=>"rtl:text-right ltr:text-left ".concat(j?"text-md":"text-xs"),valueContainer:e=>"!outline-none",indicatorSeparator:e=>"!hidden",menu:e=>"!shadow-none border border-text-400 !rounded-[6px] py-[6px]",option:e=>"p-[6px] ".concat((e.isFocused,""))},styles:{option:(e,t)=>({"&>p":{cursor:"pointer",backgroundColor:t.isFocused||t.isSelected?"#eef3fa":"#fff",height:40,display:"flex",fontWeight:"normal",alignItems:"center",justifyContent:"flex-start",padding:"10px",borderRadius:"4px",color:"#1f1f1f"}})}}),(null===(t=r.errors)||void 0===t?void 0:t[a])&&(null===(s=r.touched)||void 0===s?void 0:s[a])&&(0,n.jsx)("p",{className:"text-error-primary text-[10px] mt-1",children:null===(i=r.errors)||void 0===i?void 0:i[a]})]})}},1968:(e,t,s)=>{s.d(t,{A:()=>r});var l=s(9218),o=s(5043),n=s(579);const i=e=>{let{children:t}=e;return(0,n.jsx)("div",{className:"h-[calc(100%-97px)] overflow-auto",children:t})},a=e=>{let{children:t}=e;return(0,n.jsx)("div",{children:t})},d=e=>{let{open:t,handleClose:s,children:d,headerIcon:r,headerText:c=""}=e;const[u,p]=(0,o.useState)(Math.floor(1e3*Math.random()));return(0,n.jsx)("div",{id:"dialog".concat(u),onClick:e=>{e.target.id==="dialog"+u&&(null===s||void 0===s||s())},className:"w-full h-full fixed bg-black-60 rtl:left-0 ltr:right-0 top-0 transition-all ".concat(t?"opacity-1 z-[999] delay-200":"pointer-events-none opacity-0 z-0 delay-300"),children:(0,n.jsxs)("div",{className:"h-full w-[60%] min-w-[900px] bg-white transition-all\t".concat(t?"translate-x-0 delay-300":"ltr:-translate-x-[100%] rtl:translate-x-[100%] delay-200"),children:[c&&(0,n.jsxs)("div",{className:"flex w-full px-8 py-6 items-center justify-between border-b border-text-300",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("div",{className:"me-3 w-9 h-9 rounded-[12px] bg-primary-main flex items-center justify-center text-white",children:r}),(0,n.jsx)("p",{className:"text-[20px] leading-[20px] font-bold",children:c})]}),(0,n.jsx)("div",{className:"w-9 h-9",children:(0,n.jsx)("button",{onClick:s,className:"w-9 h-9",children:(0,n.jsx)(l.A,{className:"w-9 h-9"})})})]}),(0,n.jsx)("div",{className:"flex justify-between w-full flex-col h-[calc(100%-85px)]",children:o.Children.map(d,(e=>e.type===i?(0,n.jsx)(i,{children:e.props.children}):e.type===a?(0,n.jsx)(a,{children:e.props.children}):void 0))})]})})};d.Content=i,d.Footer=a;const r=d},7652:(e,t,s)=>{s.d(t,{A:()=>i});var l=s(8786),o=s(4117),n=s(579);const i=e=>{let{columns:t,data:s}=e;const{i18n:i}=(0,o.Bd)();return(0,n.jsx)(l.Ay,{direction:"ltr"===i.dir()?l.OP.LTR:l.OP.RTL,columns:t,data:s,className:"customTable",conditionalRowStyles:[{when:e=>"footer"===e.id,style:{backgroundColor:"rgba(247, 247, 247, 1)",borderTop:"2px solid #EDEDED","&:hover":{cursor:"pointer"}}}]})}},5070:(e,t,s)=>{s.r(t),s.d(t,{default:()=>S});var l=s(7652),o=s(7311),n=s(7099),i=s(672),a=s(3232),d=s(5043),r=s(4117),c=s(3216),u=s(7578),p=s(7417),x=s(6421),v=s(9600),m=s(1968),h=s(3516),f=s(2087),g=s(5424),j=s(8875),b=s(8870),y=s(579);const w=e=>{let{open:t,handleClose:s,step:l,roles:n}=e;const i={selectedRoles:(null===l||void 0===l?void 0:l.roles)||[]},{t:a}=(0,r.Bd)(),c=(0,o.G)((e=>e.products.productSteps)),p=(0,o.j)(),w=(0,h.Wx)({initialValues:i,onSubmit:async e=>{if(0==e.selectedRoles.length)g.A.error(a("selectAtLeastOneRole"));else{if(null===l||void 0===l||!l.id)return g.A.error(a("errorSaveProductStepRoles"));if(await j.A.setProductStepRoles(null===l||void 0===l?void 0:l.id,e.selectedRoles.map((e=>e.id)))){if(c){let t=[...c],s=null===t||void 0===t?void 0:t.findIndex((e=>e.id==(null===l||void 0===l?void 0:l.id)));s>-1&&(t[s]={...t[s],roles:e.selectedRoles},p(b.A.actions.productStepsList([...t])),g.A.success(a("successSaveProductStepRoles")))}}else g.A.error(a("errorSaveProductStepRoles"));null===s||void 0===s||s()}}});(0,d.useEffect)((()=>{l&&w.setFieldValue("selectedRoles",(null===l||void 0===l?void 0:l.roles)||[])}),[l]);const A=()=>{null===s||void 0===s||s()};return(0,y.jsxs)(m.A,{headerText:a("addPermission")+" "+((null===l||void 0===l?void 0:l.step_name)||""),headerIcon:(0,y.jsx)(x.A,{}),open:t,handleClose:A,children:[(0,y.jsx)(m.A.Content,{children:(0,y.jsxs)("div",{className:"p-7",children:[(0,y.jsx)("p",{className:"w-full text-start text-[16px] font-bold",children:"\u0646\u0642\u0634 \u0647\u0627\u06cc \u0627\u0646\u062a\u062e\u0627\u0628 \u0634\u062f\u0647 \u0632\u06cc\u0631 \u062f\u0633\u062a\u0631\u0633\u06cc \u0628\u0647 \u0627\u06cc\u0646 \u0641\u0631\u0645 \u0631\u0627 \u062e\u0648\u0627\u0647\u0646\u062f \u062f\u0627\u0634\u062a:"}),(0,y.jsx)("form",{onSubmit:w.handleSubmit,className:"w-full",children:(0,y.jsxs)("div",{className:"mt-7 w-full grid grid-cols-1 gap-x-5 gap-y-7",children:[(0,y.jsx)(f.A,{className:"group ".concat("mb-[15px]"),name:"selectedRoles",label:a("systemRoles"),options:n.map((e=>({label:(0,y.jsx)("p",{children:e.name}),value:e.id}))),placeholder:a("select"),formik:{handleChange:e=>{let t=[...w.values.selectedRoles];const s=n.find((t=>t.id==e.target.value)),l=t.findIndex((e=>e.id==(null===s||void 0===s?void 0:s.id)));l>-1&&t.splice(l,1),s&&t.push(s),w.setFieldValue("selectedRoles",[...t])},values:{selectedRoles:null}}}),w.values.selectedRoles.length>0&&(0,y.jsx)("div",{className:"flex items-center justify-start w-full mb-[30px]",children:w.values.selectedRoles.map(((e,t)=>(0,y.jsxs)("div",{className:"w-[97px] h-[48px] rounded-[24px] border border-text-400 flex items-center justify-between pe-2 ps-4 me-2",children:[(0,y.jsx)("p",{className:"text-[14px]",children:e.name}),(0,y.jsx)("div",{onClick:()=>(e=>{let t=[...w.values.selectedRoles];const s=t.findIndex((t=>t.id==e.id));s>-1&&(t.splice(s,1),w.setFieldValue("selectedRoles",[...t]))})(e),className:"cursor-pointer",children:(0,y.jsx)(v.A,{className:"w-[20px] h-[20px]"})})]},t)))})]})})]})}),(0,y.jsx)(m.A.Footer,{children:(0,y.jsxs)("div",{className:"mt-20 px-7 flex justify-between items-center py-[25px] border border-text-300",children:[(0,y.jsx)("div",{className:"w-[126px]",children:(0,y.jsx)(u.A,{text:"\u0627\u0646\u0635\u0631\u0627\u0641",onClick:A,gray:!0})}),(0,y.jsx)("div",{className:"w-[182px]",children:(0,y.jsx)(u.A,{text:a("saveSetting"),onClick:()=>{w.submitForm()}})})]})})]})},A=e=>{var t;let{open:s,handleClose:l,step:n,otherSteps:i}=e;const{t:a}=(0,r.Bd)(),c=((0,o.G)((e=>e.products.productSteps)),(0,o.j)(),null===n||void 0===n?void 0:n.forms[0].optionalFields),[p,h]=(0,d.useState)(),[b,w]=(0,d.useState)([]),[A,N]=(0,d.useState)();(0,d.useEffect)((()=>{if(n){var e,t,s,l,o,i,a,d;h({name:"condField",value:(null===(e=n.conditions)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.form_field_id.toString())||"0",options:null===(s=c.find((e=>{var t,s;return e.id.toString()==(null===(t=n.conditions)||void 0===t||null===(s=t[0])||void 0===s?void 0:s.form_field_id.toString())})))||void 0===s?void 0:s.options}),N({label:(null===(l=n.conditions)||void 0===l||null===(o=l[0])||void 0===o?void 0:o.next_product_step_id.toString())||"0",value:(null===(i=n.conditions)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.next_product_step_id.toString())||"0"});let r=[];null===(d=n.conditions)||void 0===d||d.map((e=>{var t;let s=null===(t=c.find((t=>t.id==e.form_field_id)))||void 0===t?void 0:t.options.find((t=>t.id===e.form_field_option_id||t.id===e.basic_data_item_id));s&&r.push(s)})),w([...r])}}),[n]);const S=()=>{null===l||void 0===l||l()};return(0,y.jsxs)(m.A,{headerText:a("addConditionFor")+" "+((null===n||void 0===n?void 0:n.step_name)||""),headerIcon:(0,y.jsx)(x.A,{}),open:s,handleClose:S,children:[(0,y.jsx)(m.A.Content,{children:(0,y.jsx)("div",{className:"p-7",children:(0,y.jsxs)("div",{className:"w-full flex flex-col items-start justify-start px-4",children:[(0,y.jsx)(f.A,{className:"group mb-[30px]",name:"condField",label:"\u0641\u06cc\u0644\u062f",options:c&&c.map((e=>({label:(0,y.jsx)("p",{children:e.label}),value:e.id.toString()}))),placeholder:"\u0627\u0646\u062a\u062e\u0627\u0628 \u06a9\u0646\u06cc\u062f",formik:{handleChange:e=>{let t=c.find((t=>t.id.toString()==e.target.value));h({...e.target,options:null===t||void 0===t?void 0:t.options}),w([])},values:{condField:null===p||void 0===p?void 0:p.value}}}),(0,y.jsx)(f.A,{className:"group ".concat(b.length>0?"mb-[15px]":"mb-[30px]"),name:"condFieldValue",label:"\u0628\u0631\u0627\u0628\u0631",options:p&&(null===p||void 0===p||null===(t=p.options)||void 0===t?void 0:t.map((e=>({label:(0,y.jsx)("p",{children:e.label||e.name}),value:e.id})))),placeholder:p?"\u0627\u0646\u062a\u062e\u0627\u0628 \u06a9\u0646\u06cc\u062f":"\u0627\u0628\u062a\u062f\u0627 \u0641\u06cc\u0644\u062f \u0631\u0627 \u0627\u0646\u062a\u062e\u0627\u0628 \u06a9\u0646\u06cc\u062f",formik:{handleChange:e=>{const t=null===p||void 0===p?void 0:p.options;b.findIndex((t=>t.id==e.target.value))>-1||w([...b,{...t.find((t=>t.id==e.target.value))}])},values:{condFieldValue:null}}}),b.length>0&&(0,y.jsx)("div",{className:"flex items-center justify-start w-full mb-[30px]",children:b.map(((e,t)=>(0,y.jsxs)("div",{className:"w-[97px] h-[48px] rounded-[24px] border border-text-400 flex items-center justify-between pe-2 ps-4 me-2",children:[(0,y.jsx)("p",{className:"text-[14px]",children:e.label||e.name}),(0,y.jsx)("div",{onClick:()=>(e=>{let t=[...b].findIndex((t=>t.option==e.option));if(t>-1){let e=b;e.splice(t,1),w([...e])}})(e),className:"cursor-pointer",children:(0,y.jsx)(v.A,{className:"w-[20px] h-[20px]"})})]},1e4*Math.random())))}),(0,y.jsx)(f.A,{className:"group mb-[30px]",name:"relationField",label:"\u0645\u0631\u062d\u0644\u0647 \u0628\u0639\u062f\u06cc \u0628\u0631\u0627\u0628\u0631",options:i&&i.map((e=>({label:(0,y.jsx)("p",{children:e.step_name}),value:e.id.toString()}))),placeholder:p?"\u0627\u0646\u062a\u062e\u0627\u0628 \u06a9\u0646\u06cc\u062f":"\u0627\u0628\u062a\u062f\u0627 \u0641\u06cc\u0644\u062f \u0631\u0627 \u0627\u0646\u062a\u062e\u0627\u0628 \u06a9\u0646\u06cc\u062f",formik:{handleChange:e=>{const t=i.find((t=>t.id.toString()==e.target.value));t&&N({label:t.step_name,value:t.id.toString()})},values:{relationField:null===A||void 0===A?void 0:A.value}}})]})})}),(0,y.jsx)(m.A.Footer,{children:(0,y.jsxs)("div",{className:"mt-20 px-7 flex justify-between items-center py-[25px] border border-text-300",children:[(0,y.jsx)("div",{className:"w-[126px]",children:(0,y.jsx)(u.A,{text:"\u0627\u0646\u0635\u0631\u0627\u0641",onClick:S,gray:!0})}),(0,y.jsx)("div",{className:"w-[182px]",children:(0,y.jsx)(u.A,{text:a("saveSetting"),onClick:()=>{j.A.addProductConditions({stepId:null===n||void 0===n?void 0:n.id,fieldId:null===p||void 0===p?void 0:p.value,optionId:b.map((e=>e.id)),nextStepId:null===A||void 0===A?void 0:A.value}),null===l||void 0===l||l(),g.A.success(a("successSaveProductStepconds"))}})})]})})]})};var N=s(8185);const S=()=>{const{t:e}=(0,r.Bd)(["common","validations"]),t=(0,o.G)((e=>e.products.productSteps)),s=(0,o.G)((e=>e.users.roles)),x=(0,c.Zp)();let{code:v}=(0,c.g)();const m=(0,o.j)(),[h,f]=(0,d.useState)(null),[j,b]=(0,d.useState)(null),S=[{name:e("order"),selector:(e,t)=>t+1,sortable:!1,class:"bg-primary-main",id:"okokokok"},{name:e("title"),selector:e=>e.step_name,sortable:!1},{name:e("manageForm"),center:!0,cell:t=>(0,y.jsx)("div",{className:" w-full px-2",children:(0,y.jsx)(u.A,{xs:!0,text:e("manageForm"),onClick:()=>_(t)})}),sortable:!1},{name:e("displayCondition"),center:!0,cell:t=>(0,y.jsx)("div",{className:"w-full px-2",children:(0,y.jsx)(u.A,{xs:!0,bordered:!0,text:e("manageCondition"),onClick:()=>R(t)})}),sortable:!1},{name:e("accessibilities"),center:!0,cell:t=>(0,y.jsx)("div",{className:"w-full px-2",children:(0,y.jsx)(u.A,{xs:!0,bordered:!0,text:e("manageAccessibilities"),onClick:()=>k(t)})}),sortable:!1},{name:e("exportAndPrint"),center:!0,cell:t=>(0,y.jsx)("div",{className:"w-full px-2",children:(0,y.jsx)(u.A,{xs:!0,bordered:!0,text:e("managePrint"),onClick:()=>C(t)})}),sortable:!1}],C=e=>{};(0,d.useEffect)((()=>{m((0,n.Nb)(v||"")),(null===s||void 0===s?void 0:s.length)<1&&m((0,p.Up)())}),[]);const _=e=>{console.log("row",e),x("/products/".concat(v,"/steps/").concat(e.id,"/form"))},k=e=>{f(e)},R=s=>{let l=!0,o=null===t||void 0===t?void 0:t.filter((e=>e.parent_id==s.parent_id));console.log("tmp",o),o.map((e=>{0==e.forms.length&&(l=!1)})),l?0==s.forms[0].optionalFields.length?g.A.error(e("stepHasNoOptionalFields")):b(s):g.A.error(e("stepHasNoForm"))};return(0,y.jsxs)("div",{className:"w-full h-full",children:[(0,y.jsx)(w,{roles:s,open:!!h,handleClose:()=>f(null),step:h}),(0,y.jsx)(A,{open:!!j,handleClose:()=>b(null),step:j,otherSteps:j&&(null===t||void 0===t?void 0:t.filter((e=>null!=e.parent_id&&e.id>(null===j||void 0===j?void 0:j.id))))}),(0,y.jsx)(a.A,{title:e("handleProductSteps")+" "+v,handleBack:()=>{x("/products")}}),(0,y.jsx)("div",{className:"w-full",children:t&&s?t.filter((e=>null==e.parent_id)).map(((e,s)=>(0,y.jsx)(i.A,{title:e.step_name,children:(0,y.jsx)(l.A,{columns:S,data:(null===t||void 0===t?void 0:t.filter((t=>t.parent_id==e.global_step_id)))||[]})},e.id))):(0,y.jsx)("div",{className:"grid grid-cols-1 gap-[40px]",children:Array.from(Array(3).keys()).map(((e,t)=>(0,y.jsx)(N.A,{variant:"rounded",width:"100%",height:72,animation:"wave"},t)))})})]})}}}]);
//# sourceMappingURL=5070.c502d229.chunk.js.map