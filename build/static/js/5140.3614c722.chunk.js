"use strict";(self.webpackChunknipa_panel_new=self.webpackChunknipa_panel_new||[]).push([[5140],{5443:function(e,n,t){t.d(n,{Mw:function(){return c},ct:function(){return s},yj:function(){return a}});var r=t(4165),o=t(5861),i=t(4999).Z.actions,s=function(e){return function(){var n=(0,o.Z)((0,r.Z)().mark((function n(t,o){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t(i.setApiLoading(e));case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},a=function(e){return function(){var n=(0,o.Z)((0,r.Z)().mark((function n(t,o){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t(i.setCollapseMenu(e));case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},c=function(e){return function(){var n=(0,o.Z)((0,r.Z)().mark((function n(t,o){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t(i.setOpenMenu(e));case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}},2737:function(e,n,t){t.d(n,{C:function(){return i},T:function(){return o}});var r=t(9434),o=function(){return(0,r.I0)()},i=r.v9},5138:function(e,n,t){t.d(n,{BU:function(){return a},Ir:function(){return f},ZU:function(){return c},bJ:function(){return u},gg:function(){return l},l$:function(){return v},nM:function(){return d},zm:function(){return p}});var r=t(4165),o=t(5861),i=t(685),s=t(5359).Z.actions,a=function(){return function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n,t){var o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.productsList();case 2:o=e.sent,n(s.productsList(o));case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},c=function(e){return function(){var n=(0,o.Z)((0,r.Z)().mark((function n(t,o){var a;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.Z.productStepsList(e);case 2:a=n.sent,t(s.productStepsList(a));case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},u=function(e){return function(){var n=(0,o.Z)((0,r.Z)().mark((function n(t,o){var a;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(0!==e){n.next=2;break}return n.abrupt("return",t(s.productStepInfo(null)));case 2:return n.next=4,i.Z.productStepInfo(e);case 4:a=n.sent,t(s.productStepInfo(a));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},l=function(e){return function(){var n=(0,o.Z)((0,r.Z)().mark((function n(t,o){var a;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.Z.saveProduct(e);case 2:a=n.sent,t(s.saveProduct(a));case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},d=function(e,n){return function(){var t=(0,o.Z)((0,r.Z)().mark((function t(o,c){var u;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.Z.updateProduct(e,n);case 2:u=t.sent,o(s.updateProduct(u)),o(a());case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},p=function(e){return function(){var n=(0,o.Z)((0,r.Z)().mark((function n(t,o){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t(s.setSaveSuccess(e));case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},f=function(e){return function(){var n=(0,o.Z)((0,r.Z)().mark((function n(t,o){var a;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.Z.deleteProduct(e);case 2:a=n.sent,t(s.deleteProduct(a));case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},v=function(e){return function(){var n=(0,o.Z)((0,r.Z)().mark((function n(t,o){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t(s.setDeleteSuccess(e));case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}},685:function(e,n,t){var r=t(4165),o=t(5861),i=t(516);function s(){return(s=(0,o.Z)((0,r.Z)().mark((function e(){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=(0,i.Z)())||void 0===n?void 0:n.get("/products");case 2:return t=e.sent,e.abrupt("return",null===t||void 0===t?void 0:t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function a(){return(a=(0,o.Z)((0,r.Z)().mark((function e(n){var t,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=(0,i.Z)())||void 0===t?void 0:t.get("/product/".concat(n,"/steps"));case 2:return o=e.sent,e.abrupt("return",null===o||void 0===o?void 0:o.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(){return(c=(0,o.Z)((0,r.Z)().mark((function e(n){var t,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=(0,i.Z)())||void 0===t?void 0:t.get("/productSteps/".concat(n));case 2:return o=e.sent,e.abrupt("return",null===o||void 0===o?void 0:o.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=(0,o.Z)((0,r.Z)().mark((function e(n,t){var o,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(o=(0,i.Z)())||void 0===o?void 0:o.post("/product/steps/".concat(n,"/setRoles"),{roles:t.join(",")});case 2:return s=e.sent,e.abrupt("return",null===s||void 0===s?void 0:s.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=(0,o.Z)((0,r.Z)().mark((function e(n){var t,o,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=(0,i.Z)())||void 0===t?void 0:t.post("/products",{name:n.name,code:n.code,custom:n.custom,price:n.price,count_type:n.count_type,status:n.status,description:n.description,images:null===(o=n.images)||void 0===o?void 0:o.map((function(e){return e.hashCode}))});case 2:return s=e.sent,e.abrupt("return",null===s||void 0===s?void 0:s.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return(d=(0,o.Z)((0,r.Z)().mark((function e(n,t){var o,s,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(o=(0,i.Z)())||void 0===o?void 0:o.put("/products/".concat(n),{name:t.name,code:t.code,custom:t.custom,count_type:t.count_type,price:t.price,status:t.status,description:t.description,images:null===(s=t.images)||void 0===s?void 0:s.map((function(e){return e.hashCode}))});case 2:return a=e.sent,e.abrupt("return",null===a||void 0===a?void 0:a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=(0,o.Z)((0,r.Z)().mark((function e(n){var t,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=(0,i.Z)())||void 0===t?void 0:t.delete("/products/".concat(n));case 2:return o=e.sent,e.abrupt("return",null===o||void 0===o?void 0:o.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return(f=(0,o.Z)((0,r.Z)().mark((function e(n){var t,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=(0,i.Z)())||void 0===t?void 0:t.get("/products/".concat(n));case 2:return o=e.sent,e.abrupt("return",null===o||void 0===o?void 0:o.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=(0,o.Z)((0,r.Z)().mark((function e(n){var t,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=(0,i.Z)())||void 0===t?void 0:t.post("/product/steps/conditions",{step_id:n.stepId,field_id:n.fieldId,option_id:n.optionId,next_step_id:n.nextStepId});case 2:return o=e.sent,e.abrupt("return",null===o||void 0===o?void 0:o.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n.Z={productsList:function(){return s.apply(this,arguments)},saveProduct:function(e){return l.apply(this,arguments)},deleteProduct:function(e){return p.apply(this,arguments)},productStepsList:function(e){return a.apply(this,arguments)},productStepInfo:function(e){return c.apply(this,arguments)},setProductStepRoles:function(e,n){return u.apply(this,arguments)},addProductConditions:function(e){return v.apply(this,arguments)},getProduct:function(e){return f.apply(this,arguments)},updateProduct:function(e,n){return d.apply(this,arguments)}}},7490:function(e,n,t){t.d(n,{KR:function(){return m},Sd:function(){return x},bG:function(){return h},kS:function(){return Z},fY:function(){return v},cp:function(){return f}});var r=t(4165),o=t(5861),i=t(516);function s(){return(s=(0,o.Z)((0,r.Z)().mark((function e(n){var t,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=(0,i.Z)())||void 0===t?void 0:t.post("/sendOtp",{mobile:n.mobile});case 2:return o=e.sent,e.abrupt("return",null===o||void 0===o?void 0:o.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function a(){return(a=(0,o.Z)((0,r.Z)().mark((function e(n){var t,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("cscscsc",n),e.next=3,null===(t=(0,i.Z)())||void 0===t?void 0:t.post("/confirmOtp",{mobile:n.mobile,otp:n.otp});case 3:return o=e.sent,e.abrupt("return",null===o||void 0===o?void 0:o.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(){return(c=(0,o.Z)((0,r.Z)().mark((function e(){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=(0,i.Z)())||void 0===n?void 0:n.get("/roles");case 2:return t=e.sent,e.abrupt("return",null===t||void 0===t?void 0:t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=(0,o.Z)((0,r.Z)().mark((function e(){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=(0,i.Z)())||void 0===n?void 0:n.get("/profile");case 2:return t=e.sent,e.abrupt("return",null===t||void 0===t?void 0:t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=(0,o.Z)((0,r.Z)().mark((function e(){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=(0,i.Z)())||void 0===n?void 0:n.get("/customers");case 2:return t=e.sent,e.abrupt("return",null===t||void 0===t?void 0:t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var d={sendOtp:function(e){return s.apply(this,arguments)},confirmOtp:function(e){return a.apply(this,arguments)},getRolesList:function(){return c.apply(this,arguments)},getUserInfo:function(){return u.apply(this,arguments)},getCustomersList:function(){return l.apply(this,arguments)}},p=t(5797).Z.actions,f=function(e){return function(){var n=(0,o.Z)((0,r.Z)().mark((function n(t,o){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t(p.setUserMobile(e));case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},v=function(e){return function(){var n=(0,o.Z)((0,r.Z)().mark((function n(t,o){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t(p.setUserLogin(e));case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},x=function(){return function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n,t){var o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.getRolesList();case 2:o=e.sent,console.log(o),n(p.getRolesList(o));case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},m=function(){return function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n,t){var o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.getCustomersList();case 2:o=e.sent,n(p.getCustomersList(o.customers));case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},h=function(){return function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n,t){var o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.getUserInfo();case 2:o=e.sent,console.log(o),n(p.getUserInfo(o));case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},Z=function(){return function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n,t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(p.logout());case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()}},516:function(e,n,t){var r=t(3263),o=t(5443),i=t(2855),s=t(174);n.Z=function(){var e=r.Z.create({baseURL:"https://apidemo.nipaco.ir/api/v1",headers:localStorage.getItem("nipa_token")?{"Content-Type":"application/json",Accept:"application/json",language:localStorage.getItem("nipa-lang")||"fa",authorization:"Bearer "+localStorage.getItem("nipa_token")}:{"Content-Type":"application/json",Accept:"application/json"}});return e.interceptors.request.use((function(e){return i.Z.dispatch((0,o.ct)(!0)),e}),(function(e){return i.Z.dispatch((0,o.ct)(!1)),Promise.reject(e)})),e.interceptors.response.use((function(e){return i.Z.dispatch((0,o.ct)(!1)),e}),(function(e){(e.response.status,403==e.response.status&&(document.location.href="/errors/403"),e.response.data.errors)?Object.keys(e.response.data.errors).map((function(n){return e.response.data.errors[n]})).forEach((function(e){s.Z.error(e)})):(console.log("err",e.response),s.Z.error(e.response.data.message||e.response.data.msg||e.response.data.error));return i.Z.dispatch((0,o.ct)(!1)),Promise.reject(e)})),e}},7421:function(e,n,t){var r=t(9439),o=t(6739),i=t(2791),s=t(184);n.Z=function(e){var n=e.children,t=e.title,a=(0,i.useState)(!1),c=(0,r.Z)(a,2),u=c[0],l=c[1];return(0,s.jsxs)("div",{className:"mb-[20px]",children:[(0,s.jsxs)("div",{onClick:function(){l(!u)},className:"border border-text-300 w-full h-[72px] bg-white flex items-center justify-between px-[16px] rounded-[5px]",children:[(0,s.jsx)("p",{className:"text-primary-dark text-[16px] font-bold cursor-pointer",children:t}),(0,s.jsx)("div",{className:"w-[28px] h-[28px] bg-text-300 flex items-center justify-center rounded-[8px] cursor-pointer hover:bg-text-400 transition-all",children:(0,s.jsx)(o.Z,{className:"w-[18px] h-[18px] transition-all ".concat(u?"rotate-0":"rotate-180")})})]}),(0,s.jsx)("div",{className:"overflow-hidden ".concat(u?"h-auto opacity-100":"h-0 opacity-0"," w-full transition-all mt-[20px] flex flex-col justify-start items-start"),children:(0,s.jsx)("div",{className:"border border-text-300 bg-white rounded-[5px] w-full h-full",children:n})})]})}},6718:function(e,n,t){var r=t(9145),o=t(184);n.Z=function(e){var n=e.title,t=e.actions,i=e.handleBack;return(0,o.jsxs)("div",{className:"print:hidden w-full flex items-center justify-between mb-[20px]",children:[(0,o.jsxs)("div",{className:"flex items-center",children:[i?(0,o.jsx)("div",{className:"cursor-pointer",onClick:i,children:(0,o.jsx)(r.Z,{className:"mx-[12px] text-gray-500 ltr:rotate-180"})}):(0,o.jsx)("span",{className:"inline-block w-[14px] h-[14px] rounded-[2px] bg-secondary-main me-3"}),(0,o.jsx)("p",{className:"text-gray-500 font-black",children:n})]}),(0,o.jsx)("div",{className:"flex",children:t})]})}},2636:function(e,n,t){var r=t(3239),o=(t(2791),t(1087)),i=t(184);n.Z=function(e){var n=e.type,t=e.simple,s=e.bordered,a=e.href,c=e.text,u=e.onClick,l=e.icon,d=e.after,p=e.sm,f=e.xs,v=e.gray,x=e.disabled,m=e.loading,h=e.className,Z="w-full ".concat(h," ").concat(f?"h-[36px]":p?"h-[38px]":"h-12"," rounded-[8px] flex items-center justify-center bg-primary-main text-white ").concat(s?"border border-primary-main bg-transparent !text-primary-main":"","\n   ").concat(t?"border-none bg-transparent !text-primary-main":"","\n   ").concat(v?"border-none !bg-text-200 !text-text-500":"","\n    ").concat(x?"opacity-90 cursor-not-allowed pointer-events-none":"","\n  "),w=function(){return l?(0,i.jsx)("div",{className:"inline-block me-1",children:l}):(0,i.jsx)(i.Fragment,{})};return(0,i.jsxs)(i.Fragment,{children:[a&&(0,i.jsxs)(o.rU,{to:a,className:Z,children:[!d&&w(),m?(0,i.jsx)(r.Z,{className:"!text-white !w-[20px] !h-[20px]"}):c,d&&w()]}),n&&(0,i.jsxs)("button",{className:Z,type:n,children:[!d&&w(),m?(0,i.jsx)(r.Z,{className:"!text-white !w-[20px] !h-[20px]"}):c,d&&w()]}),u&&(0,i.jsxs)("button",{className:Z,onClick:u,children:[!d&&w(),m?(0,i.jsx)(r.Z,{className:"!text-white !w-[20px] !h-[20px]"}):c,d&&w()]})]})}},745:function(e,n,t){var r=t(9439),o=t(2791),i=t(1782),s=t(184);n.Z=function(e){var n,t,a,c=e.name,u=e.label,l=e.formik,d=(e.type,e.placeholder),p=(e.maskChar,e.className),f=(e.mask,e.inputActions),v=e.options,x=e.disabled,m=e.readonly,h=e.lgText,Z=(0,o.useState)(null),w=(0,r.Z)(Z,2),b=w[0],g=w[1];return(0,s.jsxs)("div",{className:"flex flex-col w-full items-start justify-start ".concat(p),children:[(0,s.jsxs)("div",{className:"".concat(h?"text-md":"text-xs"," mb-2 flex justify-between w-full"),children:[(0,s.jsx)("label",{className:"font-normal",htmlFor:c,children:u}),null===f||void 0===f?void 0:f()]}),(0,s.jsx)(i.ZP,{isDisabled:x,defaultValue:l.values?l.values[c]:b,onChange:function(e){g(e),console.log("nice car",e),l.handleChange({target:{name:c,value:e.value,type:e.type}})},value:l.values?null===v||void 0===v?void 0:v.find((function(e){return e.value===l.values[c]})):b,placeholder:d,options:v,className:"w-full h-12 !outline-none",isSearchable:!1,menuIsOpen:!m&&void 0,classNames:{control:function(e){return"h-12 !rounded-[6px] !outline-none !shadow-none ".concat(e.isFocused?"!border-primary-main":"border-text-300")},placeholder:function(e){return"rtl:text-right ltr:text-left ".concat(h?"text-md":"text-xs")},singleValue:function(e){return"rtl:text-right ltr:text-left ".concat(h?"text-md":"text-xs")},input:function(e){return"rtl:text-right ltr:text-left ".concat(h?"text-md":"text-xs")},valueContainer:function(e){return"!outline-none"},indicatorSeparator:function(e){return"!hidden"},menu:function(e){return"!shadow-none border border-text-400 !rounded-[6px] py-[6px]"},option:function(e){return"p-[6px] ".concat((e.isFocused,""))}},styles:{option:function(e,n){return{"&>p":{cursor:"pointer",backgroundColor:n.isFocused||n.isSelected?"#eef3fa":"#fff",height:40,display:"flex",fontWeight:"normal",alignItems:"center",justifyContent:"flex-start",padding:"10px",borderRadius:"4px",color:"#1f1f1f"}}}}}),(null===(n=l.errors)||void 0===n?void 0:n[c])&&(null===(t=l.touched)||void 0===t?void 0:t[c])&&(0,s.jsx)("p",{className:"text-error-primary text-[10px] mt-1",children:null===(a=l.errors)||void 0===a?void 0:a[c]})]})}},9134:function(e,n,t){var r=t(9439),o=t(5374),i=t(2791),s=t(184),a=function(e){var n=e.children;return(0,s.jsx)("div",{className:"h-[calc(100%-97px)] overflow-auto",children:n})},c=function(e){var n=e.children;return(0,s.jsx)("div",{children:n})},u=function(e){var n=e.open,t=e.handleClose,u=e.children,l=e.headerIcon,d=e.headerText,p=void 0===d?"":d,f=(0,i.useState)(Math.floor(1e3*Math.random())),v=(0,r.Z)(f,2),x=v[0];v[1];return(0,s.jsx)("div",{id:"dialog".concat(x),onClick:function(e){e.target.id==="dialog"+x&&(null===t||void 0===t||t())},className:"w-full h-full fixed bg-black-60 rtl:left-0 ltr:right-0 top-0 transition-all ".concat(n?"opacity-1 z-[999] delay-200":"pointer-events-none opacity-0 z-0 delay-300"),children:(0,s.jsxs)("div",{className:"h-full w-[60%] min-w-[900px] bg-white transition-all\t".concat(n?"translate-x-0 delay-300":"ltr:-translate-x-[100%] rtl:translate-x-[100%] delay-200"),children:[p&&(0,s.jsxs)("div",{className:"flex w-full px-8 py-6 items-center justify-between border-b border-text-300",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"me-3 w-9 h-9 rounded-[12px] bg-primary-main flex items-center justify-center text-white",children:l}),(0,s.jsx)("p",{className:"text-[20px] leading-[20px] font-bold",children:p})]}),(0,s.jsx)("div",{className:"w-9 h-9",children:(0,s.jsx)("button",{onClick:t,className:"w-9 h-9",children:(0,s.jsx)(o.Z,{className:"w-9 h-9"})})})]}),(0,s.jsx)("div",{className:"flex justify-between w-full flex-col h-[calc(100%-85px)]",children:i.Children.map(u,(function(e){return e.type===a?(0,s.jsx)(a,{children:e.props.children}):e.type===c?(0,s.jsx)(c,{children:e.props.children}):void 0}))})]})})};u.Content=a,u.Footer=c,n.Z=u},1310:function(e,n,t){var r=t(3513),o=t(9230),i=t(184);n.Z=function(e){var n=e.columns,t=e.data,s=(0,o.$G)().i18n;return(0,i.jsx)(r.ZP,{direction:"ltr"===s.dir()?r.Nm.LTR:r.Nm.RTL,columns:n,data:t,className:"customTable",conditionalRowStyles:[{when:function(e){return"footer"===e.id},style:{backgroundColor:"rgba(247, 247, 247, 1)",borderTop:"2px solid #EDEDED","&:hover":{cursor:"pointer"}}}]})}},5140:function(e,n,t){t.r(n),t.d(n,{default:function(){return R}});var r=t(9439),o=t(1310),i=t(2737),s=t(5138),a=t(7421),c=t(6718),u=t(2791),l=t(9230),d=t(7689),p=t(2636),f=t(7490),v=t(4165),x=t(1413),m=t(3433),h=t(5861),Z=t(4370),w=t(7139),b=t(9134),g=t(5705),j=t(745),y=t(174),k=t(685),N=t(5359),S=t(184),C=function(e){var n=e.open,t=e.handleClose,r=e.step,o=e.roles,s={selectedRoles:(null===r||void 0===r?void 0:r.roles)||[]},a=(0,l.$G)().t,c=(0,i.C)((function(e){return e.products.productSteps})),d=(0,i.T)(),f=(0,g.TA)({initialValues:s,onSubmit:function(){var e=(0,h.Z)((0,v.Z)().mark((function e(n){var o,i;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=n.selectedRoles.length){e.next=4;break}y.Z.error(a("selectAtLeastOneRole")),e.next=11;break;case 4:if(null!==r&&void 0!==r&&r.id){e.next=6;break}return e.abrupt("return",y.Z.error(a("errorSaveProductStepRoles")));case 6:return e.next=8,k.Z.setProductStepRoles(null===r||void 0===r?void 0:r.id,n.selectedRoles.map((function(e){return e.id})));case 8:e.sent?c&&(o=(0,m.Z)(c),(i=null===o||void 0===o?void 0:o.findIndex((function(e){return e.id==(null===r||void 0===r?void 0:r.id)})))>-1&&(o[i]=(0,x.Z)((0,x.Z)({},o[i]),{},{roles:n.selectedRoles}),d(N.Z.actions.productStepsList((0,m.Z)(o))),y.Z.success(a("successSaveProductStepRoles")))):y.Z.error(a("errorSaveProductStepRoles")),null===t||void 0===t||t();case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()});(0,u.useEffect)((function(){r&&f.setFieldValue("selectedRoles",(null===r||void 0===r?void 0:r.roles)||[])}),[r]);var C=function(){null===t||void 0===t||t()};return(0,S.jsxs)(b.Z,{headerText:a("addPermission")+" "+((null===r||void 0===r?void 0:r.step_name)||""),headerIcon:(0,S.jsx)(Z.Z,{}),open:n,handleClose:C,children:[(0,S.jsx)(b.Z.Content,{children:(0,S.jsxs)("div",{className:"p-7",children:[(0,S.jsx)("p",{className:"w-full text-start text-[16px] font-bold",children:"\u0646\u0642\u0634 \u0647\u0627\u06cc \u0627\u0646\u062a\u062e\u0627\u0628 \u0634\u062f\u0647 \u0632\u06cc\u0631 \u062f\u0633\u062a\u0631\u0633\u06cc \u0628\u0647 \u0627\u06cc\u0646 \u0641\u0631\u0645 \u0631\u0627 \u062e\u0648\u0627\u0647\u0646\u062f \u062f\u0627\u0634\u062a:"}),(0,S.jsx)("form",{onSubmit:f.handleSubmit,className:"w-full",children:(0,S.jsxs)("div",{className:"mt-7 w-full grid grid-cols-1 gap-x-5 gap-y-7",children:[(0,S.jsx)(j.Z,{className:"group ".concat("mb-[15px]"),name:"selectedRoles",label:a("systemRoles"),options:o.map((function(e){return{label:(0,S.jsx)("p",{children:e.name}),value:e.id}})),placeholder:a("select"),formik:{handleChange:function(e){var n=(0,m.Z)(f.values.selectedRoles),t=o.find((function(n){return n.id==e.target.value})),r=n.findIndex((function(e){return e.id==(null===t||void 0===t?void 0:t.id)}));r>-1&&n.splice(r,1),t&&n.push(t),f.setFieldValue("selectedRoles",(0,m.Z)(n))},values:{selectedRoles:null}}}),f.values.selectedRoles.length>0&&(0,S.jsx)("div",{className:"flex items-center justify-start w-full mb-[30px]",children:f.values.selectedRoles.map((function(e,n){return(0,S.jsxs)("div",{className:"w-[97px] h-[48px] rounded-[24px] border border-text-400 flex items-center justify-between pe-2 ps-4 me-2",children:[(0,S.jsx)("p",{className:"text-[14px]",children:e.name}),(0,S.jsx)("div",{onClick:function(){return function(e){var n=(0,m.Z)(f.values.selectedRoles),t=n.findIndex((function(n){return n.id==e.id}));t>-1&&(n.splice(t,1),f.setFieldValue("selectedRoles",(0,m.Z)(n)))}(e)},className:"cursor-pointer",children:(0,S.jsx)(w.Z,{className:"w-[20px] h-[20px]"})})]},n)}))})]})})]})}),(0,S.jsx)(b.Z.Footer,{children:(0,S.jsxs)("div",{className:"mt-20 px-7 flex justify-between items-center py-[25px] border border-text-300",children:[(0,S.jsx)("div",{className:"w-[126px]",children:(0,S.jsx)(p.Z,{text:"\u0627\u0646\u0635\u0631\u0627\u0641",onClick:C,gray:!0})}),(0,S.jsx)("div",{className:"w-[182px]",children:(0,S.jsx)(p.Z,{text:a("saveSetting"),onClick:function(){f.submitForm()}})})]})})]})},_=function(e){var n,t=e.open,o=e.handleClose,s=e.step,a=e.otherSteps,c=(0,l.$G)().t,d=((0,i.C)((function(e){return e.products.productSteps})),(0,i.T)(),null===s||void 0===s?void 0:s.forms[0].optionalFields),f=(0,u.useState)(),v=(0,r.Z)(f,2),h=v[0],g=v[1],N=(0,u.useState)([]),C=(0,r.Z)(N,2),_=C[0],I=C[1],R=(0,u.useState)(),F=(0,r.Z)(R,2),P=F[0],L=F[1];console.log("step",h),(0,u.useEffect)((function(){if(s){var e,n,t,r,o,i,a,c;g({name:"condField",value:(null===(e=s.conditions)||void 0===e||null===(n=e[0])||void 0===n?void 0:n.form_field_id.toString())||"0",options:null===(t=d.find((function(e){var n,t;return e.id.toString()==(null===(n=s.conditions)||void 0===n||null===(t=n[0])||void 0===t?void 0:t.form_field_id.toString())})))||void 0===t?void 0:t.options}),L({label:(null===(r=s.conditions)||void 0===r||null===(o=r[0])||void 0===o?void 0:o.next_product_step_id.toString())||"0",value:(null===(i=s.conditions)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.next_product_step_id.toString())||"0"});var u=[];null===(c=s.conditions)||void 0===c||c.map((function(e){var n,t=null===(n=d.find((function(n){return n.id==e.form_field_id})))||void 0===n?void 0:n.options.find((function(n){return n.id==e.form_field_option_id}));t&&u.push(t)})),I([].concat(u))}}),[s]);var T=function(){null===o||void 0===o||o()};return(0,S.jsxs)(b.Z,{headerText:c("addConditionFor")+" "+((null===s||void 0===s?void 0:s.step_name)||""),headerIcon:(0,S.jsx)(Z.Z,{}),open:t,handleClose:T,children:[(0,S.jsx)(b.Z.Content,{children:(0,S.jsx)("div",{className:"p-7",children:(0,S.jsxs)("div",{className:"w-full flex flex-col items-start justify-start px-4",children:[(0,S.jsx)(j.Z,{className:"group mb-[30px]",name:"condField",label:"\u0641\u06cc\u0644\u062f",options:d&&d.map((function(e){return{label:(0,S.jsx)("p",{children:e.label}),value:e.id.toString()}})),placeholder:"\u0627\u0646\u062a\u062e\u0627\u0628 \u06a9\u0646\u06cc\u062f",formik:{handleChange:function(e){var n=d.find((function(n){return n.id.toString()==e.target.value}));g((0,x.Z)((0,x.Z)({},e.target),{},{options:null===n||void 0===n?void 0:n.options})),I([])},values:{condField:null===h||void 0===h?void 0:h.value}}}),(0,S.jsx)(j.Z,{className:"group ".concat(_.length>0?"mb-[15px]":"mb-[30px]"),name:"condFieldValue",label:"\u0628\u0631\u0627\u0628\u0631",options:h&&(null===h||void 0===h||null===(n=h.options)||void 0===n?void 0:n.map((function(e){return{label:(0,S.jsx)("p",{children:e.label}),value:e.id}}))),placeholder:h?"\u0627\u0646\u062a\u062e\u0627\u0628 \u06a9\u0646\u06cc\u062f":"\u0627\u0628\u062a\u062f\u0627 \u0641\u06cc\u0644\u062f \u0631\u0627 \u0627\u0646\u062a\u062e\u0627\u0628 \u06a9\u0646\u06cc\u062f",formik:{handleChange:function(e){var n=null===h||void 0===h?void 0:h.options;_.findIndex((function(n){return n.id==e.target.value}))>-1||I([].concat((0,m.Z)(_),[(0,x.Z)({},n.find((function(n){return n.id==e.target.value})))]))},values:{condFieldValue:null}}}),_.length>0&&(0,S.jsx)("div",{className:"flex items-center justify-start w-full mb-[30px]",children:_.map((function(e,n){return(0,S.jsxs)("div",{className:"w-[97px] h-[48px] rounded-[24px] border border-text-400 flex items-center justify-between pe-2 ps-4 me-2",children:[(0,S.jsx)("p",{className:"text-[14px]",children:e.label}),(0,S.jsx)("div",{onClick:function(){return function(e){console.log("item",e);var n=(0,m.Z)(_),t=n.findIndex((function(n){return n.option==e.option}));if(t>-1){console.log("index",t),console.log("selectedFieldValue",n);var r=_;r.splice(t,1),I((0,m.Z)(r))}}(e)},className:"cursor-pointer",children:(0,S.jsx)(w.Z,{className:"w-[20px] h-[20px]"})})]},1e4*Math.random())}))}),(0,S.jsx)(j.Z,{className:"group mb-[30px]",name:"relationField",label:"\u0645\u0631\u062d\u0644\u0647 \u0628\u0639\u062f\u06cc \u0628\u0631\u0627\u0628\u0631",options:a&&a.map((function(e){return{label:(0,S.jsx)("p",{children:e.step_name}),value:e.id.toString()}})),placeholder:h?"\u0627\u0646\u062a\u062e\u0627\u0628 \u06a9\u0646\u06cc\u062f":"\u0627\u0628\u062a\u062f\u0627 \u0641\u06cc\u0644\u062f \u0631\u0627 \u0627\u0646\u062a\u062e\u0627\u0628 \u06a9\u0646\u06cc\u062f",formik:{handleChange:function(e){var n=a.find((function(n){return n.id.toString()==e.target.value}));n&&L({label:n.step_name,value:n.id.toString()})},values:{relationField:null===P||void 0===P?void 0:P.value}}})]})})}),(0,S.jsx)(b.Z.Footer,{children:(0,S.jsxs)("div",{className:"mt-20 px-7 flex justify-between items-center py-[25px] border border-text-300",children:[(0,S.jsx)("div",{className:"w-[126px]",children:(0,S.jsx)(p.Z,{text:"\u0627\u0646\u0635\u0631\u0627\u0641",onClick:T,gray:!0})}),(0,S.jsx)("div",{className:"w-[182px]",children:(0,S.jsx)(p.Z,{text:c("saveSetting"),onClick:function(){k.Z.addProductConditions({stepId:null===s||void 0===s?void 0:s.id,fieldId:null===h||void 0===h?void 0:h.value,optionId:_.map((function(e){return e.id})),nextStepId:null===P||void 0===P?void 0:P.value}),null===o||void 0===o||o(),y.Z.success(c("successSaveProductStepconds"))}})})]})})]})},I=t(7047),R=function(){var e=(0,l.$G)(["common","validations"]).t,n=(0,i.C)((function(e){return e.products.productSteps})),t=(0,i.C)((function(e){return e.users.roles})),v=(0,d.s0)(),x=(0,d.UO)().code,m=(0,i.T)(),h=(0,u.useState)(null),Z=(0,r.Z)(h,2),w=Z[0],b=Z[1],g=(0,u.useState)(null),j=(0,r.Z)(g,2),k=j[0],N=j[1],R=[{name:e("order"),selector:function(e,n){return n+1},sortable:!1,class:"bg-primary-main",id:"okokokok"},{name:e("title"),selector:function(e){return e.step_name},sortable:!1},{name:e("manageForm"),center:!0,cell:function(n){return(0,S.jsx)("div",{className:" w-full px-2",children:(0,S.jsx)(p.Z,{xs:!0,text:e("manageForm"),onClick:function(){return P(n)}})})},sortable:!1},{name:e("displayCondition"),center:!0,cell:function(n){return(0,S.jsx)("div",{className:"w-full px-2",children:(0,S.jsx)(p.Z,{xs:!0,bordered:!0,text:e("manageCondition"),onClick:function(){return T(n)}})})},sortable:!1},{name:e("accessibilities"),center:!0,cell:function(n){return(0,S.jsx)("div",{className:"w-full px-2",children:(0,S.jsx)(p.Z,{xs:!0,bordered:!0,text:e("manageAccessibilities"),onClick:function(){return L(n)}})})},sortable:!1},{name:e("exportAndPrint"),center:!0,cell:function(n){return(0,S.jsx)("div",{className:"w-full px-2",children:(0,S.jsx)(p.Z,{xs:!0,bordered:!0,text:e("managePrint"),onClick:function(){return F(n)}})})},sortable:!1}],F=function(e){};(0,u.useEffect)((function(){m((0,s.ZU)(x||"")),(null===t||void 0===t?void 0:t.length)<1&&m((0,f.Sd)())}),[]);var P=function(e){console.log("row",e),v("/products/".concat(x,"/steps/").concat(e.id,"/form"))},L=function(e){b(e)},T=function(t){var r=!0,o=null===n||void 0===n?void 0:n.filter((function(e){return e.parent_id==t.parent_id}));console.log("tmp",o),o.map((function(e){0==e.forms.length&&(r=!1)})),r?0==t.forms[0].optionalFields.length?y.Z.error(e("stepHasNoOptionalFields")):N(t):y.Z.error(e("stepHasNoForm"))};return(0,S.jsxs)("div",{className:"w-full h-full",children:[(0,S.jsx)(C,{roles:t,open:!!w,handleClose:function(){return b(null)},step:w}),(0,S.jsx)(_,{open:!!k,handleClose:function(){return N(null)},step:k,otherSteps:k&&(null===n||void 0===n?void 0:n.filter((function(e){return null!=e.parent_id&&e.id>(null===k||void 0===k?void 0:k.id)})))}),(0,S.jsx)(c.Z,{title:e("handleProductSteps")+" "+x,handleBack:function(){v("/products")}}),(0,S.jsx)("div",{className:"w-full",children:n&&t?n.filter((function(e){return null==e.parent_id})).map((function(e,t){return(0,S.jsx)(a.Z,{title:e.step_name,children:(0,S.jsx)(o.Z,{columns:R,data:(null===n||void 0===n?void 0:n.filter((function(n){return n.parent_id==e.global_step_id})))||[]})},e.id)})):(0,S.jsx)("div",{className:"grid grid-cols-1 gap-[40px]",children:Array.from(Array(3).keys()).map((function(e,n){return(0,S.jsx)(I.Z,{variant:"rounded",width:"100%",height:72,animation:"wave"},n)}))})})]})}}}]);
//# sourceMappingURL=5140.3614c722.chunk.js.map