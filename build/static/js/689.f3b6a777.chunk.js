"use strict";(self.webpackChunknipa_panel_new=self.webpackChunknipa_panel_new||[]).push([[689],{1544:function(e,n,t){t.d(n,{Ol:function(){return y},_0:function(){return Z},Jh:function(){return b},pi:function(){return x}});var r=t(8556),o=t(9778),a=t(3713),i=t(4165),u=t(1413),s=t(5861),c=t(516);function l(){return(l=(0,s.Z)((0,i.Z)().mark((function e(n){var t,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=(0,c.Z)())||void 0===t?void 0:t.post("/sendOtp",{mobile:n.mobile});case 2:return r=e.sent,e.abrupt("return",(0,u.Z)((0,u.Z)({},null===r||void 0===r?void 0:r.data),{},{mobile:n.mobile}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=(0,s.Z)((0,i.Z)().mark((function e(n){var t,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=(0,c.Z)())||void 0===t?void 0:t.post("/confirmOtp",{mobile:n.mobile,otp:n.otp});case 2:return r=e.sent,e.abrupt("return",null===r||void 0===r?void 0:r.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return f.apply(this,arguments)}function f(){return(f=(0,s.Z)((0,i.Z)().mark((function e(){var n,t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=(0,c.Z)())||void 0===n?void 0:n.get("/profile");case 2:return t=e.sent,e.abrupt("return",null===t||void 0===t?void 0:t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return v.apply(this,arguments)}function v(){return(v=(0,s.Z)((0,i.Z)().mark((function e(n){var t,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=(0,c.Z)())||void 0===t?void 0:t.post("/completeProfile",n);case 2:return r=e.sent,e.abrupt("return",null===r||void 0===r?void 0:r.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h=t(2737),g=t(7490),x=function(){var e=(0,h.T)(),n=(0,r.D)({mutationKey:["sendOtp"],mutationFn:function(e){return function(e){return l.apply(this,arguments)}(e)},onSuccess:function(n){e((0,g.cp)(n.mobile))}});return{mutate:n.mutate,loading:n.isPending}},Z=function(){var e=(0,h.T)(),n=(0,r.D)({mutationKey:["confirmOtp"],mutationFn:function(e){return function(e){return p.apply(this,arguments)}(e)},onSuccess:function(n){e((0,g.fY)(n))}});return{mutate:n.mutate,loading:n.isPending}},b=function(){var e=(0,o.a)({queryKey:["userInfo"],queryFn:d});return{data:e.data,isPending:e.isPending}},y=function(){var e=(0,a.NL)(),n=(0,r.D)({mutationKey:["completeProfile"],mutationFn:m,onSuccess:function(n){e.setQueryData(["userInfo"],n)}});return{mutate:n.mutate,loading:n.isPending}}},5443:function(e,n,t){t.d(n,{c:function(){return i},y:function(){return u}});var r=t(4165),o=t(5861),a=t(4999).Z.actions,i=function(e){return function(){var n=(0,o.Z)((0,r.Z)().mark((function n(t,o){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t(a.setApiLoading(e));case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},u=function(e){return function(){var n=(0,o.Z)((0,r.Z)().mark((function n(t,o){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t(a.setCollapseMenu(e));case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}},2737:function(e,n,t){t.d(n,{C:function(){return a},T:function(){return o}});var r=t(9434),o=function(){return(0,r.I0)()},a=r.v9},7490:function(e,n,t){t.d(n,{KR:function(){return h},Sd:function(){return v},bG:function(){return g},kS:function(){return x},fY:function(){return m},cp:function(){return f}});var r=t(4165),o=t(5861),a=t(516);function i(){return(i=(0,o.Z)((0,r.Z)().mark((function e(n){var t,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=(0,a.Z)())||void 0===t?void 0:t.post("/sendOtp",{mobile:n.mobile});case 2:return o=e.sent,e.abrupt("return",null===o||void 0===o?void 0:o.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=(0,o.Z)((0,r.Z)().mark((function e(n){var t,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("cscscsc",n),e.next=3,null===(t=(0,a.Z)())||void 0===t?void 0:t.post("/confirmOtp",{mobile:n.mobile,otp:n.otp});case 3:return o=e.sent,e.abrupt("return",null===o||void 0===o?void 0:o.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(){return(s=(0,o.Z)((0,r.Z)().mark((function e(){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=(0,a.Z)())||void 0===n?void 0:n.get("/roles");case 2:return t=e.sent,e.abrupt("return",null===t||void 0===t?void 0:t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(){return(c=(0,o.Z)((0,r.Z)().mark((function e(){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=(0,a.Z)())||void 0===n?void 0:n.get("/profile");case 2:return t=e.sent,e.abrupt("return",null===t||void 0===t?void 0:t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=(0,o.Z)((0,r.Z)().mark((function e(){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=(0,a.Z)())||void 0===n?void 0:n.get("/customers");case 2:return t=e.sent,e.abrupt("return",null===t||void 0===t?void 0:t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var p={sendOtp:function(e){return i.apply(this,arguments)},confirmOtp:function(e){return u.apply(this,arguments)},getRolesList:function(){return s.apply(this,arguments)},getUserInfo:function(){return c.apply(this,arguments)},getCustomersList:function(){return l.apply(this,arguments)}},d=t(5797).Z.actions,f=function(e){return function(){var n=(0,o.Z)((0,r.Z)().mark((function n(t,o){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t(d.setUserMobile(e));case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},m=function(e){return function(){var n=(0,o.Z)((0,r.Z)().mark((function n(t,o){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t(d.setUserLogin(e));case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},v=function(){return function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n,t){var o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.getRolesList();case 2:o=e.sent,console.log(o),n(d.getRolesList(o));case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},h=function(){return function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n,t){var o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.getCustomersList();case 2:o=e.sent,n(d.getCustomersList(o.customers));case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},g=function(){return function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n,t){var o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.getUserInfo();case 2:o=e.sent,console.log(o),n(d.getUserInfo(o));case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},x=function(){return function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n,t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(d.logout());case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()}},516:function(e,n,t){var r=t(3263),o=t(5443),a=t(2855),i=t(174);n.Z=function(){var e=r.Z.create({baseURL:"https://apidemo.nipaco.ir/api/v1",headers:localStorage.getItem("nipa_token")?{"Content-Type":"application/json",Accept:"application/json",language:localStorage.getItem("nipa-lang")||"fa",authorization:"Bearer "+localStorage.getItem("nipa_token")}:{"Content-Type":"application/json",Accept:"application/json"}});return e.interceptors.request.use((function(e){return a.Z.dispatch((0,o.c)(!0)),e}),(function(e){return a.Z.dispatch((0,o.c)(!1)),Promise.reject(e)})),e.interceptors.response.use((function(e){return a.Z.dispatch((0,o.c)(!1)),e}),(function(e){(e.response.status,403==e.response.status&&(document.location.href="/errors/403"),e.response.data.errors)?Object.keys(e.response.data.errors).map((function(n){return e.response.data.errors[n]})).forEach((function(e){i.Z.error(e)})):(console.log("err",e.response),i.Z.error(e.response.data.message||e.response.data.msg||e.response.data.error));return a.Z.dispatch((0,o.c)(!1)),Promise.reject(e)})),e}},1193:function(e,n,t){var r=t(9039);n.ZP={toISOLocal:function(e){var n=function(e){return("0"+e).slice(-2)},t=e.getTimezoneOffset();return t=Math.abs(t),e.getFullYear()+"-"+n(e.getMonth()+1)+"-"+n(e.getDate())},pluralize:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"s";return"".concat(e," ").concat(n).concat(1!==e?t:"")},fileToUrl:function(e){return new Promise((function(n,t){var r=new FileReader;r.onload=function(e){var t=e.target.result;n(t)},r.onerror=function(e){t(e.target.error)},r.readAsDataURL(e)}))},imageValidExtensions:["image/jpeg","image/jpg","image/png","image/gif"],base64ToBlob:function(e,n){for(var t=window.atob(e),r=t.length,o=new Uint8Array(r),a=0;a<r;++a)o[a]=t.charCodeAt(a);return new Blob([o],{type:n})},renderStatusStyle:function(e){var n;switch(e){case"success":n="bg-success-secondary text-success-primary ";break;case"warning":n="bg-warning-secondary text-warning-text ";break;case"error":n="bg-error-secondary text-error-primary ";break;case"info":n="bg-info-secondary text-info-primary ";break;default:n="bg-text-300 text-text-600 "}return n},toPersianDigitsPutCommas:function(e,n){var t="\u06f0".charCodeAt(0);!e&&(e="");var o=e.split(".");o[0].length>3&&(o[0]=o[0].replace(/\B(?=(\d{3})+(?!\d))/g,","));var a=o.join(".");return n||"fa"===r.Z.language?String(a).replace(/[0-9]/g,(function(e){return String.fromCharCode(e.charCodeAt(0)+t-48)})):a},fileToBlob:function(e){return new Blob([e],{type:e.type})},toPersianDigits:function(e,n){if(n||"fa"===r.Z.language){var t="\u06f0".charCodeAt(0);return String(e).replace(/[0-9]/g,(function(e){return String.fromCharCode(e.charCodeAt(0)+t-48)}))}return e},dateToTimestamp:function(e){return new Date(e).getTime()},renderChatTime:function(e,n,t){var o=Math.floor(Date.now());if(n)return t?new Date(e).toLocaleDateString("fa-IR"):new Date(e).toLocaleDateString("fa-IR")+" , "+new Date(e).toLocaleTimeString("fa-IR").slice(0,5);var a=Math.floor((o-e)/1e3);return a<60?r.Z.t("fewSecondsAgo"):a<3600?Math.floor(a/60)+" "+r.Z.t("minutesAgo"):a<86400?Math.floor(a/3600)+" "+r.Z.t("hoursAgo"):a<604800?Math.floor(a/86400)+" "+r.Z.t("daysAgo"):new Date(e).toLocaleDateString("fa-IR")},checkPermission:function(e){var n,t=null===(n=JSON.parse(localStorage.getItem("nipa_user")||"{}"))||void 0===n?void 0:n.permissions;return!(null===t||void 0===t||!t.find((function(n){return n.slug===e})))},convetToEnglishDigitsRemoveCommas:function(e){var n="\u06f0".charCodeAt(0);return String(e).replace(/[\u06f0-\u06f9]/g,(function(e){return String.fromCharCode(e.charCodeAt(0)-n+48)}))}}},2636:function(e,n,t){var r=t(3239),o=(t(2791),t(1087)),a=t(184);n.Z=function(e){var n=e.type,t=e.simple,i=e.bordered,u=e.href,s=e.text,c=e.onClick,l=e.icon,p=e.after,d=e.sm,f=e.xs,m=e.gray,v=e.disabled,h=e.loading,g=e.className,x="w-full ".concat(g," ").concat(f?"h-[36px]":d?"h-[38px]":"h-12"," rounded-[8px] flex items-center justify-center bg-primary-main text-white ").concat(i?"border border-primary-main bg-transparent !text-primary-main":"","\n   ").concat(t?"border-none bg-transparent !text-primary-main":"","\n   ").concat(m?"border-none !bg-text-200 !text-text-500":"","\n    ").concat(v?"opacity-90 cursor-not-allowed pointer-events-none":"","\n  "),Z=function(){return l?(0,a.jsx)("div",{className:"inline-block me-1",children:l}):(0,a.jsx)(a.Fragment,{})};return(0,a.jsxs)(a.Fragment,{children:[u&&(0,a.jsxs)(o.rU,{to:u,className:x,children:[!p&&Z(),h?(0,a.jsx)(r.Z,{className:"!text-white !w-[20px] !h-[20px]"}):s,p&&Z()]}),n&&(0,a.jsxs)("button",{className:x,type:n,children:[!p&&Z(),h?(0,a.jsx)(r.Z,{className:"!text-white !w-[20px] !h-[20px]"}):s,p&&Z()]}),c&&(0,a.jsxs)("button",{className:x,onClick:c,children:[!p&&Z(),h?(0,a.jsx)(r.Z,{className:"!text-white !w-[20px] !h-[20px]"}):s,p&&Z()]})]})}},8923:function(e,n,t){t(2791);var r=t(9504),o=t.n(r),a=t(4110),i=t(3466),u=t(1193),s=t(9230),c=t(184);n.Z=function(e){var n,t,r,l,p,d,f,m,v,h,g=e.name,x=e.label,Z=e.formik,b=e.type,y=void 0===b?"text":b,w=e.placeholder,k=e.maskChar,j=e.className,C=e.mask,S=e.inputActions,N=e.normal,A=e.endEndorement,D=e.multiline,P=e.readonly,T=e.value,L=(0,s.$G)().i18n;return(0,c.jsxs)("div",{className:"flex flex-col w-full items-start justify-start ".concat(j),children:[x&&(0,c.jsxs)("div",{className:"text-sm mb-2 flex justify-between w-full",children:[(0,c.jsx)("label",{htmlFor:g,className:"font-normal !text-xs",children:x}),null===S||void 0===S?void 0:S()]}),N?(0,c.jsx)(a.Z,{value:"number"==y?u.ZP.toPersianDigitsPutCommas(null===Z||void 0===Z||null===(l=Z.values)||void 0===l?void 0:l[g]):null===Z||void 0===Z||null===(p=Z.values)||void 0===p?void 0:p[g],type:"text",readOnly:P,id:g,name:g,multiline:D,rows:D?4:1,placeholder:w||"",onChange:function(e){var n=u.ZP.convetToEnglishDigitsRemoveCommas(e.target.value),t="";if("number"==y){var r=n.replace(/[^0-9.]/g,"").split(".");t=r.length>1?(r[0]||"0")+"."+(r[1]||""):r[0]}else t=e.target.value;null===Z||void 0===Z||Z.handleChange({target:{name:g,value:t}})},disableUnderline:!0,endAdornment:(0,c.jsx)(i.Z,{position:"end",children:A}),className:"!text-sm text-text-400 w-full ".concat(D?"h-[100px] resize-none !p-2":"h-12"," border border-text-400 rounded-[8px] p-2 focus:border-primary-main !outline-none invalid:border-error-primary ").concat(null!==Z&&void 0!==Z&&null!==(d=Z.errors)&&void 0!==d&&d[g]&&null!==Z&&void 0!==Z&&null!==(f=Z.touched)&&void 0!==f&&f[g]?"!border-error-primary":"")}):(0,c.jsx)(o(),{mask:C||"",maskChar:k||" ",value:T||(null===Z||void 0===Z||null===(n=Z.values)||void 0===n?void 0:n[g]),type:y,dir:L.dir(),className:"w-full h-12 border border-text-400 rounded-[8px] p-2 text-sm focus:border-primary-main !outline-none invalid:border-error-primary ".concat(null!==Z&&void 0!==Z&&null!==(t=Z.errors)&&void 0!==t&&t[g]&&null!==Z&&void 0!==Z&&null!==(r=Z.touched)&&void 0!==r&&r[g]?"!border-error-primary":""),id:g,name:g,style:{direction:"tel"==y?"ltr":L.dir()},placeholder:w||"",readOnly:P,onChange:function(e){null===Z||void 0===Z||Z.handleChange({target:{name:g,value:e.target.value}})}}),(null===Z||void 0===Z||null===(m=Z.errors)||void 0===m?void 0:m[g])&&(null===Z||void 0===Z||null===(v=Z.touched)||void 0===v?void 0:v[g])&&(0,c.jsx)("p",{className:"text-error-primary text-[10px] mt-1",children:null===Z||void 0===Z||null===(h=Z.errors)||void 0===h?void 0:h[g]})]})}},689:function(e,n,t){t.r(n);var r=t(5705),o=(t(2791),t(8923)),a=t(1724),i=t(2636),u=t(7689),s=t(1544),c=t(184),l=a.Ry().shape({mobile:a.Z_().min(13,"\u0634\u0645\u0627\u0631\u0647 \u0645\u0648\u0628\u0627\u06cc\u0644 \u0635\u062d\u06cc\u062d \u0646\u06cc\u0633\u062a").max(13,"\u0634\u0645\u0627\u0631\u0647 \u0645\u0648\u0628\u0627\u06cc\u0644 \u0635\u062d\u06cc\u062d \u0646\u06cc\u0633\u062a ").required("\u0634\u0645\u0627\u0631\u0647 \u0645\u0648\u0628\u0627\u06cc\u0644 \u0627\u0644\u0632\u0627\u0645\u06cc \u0627\u0633\u062a")});n.default=function(){var e=(0,u.s0)(),n=(0,s.pi)(),t=n.loading,a=n.mutate,p=(0,r.TA)({initialValues:{mobile:""},validationSchema:l,onSubmit:function(n){a({mobile:n.mobile.replaceAll(" ","")},{onSuccess:function(){e("/auth/verify",{replace:!0})}})}});return(0,c.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center",children:[(0,c.jsx)("h1",{className:"text-xl font-bold mb-7",children:"\u0648\u0631\u0648\u062f / \u062b\u0628\u062a \u0646\u0627\u0645"}),(0,c.jsx)("p",{className:"text-text-500",children:"\u0628\u0631\u0627\u06cc \u0627\u062f\u0627\u0645\u0647 \u0634\u0645\u0627\u0631\u0647 \u0645\u0648\u0628\u0627\u06cc\u0644 \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f."}),(0,c.jsxs)("form",{onSubmit:p.handleSubmit,className:"w-full px-[80px]",children:[(0,c.jsx)("div",{className:"mt-7 w-full",children:(0,c.jsx)(o.Z,{name:"mobile",mask:"0999 999 9999",label:"\u0634\u0645\u0627\u0631\u0647 \u0645\u0648\u0628\u0627\u06cc\u0644",type:"tel",placeholder:"\u0634\u0645\u0627\u0631\u0647 \u0647\u0645\u0631\u0627\u0647 \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u0646\u0645\u0627\u06cc\u06cc\u062f",formik:p})}),(0,c.jsxs)("div",{className:"mt-20",children:[(0,c.jsx)(i.Z,{loading:t,disabled:t,text:"\u062a\u0627\u06cc\u06cc\u062f \u0648 \u062f\u0631\u06cc\u0627\u0641\u062a \u06a9\u062f",type:"submit"}),(0,c.jsx)(i.Z,{text:"\u0648\u0631\u0648\u062f \u0628\u0627 \u06a9\u0644\u0645\u0647 \u0639\u0628\u0648\u0631",href:"/auth/verify",simple:!0})]})]})]})}}}]);
//# sourceMappingURL=689.f3b6a777.chunk.js.map