"use strict";(self.webpackChunknipa_panel_new=self.webpackChunknipa_panel_new||[]).push([[7320],{2737:function(e,t,n){n.d(t,{C:function(){return s},T:function(){return o}});var r=n(9434),o=function(){return(0,r.I0)()},s=r.v9},5138:function(e,t,n){n.d(t,{BU:function(){return c},Ir:function(){return f},ZU:function(){return a},bJ:function(){return u},gg:function(){return d},l$:function(){return v},nM:function(){return l},zm:function(){return p}});var r=n(4165),o=n(5861),s=n(685),i=n(5359).Z.actions,c=function(){return function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t,n){var o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.productsList();case 2:o=e.sent,t(i.productsList(o));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},a=function(e){return function(){var t=(0,o.Z)((0,r.Z)().mark((function t(n,o){var c;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.Z.productStepsList(e);case 2:c=t.sent,n(i.productStepsList(c));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},u=function(e){return function(){var t=(0,o.Z)((0,r.Z)().mark((function t(n,o){var c;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e){t.next=2;break}return t.abrupt("return",n(i.productStepInfo(null)));case 2:return t.next=4,s.Z.productStepInfo(e);case 4:c=t.sent,n(i.productStepInfo(c));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},d=function(e){return function(){var t=(0,o.Z)((0,r.Z)().mark((function t(n,o){var c;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.Z.saveProduct(e);case 2:c=t.sent,n(i.saveProduct(c));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},l=function(e,t){return function(){var n=(0,o.Z)((0,r.Z)().mark((function n(o,a){var u;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.Z.updateProduct(e,t);case 2:u=n.sent,o(i.updateProduct(u)),o(c());case 5:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},p=function(e){return function(){var t=(0,o.Z)((0,r.Z)().mark((function t(n,o){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(i.setSaveSuccess(e));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},f=function(e){return function(){var t=(0,o.Z)((0,r.Z)().mark((function t(n,o){var c;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.Z.deleteProduct(e);case 2:c=t.sent,n(i.deleteProduct(c));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},v=function(e){return function(){var t=(0,o.Z)((0,r.Z)().mark((function t(n,o){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(i.setDeleteSuccess(e));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}},685:function(e,t,n){var r=n(4165),o=n(5861),s=n(516);function i(){return(i=(0,o.Z)((0,r.Z)().mark((function e(){var t,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=(0,s.Z)())||void 0===t?void 0:t.get("/products");case 2:return n=e.sent,e.abrupt("return",null===n||void 0===n?void 0:n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(){return(c=(0,o.Z)((0,r.Z)().mark((function e(t){var n,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=(0,s.Z)())||void 0===n?void 0:n.get("/product/".concat(t,"/steps"));case 2:return o=e.sent,e.abrupt("return",null===o||void 0===o?void 0:o.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function a(){return(a=(0,o.Z)((0,r.Z)().mark((function e(t){var n,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=(0,s.Z)())||void 0===n?void 0:n.get("/productSteps/".concat(t));case 2:return o=e.sent,e.abrupt("return",null===o||void 0===o?void 0:o.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=(0,o.Z)((0,r.Z)().mark((function e(t,n){var o,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(o=(0,s.Z)())||void 0===o?void 0:o.post("/product/steps/".concat(t,"/setRoles"),{roles:n.join(",")});case 2:return i=e.sent,e.abrupt("return",null===i||void 0===i?void 0:i.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return(d=(0,o.Z)((0,r.Z)().mark((function e(t){var n,o,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=(0,s.Z)())||void 0===n?void 0:n.post("/products",{name:t.name,code:t.code,custom:t.custom,price:t.price,count_type:t.count_type,status:t.status,description:t.description,images:null===(o=t.images)||void 0===o?void 0:o.map((function(e){return e.hashCode}))});case 2:return i=e.sent,e.abrupt("return",null===i||void 0===i?void 0:i.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=(0,o.Z)((0,r.Z)().mark((function e(t,n){var o,i,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(o=(0,s.Z)())||void 0===o?void 0:o.put("/products/".concat(t),{name:n.name,code:n.code,custom:n.custom,count_type:n.count_type,price:n.price,status:n.status,description:n.description,images:null===(i=n.images)||void 0===i?void 0:i.map((function(e){return e.hashCode}))});case 2:return c=e.sent,e.abrupt("return",null===c||void 0===c?void 0:c.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=(0,o.Z)((0,r.Z)().mark((function e(t){var n,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=(0,s.Z)())||void 0===n?void 0:n.delete("/products/".concat(t));case 2:return o=e.sent,e.abrupt("return",null===o||void 0===o?void 0:o.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return(f=(0,o.Z)((0,r.Z)().mark((function e(t){var n,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=(0,s.Z)())||void 0===n?void 0:n.get("/products/".concat(t));case 2:return o=e.sent,e.abrupt("return",null===o||void 0===o?void 0:o.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=(0,o.Z)((0,r.Z)().mark((function e(t){var n,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=(0,s.Z)())||void 0===n?void 0:n.post("/product/steps/conditions",{step_id:t.stepId,field_id:t.fieldId,option_id:t.optionId,next_step_id:t.nextStepId});case 2:return o=e.sent,e.abrupt("return",null===o||void 0===o?void 0:o.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.Z={productsList:function(){return i.apply(this,arguments)},saveProduct:function(e){return d.apply(this,arguments)},deleteProduct:function(e){return p.apply(this,arguments)},productStepsList:function(e){return c.apply(this,arguments)},productStepInfo:function(e){return a.apply(this,arguments)},setProductStepRoles:function(e,t){return u.apply(this,arguments)},addProductConditions:function(e){return v.apply(this,arguments)},getProduct:function(e){return f.apply(this,arguments)},updateProduct:function(e,t){return l.apply(this,arguments)}}},9788:function(e,t,n){n(2791);var r=n(3455),o=n(7139),s=n(9230),i=n(2636),c=n(3239),a=n(184);t.Z=function(e){var t=e.open,n=e.onClose,u=e.title,d=e.handleConfirm,l=e.loading,p=(0,s.$G)(["common","validations"]).t;return(0,a.jsxs)(r.Z,{open:t,onClose:n,children:[(0,a.jsx)("div",{className:"w-14 h-14 mb-[10px] bg-primary-250 rounded-full items-center justify-center flex text-primary-main",children:(0,a.jsx)(o.Z,{variant:"Bold"})}),(0,a.jsx)("div",{children:(0,a.jsx)("p",{className:"text-center text-[16px] font-semibold mb-[35px]",children:u})}),(0,a.jsxs)("div",{className:"flex items-center justify-between w-full max-w-[236px]",children:[(0,a.jsx)("div",{className:"w-[102px]",children:(0,a.jsx)(i.Z,{disabled:l,text:l?(0,a.jsx)(c.Z,{color:"inherit",size:24}):p("yes"),onClick:l?function(){}:d})}),(0,a.jsx)("div",{className:"w-[102px]",children:(0,a.jsx)(i.Z,{disabled:l,text:p("no"),onClick:l?function(){}:n,bordered:!0})})]})]})}},3455:function(e,t,n){var r=n(1413),o=n(5931),s=n(3542),i=n(195),c=n(2791),a=n(184),u=c.forwardRef((function(e,t){return(0,a.jsx)(o.Z,(0,r.Z)({direction:"up",ref:t},e))}));t.Z=function(e){var t=e.open,n=e.onClose,r=e.children;return(0,a.jsx)(s.Z,{open:t,TransitionComponent:u,keepMounted:!0,onClose:n,"aria-describedby":"alert-dialog-slide-description",sx:{"& .MuiDialog-paper":{width:"452px"}},children:(0,a.jsx)(i.Z,{className:"flex items-center justify-center flex-col",children:r})})}},9354:function(e,t,n){var r=n(7047),o=n(184);t.Z=function(){return(0,o.jsxs)("div",{className:"grid",children:[(0,o.jsx)("div",{className:"w-full h-[71px] bg-text-200 border border-text-300 rounded-t-[4px] grid grid-cols-6 items-center justify-center px-4",children:Array.from(Array(5).keys()).map((function(e,t){return(0,o.jsx)(r.Z,{variant:"rounded",width:"37px",height:18,animation:"wave"},t)}))}),Array.from(Array(5).keys()).map((function(e,t){return(0,o.jsxs)("div",{className:"w-full h-[71px] border border-text-300 border-t-0 rounded-t-[4px] grid grid-cols-6 items-center justify-center px-4",children:[Array.from(Array(5).keys()).map((function(e,t){return(0,o.jsx)(r.Z,{variant:"rounded",width:"45px",height:18,animation:"wave"},t)})),(0,o.jsx)("div",{className:"w-[120px] flex items-cente justify-center",children:(0,o.jsx)("div",{className:"w-[92px] h-[38px] rounded-full border border-text-400 flex items-center justify-center",children:(0,o.jsx)(r.Z,{variant:"rounded",width:"47px",height:14,animation:"wave"})})})]},t)}))]})}},7320:function(e,t,n){n.r(t),n.d(t,{default:function(){return V}});var r=n(9439),o=n(2634),s=n(1516),i=n(7139),c=n(4370),a=n(2791),u=n(6718),d=n(2636),l=n(1310),p=n(1594),f=n(2737),v=n(9230),x=n(5138),m=n(4165),h=n(5861),Z=n(6995),y=n(9134),j=n(8923),w=n(5705),g=n(745),b=n(5583),k=n(8555),N=n(1724),S=n(174),C=n(685),P=n(2841),_=n(184),I=function(e){var t=e.open,n=e.handleClose,o=e.selectedProductId,s=(0,v.$G)(["common","validations"]).t,i=(0,f.T)(),u=(0,f.C)((function(e){return e.products.saveSuccess})),l=(0,a.useState)(),p=(0,r.Z)(l,2),I=p[0],T=p[1];(0,a.useEffect)((function(){function e(){return(e=(0,h.Z)((0,m.Z)().mark((function e(){var t;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=5;break}return e.next=3,C.Z.getProduct(o);case 3:t=e.sent,T(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[o]);var q=(0,a.useState)(!1),F=(0,r.Z)(q,2),V=F[0],A=F[1],B=N.Ry().shape({code:N.Z_().required(s("productCode.required",{ns:"validations"})||""),name:N.Z_().required(s("productName.required",{ns:"validations"})||""),description:N.Z_().required(s("productDescription.required",{ns:"validations"})||""),count_type:N.Z_().required(s("countType.required",{ns:"validations"})||""),price:N.Z_().when("custom",{is:0,then:N.Z_().required(s("productPrice.required",{ns:"validations"})||""),otherwise:N.Z_()})}),E=(0,w.TA)({initialValues:{code:"",name:"",status:1,custom:1,description:"",price:"",count_type:"quantity",images:[]},validationSchema:B,onSubmit:function(e){i(o?(0,x.nM)(o,e):(0,x.gg)(e))}}),L=function(){n&&n(),T(void 0),E.resetForm()};return(0,a.useEffect)((function(){u&&(L(),i((0,x.zm)(!1)),S.Z.success(s(o?"updateProductSuccess":"addProductSuccess")))}),[u]),console.log("formik",E),(0,a.useEffect)((function(){!function(){var e,t,n,r;I&&(E.setFieldValue("code",I.code),E.setFieldValue("name",I.name),E.setFieldValue("status",I.status),E.setFieldValue("custom",I.custom),E.setFieldValue("count_type",I.count_type),E.setFieldValue("description",null===(e=I.details)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.description),E.setFieldValue("price",(null===(n=I.details)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.price)||""),E.setFieldValue("images",I.images))}()}),[I]),(0,_.jsxs)(y.Z,{headerText:s("addProduct"),headerIcon:(0,_.jsx)(c.Z,{}),open:t,handleClose:L,children:[(0,_.jsxs)(y.Z.Content,{children:[o&&!I&&(0,_.jsx)(P.Z,{}),(0,_.jsxs)("div",{className:"p-7 font-bold text-[18px]",children:[(0,_.jsx)("p",{className:"text-start",children:s("enterProductDetail")}),(0,_.jsxs)("form",{onSubmit:E.handleSubmit,className:"w-full",children:[(0,_.jsxs)("div",{className:"mt-7 w-full grid grid-cols-2 gap-x-5 gap-y-7",children:[(0,_.jsx)(j.Z,{name:"code",label:s("productCode"),type:"text",placeholder:s("productCode.placeholder",{ns:"validations"}),formik:E}),(0,_.jsx)(j.Z,{name:"name",label:s("productName"),type:"text",placeholder:s("productName.placeholder",{ns:"validations"}),formik:E}),(0,_.jsx)(g.Z,{className:"group",name:"status",label:s("status"),options:[{label:(0,_.jsx)("p",{children:s("active")}),value:1},{label:(0,_.jsx)("p",{children:s("inactive")}),value:0}],placeholder:s("productStatus.placeholder",{ns:"validations"}),formik:E}),(0,_.jsx)(g.Z,{className:"group",name:"custom",label:s("productType"),options:[{label:(0,_.jsx)("p",{children:s("custom")}),value:1},{label:(0,_.jsx)("p",{children:s("normal")}),value:0}],placeholder:s("productType.placeholder",{ns:"validations"}),formik:E})]}),(0,_.jsx)("div",{className:"mt-7 w-full grid grid-cols-1 gap-x-5 gap-y-7",children:(0,_.jsx)(g.Z,{className:"group",name:"count_type",label:s("countType"),options:[{label:(0,_.jsx)("p",{children:s("quantity")}),value:"quantity"},{label:(0,_.jsx)("p",{children:s("m2")}),value:"m2"}],placeholder:s("countType.placeholder",{ns:"validations"}),formik:E})}),0==E.values.custom&&(0,_.jsx)("div",{className:"mt-7 w-full grid grid-cols-1 gap-x-5 gap-y-7",children:(0,_.jsx)(j.Z,{name:"price",label:s("price"),type:"number",placeholder:s("productPrice.placeholder",{ns:"validations"}),formik:E})}),(0,_.jsx)("div",{className:"mt-7 w-full grid grid-cols-1 gap-x-5 gap-y-7",children:t&&(0,_.jsx)(b.Z,{className:"group",name:"images",label:s("productImages"),placeholder:s("uploadNewImage"),imageOnly:!0,formik:E,setPending:A})}),(0,_.jsx)("div",{className:"mt-7 w-full grid grid-cols-1 gap-x-5 gap-y-7",children:(0,_.jsx)(k.Z,{name:"description",label:s("description"),formik:E})})]})]})]}),(0,_.jsx)(y.Z.Footer,{children:(0,_.jsxs)("div",{className:"py-[24px] border-t border-text-300 px-7 flex justify-between",children:[(0,_.jsx)("div",{className:"w-[126px]",children:(0,_.jsx)(d.Z,{disabled:V,text:"\u0627\u0646\u0635\u0631\u0627\u0641",onClick:L,gray:!0})}),(0,_.jsx)("div",{className:"w-[207px]",children:(0,_.jsx)(d.Z,{disabled:V,icon:o?(0,_.jsx)(Z.Z,{}):(0,_.jsx)(c.Z,{}),text:s(o?"editProduct":"addProduct"),onClick:function(){E.handleSubmit()}})})]})})]})},T=n(9788),q=n(7689),F=n(9354),V=function(){var e=(0,f.C)((function(e){return e.products.products})),t=(0,a.useState)([]),n=(0,r.Z)(t,2),m=n[0],h=n[1],Z=(0,a.useState)(!1),y=(0,r.Z)(Z,2),j=y[0],w=y[1],g=(0,q.s0)(),b=(0,f.C)((function(e){return e.products.deleteSuccess})),k=(0,v.$G)("common").t,N=(0,a.useState)(null),C=(0,r.Z)(N,2),P=C[0],V=C[1],A=(0,a.useState)(!1),B=(0,r.Z)(A,2),E=B[0],L=B[1],R=(0,a.useState)(!1),$=(0,r.Z)(R,2),D=$[0],M=$[1],z=(0,f.T)();(0,a.useEffect)((function(){z((0,x.BU)())}),[]),(0,a.useEffect)((function(){if(e){console.log("data123",e);var t=[{name:k("productCode"),selector:function(e){return e.code},sortable:!0},{name:k("title"),selector:function(e){return e.name},sortable:!0},{name:k("productType"),selector:function(e){return e.custom?k("custom"):k("normal")},sortable:!0},{name:k("countType"),selector:function(e){return k(e.count_type)},sortable:!0},{name:k("status"),selector:function(e){return k("active")},sortable:!0}];t.push({allowOverflow:!0,button:!0,width:"120px",cell:function(e){return(0,_.jsx)(p.Z,{items:[{icon:(0,_.jsx)(o.Z,{variant:"Bold"}),text:k("edit"),name:"edit"},e.custom&&{icon:(0,_.jsx)(s.Z,{variant:"Bold"}),text:k("manageSteps"),name:"steps"},{icon:(0,_.jsx)(i.Z,{variant:"Bold"}),text:k("delete"),name:"delete"}].filter(Boolean),handleAction:G,row:e})}}),h([].concat(t)),console.log("data.orders",e.cols)}}),[e]);var G=function(e,t){switch(console.log("row",e),console.log("action",t),V(e),t){case"delete":w(!0);break;case"steps":g("".concat(e.code,"/steps"));break;case"edit":M(!0)}};(0,a.useEffect)((function(){b&&(L(!1),w(!1),S.Z.success(k("deleteProductSuccess")),setTimeout((function(){z((0,x.l$)(!1))}),100))}),[b]);return(0,_.jsxs)("div",{className:"w-full h-full",children:[(0,_.jsx)(I,{open:D,handleClose:function(){M(!1),V(null)},selectedProductId:(null===P||void 0===P?void 0:P.id)||void 0}),(0,_.jsx)(T.Z,{title:k("deleteProductConfirmation"),open:j,onClose:function(){w(!1)},handleConfirm:function(){L(!0),console.log("selectedRow",P),z((0,x.Ir)(P.id))},loading:E}),(0,_.jsx)(u.Z,{actions:(0,_.jsx)(_.Fragment,{children:(0,_.jsx)("div",{className:"w-[186px] ms-4",children:(0,_.jsx)(d.Z,{icon:(0,_.jsx)(c.Z,{}),text:k("addProduct"),onClick:function(){return M(!0)}})})}),title:k("products")}),(0,_.jsx)("div",{children:e?(0,_.jsx)(l.Z,{columns:m,data:e||[]}):(0,_.jsx)(F.Z,{})})]})}}}]);
//# sourceMappingURL=7320.ffc9be0e.chunk.js.map