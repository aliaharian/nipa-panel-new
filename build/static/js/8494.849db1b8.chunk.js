"use strict";(self.webpackChunknipa_panel_new=self.webpackChunknipa_panel_new||[]).push([[8494],{6041:(e,t,n)=>{n.d(t,{J3:()=>o,WG:()=>r,hR:()=>a});const s=n(8852).A.actions,a=e=>async(t,n)=>{t(s.setApiLoading(e))},o=e=>async(t,n)=>{t(s.setCollapseMenu(e))},r=e=>async(t,n)=>{t(s.setOpenMenu(e))}},7311:(e,t,n)=>{n.d(t,{G:()=>o,j:()=>a});var s=n(9456);const a=()=>(0,s.wA)(),o=s.d4},7099:(e,t,n)=>{n.d(t,{DD:()=>u,JK:()=>o,Jm:()=>c,Nb:()=>r,Tu:()=>l,cz:()=>i,vc:()=>d,x7:()=>p});var s=n(8875);const a=n(8870).A.actions,o=()=>async(e,t)=>{const n=await s.A.productsList();e(a.productsList(n))},r=e=>async(t,n)=>{const o=await s.A.productStepsList(e);t(a.productStepsList(o))},i=e=>async(t,n)=>{if(0===e)return t(a.productStepInfo(null));const o=await s.A.productStepInfo(e);t(a.productStepInfo(o))},l=e=>async(t,n)=>{const o=await s.A.saveProduct(e);t(a.saveProduct(o))},d=(e,t)=>async(n,r)=>{const i=await s.A.updateProduct(e,t);n(a.updateProduct(i)),n(o())},c=e=>async(t,n)=>{t(a.setSaveSuccess(e))},u=e=>async(t,n)=>{const o=await s.A.deleteProduct(e);t(a.deleteProduct(o))},p=e=>async(t,n)=>{t(a.setDeleteSuccess(e))}},8875:(e,t,n)=>{n.d(t,{A:()=>a});var s=n(670);const a={productsList:async function(){var e;let t=await(null===(e=(0,s.A)())||void 0===e?void 0:e.get("/products"));return null===t||void 0===t?void 0:t.data},saveProduct:async function(e){var t,n;let a=await(null===(t=(0,s.A)())||void 0===t?void 0:t.post("/products",{name:e.name,code:e.code,custom:e.custom,price:e.price,count_type:e.count_type,status:e.status,description:e.description,images:null===(n=e.images)||void 0===n?void 0:n.map((e=>e.hashCode))}));return null===a||void 0===a?void 0:a.data},deleteProduct:async function(e){var t;let n=await(null===(t=(0,s.A)())||void 0===t?void 0:t.delete("/products/".concat(e)));return null===n||void 0===n?void 0:n.data},productStepsList:async function(e){var t;let n=await(null===(t=(0,s.A)())||void 0===t?void 0:t.get("/product/".concat(e,"/steps")));return null===n||void 0===n?void 0:n.data},productStepInfo:async function(e){var t;let n=await(null===(t=(0,s.A)())||void 0===t?void 0:t.get("/productSteps/".concat(e)));return null===n||void 0===n?void 0:n.data},setProductStepRoles:async function(e,t){var n;let a=await(null===(n=(0,s.A)())||void 0===n?void 0:n.post("/product/steps/".concat(e,"/setRoles"),{roles:t.join(",")}));return null===a||void 0===a?void 0:a.data},addProductConditions:async function(e){var t;let n=await(null===(t=(0,s.A)())||void 0===t?void 0:t.post("/product/steps/conditions",{step_id:e.stepId,field_id:e.fieldId,option_id:e.optionId,next_step_id:e.nextStepId}));return null===n||void 0===n?void 0:n.data},getProduct:async function(e){var t;let n=await(null===(t=(0,s.A)())||void 0===t?void 0:t.get("/products/".concat(e)));return null===n||void 0===n?void 0:n.data},updateProduct:async function(e,t){var n,a;let o=await(null===(n=(0,s.A)())||void 0===n?void 0:n.put("/products/".concat(e),{name:t.name,code:t.code,custom:t.custom,count_type:t.count_type,price:t.price,status:t.status,description:t.description,images:null===(a=t.images)||void 0===a?void 0:a.map((e=>e.hashCode))}));return null===o||void 0===o?void 0:o.data}}},670:(e,t,n)=>{n.d(t,{A:()=>i});var s=n(7154),a=n(6041),o=n(6254),r=n(5424);const i=()=>{const e=s.A.create({baseURL:"https://apidemo.nipaco.ir/api/v1",headers:localStorage.getItem("nipa_token")?{"Content-Type":"application/json",Accept:"application/json",language:localStorage.getItem("nipa-lang")||"fa",authorization:"Bearer "+localStorage.getItem("nipa_token")}:{"Content-Type":"application/json",Accept:"application/json"}});return e.interceptors.request.use((function(e){return o.A.dispatch((0,a.hR)(!0)),e}),(function(e){return o.A.dispatch((0,a.hR)(!1)),Promise.reject(e)})),e.interceptors.response.use((function(e){return o.A.dispatch((0,a.hR)(!1)),e}),(function(e){if(e.response.status,403==e.response.status&&(document.location.href="/errors/403"),e.response.data.errors){Object.keys(e.response.data.errors).map((t=>e.response.data.errors[t])).forEach((e=>{r.A.error(e)}))}else console.log("err",e.response),r.A.error(e.response.data.message||e.response.data.msg||e.response.data.error);return o.A.dispatch((0,a.hR)(!1)),Promise.reject(e)})),e}},6640:(e,t,n)=>{n.d(t,{Ay:()=>a});var s=n(1735);const a={toISOLocal:function(e){var t=e=>("0"+e).slice(-2),n=e.getTimezoneOffset();return n=Math.abs(n),e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())},pluralize:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"s";return"".concat(e," ").concat(t).concat(1!==e?n:"")},fileToUrl:e=>new Promise(((t,n)=>{const s=new FileReader;s.onload=function(e){const n=e.target.result;t(n)},s.onerror=function(e){n(e.target.error)},s.readAsDataURL(e)})),imageValidExtensions:["image/jpeg","image/jpg","image/png","image/gif"],base64ToBlob:function(e,t){const n=window.atob(e),s=n.length,a=new Uint8Array(s);for(let o=0;o<s;++o)a[o]=n.charCodeAt(o);return new Blob([a],{type:t})},renderStatusStyle:e=>{let t;switch(e){case"success":t="bg-success-secondary text-success-primary ";break;case"warning":t="bg-warning-secondary text-warning-text ";break;case"error":t="bg-error-secondary text-error-primary ";break;case"info":t="bg-info-secondary text-info-primary ";break;default:t="bg-text-300 text-text-600 "}return t},toPersianDigitsPutCommas:(e,t)=>{const n="\u06f0".charCodeAt(0);!e&&(e="");let a=e.split(".");a[0].length>3&&(a[0]=a[0].replace(/\B(?=(\d{3})+(?!\d))/g,","));const o=a.join(".");if(t||"fa"===s.A.language){return String(o).replace(/[0-9]/g,(e=>String.fromCharCode(e.charCodeAt(0)+n-48)))}return o},fileToBlob:function(e){return new Blob([e],{type:e.type})},toPersianDigits:(e,t)=>{if(t||"fa"===s.A.language){const t="\u06f0".charCodeAt(0);return String(e).replace(/[0-9]/g,(e=>String.fromCharCode(e.charCodeAt(0)+t-48)))}return e},dateToTimestamp:e=>new Date(e).getTime(),renderChatTime:(e,t,n)=>{let a=Math.floor(Date.now());if(t)return n?new Date(e).toLocaleDateString("fa-IR"):new Date(e).toLocaleDateString("fa-IR")+" , "+new Date(e).toLocaleTimeString("fa-IR").slice(0,5);let o=Math.floor((a-e)/1e3);return o<60?s.A.t("fewSecondsAgo"):o<3600?Math.floor(o/60)+" "+s.A.t("minutesAgo"):o<86400?Math.floor(o/3600)+" "+s.A.t("hoursAgo"):o<604800?Math.floor(o/86400)+" "+s.A.t("daysAgo"):new Date(e).toLocaleDateString("fa-IR")},checkPermission:e=>{var t;let n=null===(t=JSON.parse(localStorage.getItem("nipa_user")||"{}"))||void 0===t?void 0:t.permissions;return!(null===n||void 0===n||!n.find((t=>t.slug===e)))},convetToEnglishDigitsRemoveCommas:e=>{const t="\u06f0".charCodeAt(0);return String(e).replace(/[\u06f0-\u06f9]/g,(e=>String.fromCharCode(e.charCodeAt(0)-t+48)))}}},3232:(e,t,n)=>{n.d(t,{A:()=>o});var s=n(7281),a=n(579);const o=e=>{let{title:t,actions:n,handleBack:o}=e;return(0,a.jsxs)("div",{className:"print:hidden w-full flex items-center justify-between mb-[20px]",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[o?(0,a.jsx)("div",{className:"cursor-pointer",onClick:o,children:(0,a.jsx)(s.A,{className:"mx-[12px] text-gray-500 ltr:rotate-180"})}):(0,a.jsx)("span",{className:"inline-block w-[14px] h-[14px] rounded-[2px] bg-secondary-main me-3"}),(0,a.jsx)("p",{className:"text-gray-500 font-black",children:t})]}),(0,a.jsx)("div",{className:"flex",children:n})]})}},7578:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(1637),a=(n(5043),n(5475)),o=n(579);const r=e=>{let{type:t,simple:n,bordered:r,href:i,text:l,onClick:d,icon:c,after:u,sm:p,xs:m,gray:x,disabled:h,loading:v,className:f}=e;const g="w-full ".concat(f," ").concat(m?"h-[36px]":p?"h-[38px]":"h-12"," rounded-[8px] flex items-center justify-center bg-primary-main text-white ").concat(r?"border border-primary-main bg-transparent !text-primary-main":"","\n   ").concat(n?"border-none bg-transparent !text-primary-main":"","\n   ").concat(x?"border-none !bg-text-200 !text-text-500":"","\n    ").concat(h?"opacity-90 cursor-not-allowed pointer-events-none":"","\n  "),j=()=>c?(0,o.jsx)("div",{className:"inline-block me-1",children:c}):(0,o.jsx)(o.Fragment,{});return(0,o.jsxs)(o.Fragment,{children:[i&&(0,o.jsxs)(a.N_,{to:i,className:g,children:[!u&&j(),v?(0,o.jsx)(s.A,{className:"!text-white !w-[20px] !h-[20px]"}):l,u&&j()]}),t&&(0,o.jsxs)("button",{className:g,type:t,children:[!u&&j(),v?(0,o.jsx)(s.A,{className:"!text-white !w-[20px] !h-[20px]"}):l,u&&j()]}),d&&(0,o.jsxs)("button",{className:g,onClick:d,children:[!u&&j(),v?(0,o.jsx)(s.A,{className:"!text-white !w-[20px] !h-[20px]"}):l,u&&j()]})]})}},8366:(e,t,n)=>{n.d(t,{A:()=>d});var s,a=n(5043);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},o.apply(this,arguments)}function r(e,t){let{title:n,titleId:r,...i}=e;return a.createElement("svg",o({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",ref:t,"aria-labelledby":r},i),n?a.createElement("title",{id:r},n):null,s||(s=a.createElement("path",{d:"m7.75 12 2.83 2.83 5.67-5.66",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})))}const i=a.forwardRef(r);n.p;var l=n(579);const d=e=>{let{name:t,label:n,value:s,className:a,checked:o,handleCheck:r}=e;return(0,l.jsxs)("div",{className:"flex me-4 mb-4 items-start justify-start relative cursor-pointer ".concat(a),onClick:r,children:[(0,l.jsx)("input",{type:"checkbox",checked:o,value:s,name:t,onChange:r,className:"absolute top-0 left-0 opacity-0"}),(0,l.jsx)("div",{className:"w-6 h-6  rounded-[4px] me-2\n      ".concat(o?"border-none bg-primary-main":"border border-text-400","\n      "),children:(0,l.jsx)(i,{className:"text-white"})}),(0,l.jsx)("p",{className:"text-[14px]",children:n})]})}},9973:(e,t,n)=>{n.d(t,{A:()=>c});n(5043);var s=n(4457),a=n.n(s),o=n(3360),r=n(1787),i=n(6640),l=n(4117),d=n(579);const c=e=>{var t,n,s,c,u,p,m,x,h,v;let{name:f,label:g,formik:j,type:b="text",placeholder:y,maskChar:A,className:w,mask:N,inputActions:C,normal:k,endEndorement:S,multiline:R,readonly:P,value:D}=e;const{i18n:I}=(0,l.Bd)();return(0,d.jsxs)("div",{className:"flex flex-col w-full items-start justify-start ".concat(w),children:[g&&(0,d.jsxs)("div",{className:"text-sm mb-2 flex justify-between w-full",children:[(0,d.jsx)("label",{htmlFor:f,className:"font-normal !text-xs",children:g}),null===C||void 0===C?void 0:C()]}),k?(0,d.jsx)(o.A,{value:"number"==b?i.Ay.toPersianDigitsPutCommas(null===j||void 0===j||null===(c=j.values)||void 0===c?void 0:c[f]):null===j||void 0===j||null===(u=j.values)||void 0===u?void 0:u[f],type:"text",readOnly:P,id:f,name:f,multiline:R,rows:R?4:1,placeholder:y||"",onChange:e=>{const t=i.Ay.convetToEnglishDigitsRemoveCommas(e.target.value);let n="";if("number"==b){let e=t.replace(/[^0-9.]/g,"").split(".");n=e.length>1?(e[0]||"0")+"."+(e[1]||""):e[0]}else n=e.target.value;null===j||void 0===j||j.handleChange({target:{name:f,value:n}})},disableUnderline:!0,endAdornment:(0,d.jsx)(r.A,{position:"end",children:S}),className:"!text-sm text-text-400 w-full ".concat(R?"h-[100px] resize-none !p-2":"h-12"," border border-text-400 rounded-[8px] p-2 focus:border-primary-main !outline-none invalid:border-error-primary ").concat(null!==j&&void 0!==j&&null!==(p=j.errors)&&void 0!==p&&p[f]&&null!==j&&void 0!==j&&null!==(m=j.touched)&&void 0!==m&&m[f]?"!border-error-primary":"")}):(0,d.jsx)(a(),{mask:N||"",maskChar:A||" ",value:D||(null===j||void 0===j||null===(t=j.values)||void 0===t?void 0:t[f]),type:b,dir:I.dir(),className:"w-full h-12 border border-text-400 rounded-[8px] p-2 text-sm focus:border-primary-main !outline-none invalid:border-error-primary ".concat(null!==j&&void 0!==j&&null!==(n=j.errors)&&void 0!==n&&n[f]&&null!==j&&void 0!==j&&null!==(s=j.touched)&&void 0!==s&&s[f]?"!border-error-primary":""),id:f,name:f,style:{direction:"tel"==b?"ltr":I.dir()},placeholder:y||"",readOnly:P,onChange:e=>{null===j||void 0===j||j.handleChange({target:{name:f,value:e.target.value}})}}),(null===j||void 0===j||null===(x=j.errors)||void 0===x?void 0:x[f])&&(null===j||void 0===j||null===(h=j.touched)||void 0===h?void 0:h[f])&&(0,d.jsx)("p",{className:"text-error-primary text-[10px] mt-1",children:null===j||void 0===j||null===(v=j.errors)||void 0===v?void 0:v[f]})]})}},5439:(e,t,n)=>{n.d(t,{A:()=>u});n(5043);var s=n(673),a=n(8734),o=n(2050),r=n(344),i=n(6227),l=n(378),d=n(6640),c=n(579);function u(e){var t,n,u;let{items:p,open:m,handleClose:x,anchorEl:h,profileInfo:v}=e;const f=JSON.parse(localStorage.getItem("nipa_user")||"");return(0,r.A)("(max-width:767px)")?(0,c.jsx)(i.A,{open:m,onClose:x,fullWidth:!0,children:"hello"}):(0,c.jsxs)(l.A,{id:"demo-positioned-menu","aria-labelledby":"demo-positioned-button",anchorEl:h,open:m,onClose:x,sx:{"& .MuiPaper-root":{width:v?"280px":"190px",border:"1px solid #e8e8e8",boxShadow:"none",borderRadius:"8px !important",marginTop:1}},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:[v&&(0,c.jsx)(s.A,{sx:{backgroundColor:"white !important",padding:"24px 25px",borderBottom:"1px solid #ededed","&:hover":{backgroundColor:"#fff !important"},"& span":{fontSize:"14px !important",color:"#000"},"& svg":{color:"#7f7f7f !important"}},children:(0,c.jsxs)("div",{className:"flex w-full gap-x-[10px] items-center justify-start",children:[(0,c.jsx)("div",{className:"bg-primary-main/40 border border-text-300 w-[53px] h-[53px] overflow-hidden rounded-full flex items-center justify-center",children:f.avatar?(0,c.jsx)("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSfm8UnQUb93iMa_J1a9GuKRJ1LWIzTD8dxrA&usqp=CAU",alt:"avatar",className:"w-full h-full fit-cover rounded-full"}):(0,c.jsx)("p",{className:"text-[20px] font-bold",children:null===(t=f.name)||void 0===t||null===(n=t.split(""))||void 0===n||null===(u=n[0])||void 0===u?void 0:u.toUpperCase()})}),(0,c.jsxs)("div",{children:[(0,c.jsxs)("p",{className:"text-text-800",children:[f.name," ",f.last_name]}),(0,c.jsx)("p",{className:"text-text-500 text-[14px] mt-1",children:d.Ay.toPersianDigits(f.mobile)})]})]})}),p.map(((e,t)=>(0,c.jsxs)(s.A,{disabled:e.disabled,sx:{padding:v?"12px 25px":"6px 16px","&:hover":{backgroundColor:"#e9edf3"},"& span":{fontSize:"14px !important",color:"#000"}},onClick:e.onClick,children:[(0,c.jsx)(o.A,{className:v?"svg:!text-text-700":"",children:e.icon}),(0,c.jsx)(a.A,{className:v?"text-text-700":"",children:e.text})]},t)))]})}},8955:(e,t,n)=>{n.d(t,{A:()=>d});n(5043);var s=n(2240),a=n(9600),o=n(4117),r=n(7578),i=n(1637),l=n(579);const d=e=>{let{open:t,onClose:n,title:d,handleConfirm:c,loading:u}=e;const{t:p}=(0,o.Bd)(["common","validations"]);return(0,l.jsxs)(s.A,{open:t,onClose:n,children:[(0,l.jsx)("div",{className:"w-14 h-14 mb-[10px] bg-primary-250 rounded-full items-center justify-center flex text-primary-main",children:(0,l.jsx)(a.A,{variant:"Bold"})}),(0,l.jsx)("div",{children:(0,l.jsx)("p",{className:"text-center text-[16px] font-semibold mb-[35px]",children:d})}),(0,l.jsxs)("div",{className:"flex items-center justify-between w-full max-w-[236px]",children:[(0,l.jsx)("div",{className:"w-[102px]",children:(0,l.jsx)(r.A,{disabled:u,text:u?(0,l.jsx)(i.A,{color:"inherit",size:24}):p("yes"),onClick:u?()=>{}:c})}),(0,l.jsx)("div",{className:"w-[102px]",children:(0,l.jsx)(r.A,{disabled:u,text:p("no"),onClick:u?()=>{}:n,bordered:!0})})]})]})}},2240:(e,t,n)=>{n.d(t,{A:()=>d});var s=n(4836),a=n(6227),o=n(1503),r=n(5043),i=n(579);const l=r.forwardRef((function(e,t){return(0,i.jsx)(s.A,{direction:"up",ref:t,...e})})),d=e=>{let{open:t,onClose:n,children:s}=e;return(0,i.jsx)(a.A,{open:t,TransitionComponent:l,keepMounted:!0,onClose:n,"aria-describedby":"alert-dialog-slide-description",sx:{"& .MuiDialog-paper":{width:"452px"}},children:(0,i.jsx)(o.A,{className:"flex items-center justify-center flex-col",children:s})})}},1968:(e,t,n)=>{n.d(t,{A:()=>d});var s=n(9218),a=n(5043),o=n(579);const r=e=>{let{children:t}=e;return(0,o.jsx)("div",{className:"h-[calc(100%-97px)] overflow-auto",children:t})},i=e=>{let{children:t}=e;return(0,o.jsx)("div",{children:t})},l=e=>{let{open:t,handleClose:n,children:l,headerIcon:d,headerText:c=""}=e;const[u,p]=(0,a.useState)(Math.floor(1e3*Math.random()));return(0,o.jsx)("div",{id:"dialog".concat(u),onClick:e=>{e.target.id==="dialog"+u&&(null===n||void 0===n||n())},className:"w-full h-full fixed bg-black-60 rtl:left-0 ltr:right-0 top-0 transition-all ".concat(t?"opacity-1 z-[999] delay-200":"pointer-events-none opacity-0 z-0 delay-300"),children:(0,o.jsxs)("div",{className:"h-full w-[60%] min-w-[900px] bg-white transition-all\t".concat(t?"translate-x-0 delay-300":"ltr:-translate-x-[100%] rtl:translate-x-[100%] delay-200"),children:[c&&(0,o.jsxs)("div",{className:"flex w-full px-8 py-6 items-center justify-between border-b border-text-300",children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("div",{className:"me-3 w-9 h-9 rounded-[12px] bg-primary-main flex items-center justify-center text-white",children:d}),(0,o.jsx)("p",{className:"text-[20px] leading-[20px] font-bold",children:c})]}),(0,o.jsx)("div",{className:"w-9 h-9",children:(0,o.jsx)("button",{onClick:n,className:"w-9 h-9",children:(0,o.jsx)(s.A,{className:"w-9 h-9"})})})]}),(0,o.jsx)("div",{className:"flex justify-between w-full flex-col h-[calc(100%-85px)]",children:a.Children.map(l,(e=>e.type===r?(0,o.jsx)(r,{children:e.props.children}):e.type===i?(0,o.jsx)(i,{children:e.props.children}):void 0))})]})})};l.Content=r,l.Footer=i;const d=l},6180:(e,t,n)=>{n.d(t,{A:()=>o});var s=n(8185),a=n(579);const o=()=>(0,a.jsxs)("div",{className:"grid",children:[(0,a.jsx)("div",{className:"w-full h-[71px] bg-text-200 border border-text-300 rounded-t-[4px] grid grid-cols-6 items-center justify-center px-4",children:Array.from(Array(5).keys()).map(((e,t)=>(0,a.jsx)(s.A,{variant:"rounded",width:"37px",height:18,animation:"wave"},t)))}),Array.from(Array(5).keys()).map(((e,t)=>(0,a.jsxs)("div",{className:"w-full h-[71px] border border-text-300 border-t-0 rounded-t-[4px] grid grid-cols-6 items-center justify-center px-4",children:[Array.from(Array(5).keys()).map(((e,t)=>(0,a.jsx)(s.A,{variant:"rounded",width:"45px",height:18,animation:"wave"},t))),(0,a.jsx)("div",{className:"w-[120px] flex items-cente justify-center",children:(0,a.jsx)("div",{className:"w-[92px] h-[38px] rounded-full border border-text-400 flex items-center justify-center",children:(0,a.jsx)(s.A,{variant:"rounded",width:"47px",height:14,animation:"wave"})})})]},t)))]})},7652:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(8786),a=n(4117),o=n(579);const r=e=>{let{columns:t,data:n}=e;const{i18n:r}=(0,a.Bd)();return(0,o.jsx)(s.Ay,{direction:"ltr"===r.dir()?s.OP.LTR:s.OP.RTL,columns:t,data:n,className:"customTable",conditionalRowStyles:[{when:e=>"footer"===e.id,style:{backgroundColor:"rgba(247, 247, 247, 1)",borderTop:"2px solid #EDEDED","&:hover":{cursor:"pointer"}}}]})}},2314:(e,t,n)=>{n.d(t,{A:()=>d});var s=n(1237),a=n(5043),o=n(579);const r=e=>{let{text:t,onClick:n,icon:s,after:a,ref:r,simple:i=!1}=e;const l=()=>s?(0,o.jsx)("div",{className:"inline-block text-text-600",children:s}):(0,o.jsx)(o.Fragment,{});return(0,o.jsxs)("button",{ref:r,className:"".concat(i?"":"border border-text-400"," bg-transparent rounded-full text-text-900 w-full h-[38px] flex ltr:flex-row-reverse items-center justify-center hover:bg-text-4"),onClick:n,children:[!a&&l(),!i&&t,a&&l()]})};var i=n(5439),l=n(4117);const d=e=>{let{row:t,handleAction:n,items:d,simple:c=!1}=e;const u=(0,a.useRef)(null),{t:p}=(0,l.Bd)(),[m,x]=(0,a.useState)(!1);return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:"".concat(c?"w-[20px]":"w-[92px] pb-[5px]"),ref:u,children:[(0,o.jsx)(r,{after:!0,icon:(0,o.jsx)(s.A,{className:"rotate-90 pt-[5px]"}),text:p("action"),simple:c,onClick:()=>{console.log(t),x(!0)}}),(0,o.jsx)(i.A,{anchorEl:u.current,open:m,handleClose:()=>{x(!1)},items:d.map((e=>({...e,onClick:()=>((e,t)=>{x(!1),n&&n(e,t)})(t,e.name)})))})]})})}},8494:(e,t,n)=>{n.r(t),n.d(t,{default:()=>D});var s=n(208),a=n(9600),o=n(6421),r=n(5043),i=n(3232),l=n(7578),d=n(7652),c=n(2314),u=n(7311),p=n(4117),m=n(8955),x=n(5424),h=n(3216),v=n(6180),f=n(670);const g={rolesList:async function(){var e;let t=await(null===(e=(0,f.A)())||void 0===e?void 0:e.get("/roles"));return null===t||void 0===t?void 0:t.data},permissionsList:async function(){var e;let t=await(null===(e=(0,f.A)())||void 0===e?void 0:e.get("/permissions"));return null===t||void 0===t?void 0:t.data},addRole:async function(e){var t;let{name:n,code:s,permissions:a}=e,o=await(null===(t=(0,f.A)())||void 0===t?void 0:t.post("/roles",{name:n,slug:s,permissions:a}));return null===o||void 0===o?void 0:o.data},deleteRole:async function(e){var t;let{roleId:n}=e,s=await(null===(t=(0,f.A)())||void 0===t?void 0:t.delete("/roles/"+n));return null===s||void 0===s?void 0:s.data},updateRole:async function(e){var t;let{name:n,code:s,permissions:a,id:o}=e,r=await(null===(t=(0,f.A)())||void 0===t?void 0:t.put("/roles/"+o,{name:n,slug:s,permissions:a}));return null===r||void 0===r?void 0:r.data}};const j=n(4298).A.actions,b=()=>async(e,t)=>{const n=await g.rolesList();e(j.rolesList(n))};var y=n(6640),A=n(1968),w=n(9973),N=n(3516),C=n(3033),k=n(7099),S=n(8366),R=n(579);const P=e=>{let{open:t,handleClose:n,permissions:s,selectedRole:a}=e;const{t:i}=(0,p.Bd)(["common","validations"]),d=(0,u.j)();console.log("sele",a);const[c,m]=(0,r.useState)(!1),h=C.Ik().shape({code:C.Yj().required(i("roleCode.required",{ns:"validations"})||""),name:C.Yj().required(i("roleName.required",{ns:"validations"})||"")}),v={code:(null===a||void 0===a?void 0:a.slug)||"",name:(null===a||void 0===a?void 0:a.name)||"",permissions:(null===a||void 0===a?void 0:a.permissions)||[]},f=(0,N.Wx)({initialValues:v,validationSchema:h,onSubmit:async e=>{console.log("valuekkkks",e),m(!0);try{a?await g.updateRole({...e,id:a.id}):await g.addRole(e),j(),d((0,k.Jm)(!1)),x.A.success(i("addRoleSuccess")),m(!1)}catch(t){m(!1)}}});(0,r.useEffect)((()=>{var e;a&&(f.setFieldValue("code",null===a||void 0===a?void 0:a.slug),f.setFieldValue("name",null===a||void 0===a?void 0:a.name),f.setFieldValue("permissions",null===a||void 0===a||null===(e=a.permissions)||void 0===e?void 0:e.map((e=>e.id))))}),[a]);const j=()=>{n&&n(),f.resetForm()},b=e=>{let t=[...f.values.permissions],n=t.indexOf(e.id);n>-1?(t.splice(n,1),e.childs&&e.childs.map((function(e){n=t.indexOf(e.id),n>-1&&t.splice(n,1)}))):(t.push(e.id),e.childs&&e.childs.map((function(e){n=t.indexOf(e.id),-1===n&&t.push(e.id)})),e.parent_id&&(n=t.indexOf(e.parent_id),-1===n&&t.push(e.parent_id))),f.setFieldValue("permissions",[...t])};return(0,R.jsxs)(A.A,{headerText:i(a?"editRole":"addRole"),headerIcon:(0,R.jsx)(o.A,{}),open:t,handleClose:j,children:[(0,R.jsx)(A.A.Content,{children:(0,R.jsxs)("div",{className:"p-7 font-bold text-[18px]",children:[(0,R.jsx)("p",{className:"text-start",children:i("enterProductDetail")}),(0,R.jsxs)("form",{onSubmit:f.handleSubmit,className:"w-full",children:[(0,R.jsxs)("div",{className:"mt-7 w-full grid grid-cols-2 gap-x-5 gap-y-7",children:[(0,R.jsx)(w.A,{name:"code",label:i("roleCode"),type:"text",placeholder:i("roleCode.placeholder",{ns:"validations"}),formik:f}),(0,R.jsx)(w.A,{name:"name",label:i("roleName"),type:"text",placeholder:i("roleName.placeholder",{ns:"validations"}),formik:f})]}),(0,R.jsxs)("div",{className:"mt-[35px]",children:[(0,R.jsx)("p",{className:"text-start text-[14px] text-text-900 font-normal mb-2",children:i("permissions")}),(0,R.jsx)("div",{className:"border px-[20px] py-[27px] border-text-400 rounded-[6px]",children:s?(0,R.jsx)("div",{className:"grid grid-cols-2",children:s.map(((e,t)=>(0,R.jsxs)("div",{children:[(0,R.jsx)(S.A,{className:"font-normal",name:"permissions",value:e.slug,label:e.name,checked:f.values.permissions.includes(e.id)||!1,handleCheck:()=>b(e)},t),e.childs&&(0,R.jsx)("div",{className:"ps-9",children:e.childs.map(((e,t)=>(0,R.jsx)(S.A,{className:"font-normal",name:"permissions",value:e.slug,label:e.name,checked:f.values.permissions.includes(e.id)||!1,handleCheck:()=>b(e)},t)))})]},t)))}):(0,R.jsx)(R.Fragment,{})})]})]})]})}),(0,R.jsx)(A.A.Footer,{children:(0,R.jsxs)("div",{className:"py-[24px] border-t border-text-300 px-7 flex justify-between",children:[(0,R.jsx)("div",{className:"w-[126px]",children:(0,R.jsx)(l.A,{disabled:c,text:"\u0627\u0646\u0635\u0631\u0627\u0641",onClick:j,gray:!0})}),(0,R.jsx)("div",{className:"w-[207px]",children:(0,R.jsx)(l.A,{disabled:c,icon:(0,R.jsx)(o.A,{}),text:i(a?"editRole":"addRole"),onClick:()=>{f.handleSubmit()}})})]})})]})},D=()=>{const e=(0,u.G)((e=>e.rolePermissions.roles)),[t,n]=(0,r.useState)([]),[f,A]=(0,r.useState)(!1),{t:w}=((0,h.Zp)(),(0,p.Bd)("common")),[N,C]=(0,r.useState)(null),[k,S]=(0,r.useState)(!1),[D,I]=(0,r.useState)(!1),T=(0,u.G)((e=>e.rolePermissions.permissions));(0,r.useEffect)((()=>{!T&&_((async(e,t)=>{const n=await g.permissionsList();e(j.permissionsList(n))}))}),[]);const _=(0,u.j)();(0,r.useEffect)((()=>{_(b())}),[]),(0,r.useEffect)((()=>{if(e){let e=[{name:w("title"),selector:e=>e.name,sortable:!0},{name:w("createDate"),selector:e=>y.Ay.toPersianDigits(y.Ay.renderChatTime(y.Ay.dateToTimestamp(e.created_at))),sortable:!0},{name:w("usersCount"),selector:e=>y.Ay.toPersianDigits(e.users_count),sortable:!0}];e.push({allowOverflow:!0,button:!0,width:"120px",cell:e=>(0,R.jsx)(c.A,{items:[{icon:(0,R.jsx)(s.A,{variant:"Bold"}),text:w("edit"),name:"edit",disabled:!1},{icon:(0,R.jsx)(a.A,{variant:"Bold"}),text:w("delete"),name:"delete",disabled:e.users_count>0}],handleAction:L,row:e})}),n([...e])}}),[e]);const L=(e,t)=>{switch(console.log("row",e),console.log("action",t),C(e),t){case"delete":A(!0);break;case"edit":I(!0)}};return(0,R.jsxs)("div",{className:"w-full h-full",children:[(0,R.jsx)(P,{open:D,handleClose:()=>{I(!1),_(b()),C(null)},selectedRole:N,permissions:T}),(0,R.jsx)(m.A,{title:w("deleteRoleConfirmation"),open:f,onClose:()=>{A(!1)},handleConfirm:async()=>{S(!0);try{await g.deleteRole({roleId:N.id}),S(!1),A(!1),_(b()),x.A.success(w("deleteProductSuccess"))}catch(e){S(!1),A(!1)}},loading:k}),(0,R.jsx)(i.A,{actions:(0,R.jsx)(R.Fragment,{children:(0,R.jsx)("div",{className:"w-[186px] ms-4",children:(0,R.jsx)(l.A,{icon:(0,R.jsx)(o.A,{}),text:w("addRole"),onClick:()=>I(!0)})})}),title:w("rolePermissions")}),(0,R.jsx)("div",{children:e?(0,R.jsx)(d.A,{columns:t,data:e||[]}):(0,R.jsx)(v.A,{})})]})}}}]);
//# sourceMappingURL=8494.849db1b8.chunk.js.map