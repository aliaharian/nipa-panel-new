(self.webpackChunknipa_panel_new=self.webpackChunknipa_panel_new||[]).push([[4129],{9722:function(e,t,n){"use strict";var r=n(4165),i=n(5861),o=n(516);function a(){return(a=(0,i.Z)((0,r.Z)().mark((function e(){var t,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=(0,o.Z)())||void 0===t?void 0:t.get("/order");case 2:return n=e.sent,e.abrupt("return",null===n||void 0===n?void 0:n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=(0,o.Z)())||void 0===n?void 0:n.get("/order/"+t);case 2:return i=e.sent,e.abrupt("return",null===i||void 0===i?void 0:i.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=(0,i.Z)((0,r.Z)().mark((function e(){var t,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=(0,o.Z)())||void 0===t?void 0:t.get("/orderGroup");case 2:return n=e.sent,e.abrupt("return",null===n||void 0===n?void 0:n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(){return(s=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=(0,o.Z)())||void 0===n?void 0:n.post("/orderGroup",{customer_code:t});case 2:return i=e.sent,e.abrupt("return",null===i||void 0===i?void 0:i.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(){return(c=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=(0,o.Z)())||void 0===n?void 0:n.post("/order",t);case 2:return i=e.sent,e.abrupt("return",null===i||void 0===i?void 0:i.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return(d=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=(0,o.Z)())||void 0===n?void 0:n.get("/order/"+t+"/complete");case 2:return i=e.sent,e.abrupt("return",null===i||void 0===i?void 0:i.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(i=(0,o.Z)())||void 0===i?void 0:i.get("/step/"+t+"/"+n+"/complete");case 2:return a=e.sent,e.abrupt("return",null===a||void 0===a?void 0:a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.Z={ordersList:function(){return a.apply(this,arguments)},createOrder:function(e){return c.apply(this,arguments)},createOrderGroup:function(e){return s.apply(this,arguments)},orderGroupsList:function(){return l.apply(this,arguments)},orderDetail:function(e){return u.apply(this,arguments)},getCompleteInfo:function(e){return d.apply(this,arguments)},getStepInfo:function(e,t){return p.apply(this,arguments)}}},9033:function(e,t,n){"use strict";n.r(t);var r=n(3433),i=n(1413),o=n(4165),a=n(5861),u=n(9439),l=n(2841),s=n(6718),c=n(7689),d=n(9230),p=n(2791),f=n(5705),v=n(9351),m=n(9722),h=n(5601),y=n(1724),Z=n(2636),x=n(184);t.default=function(){var e=(0,c.s0)(),t=(0,d.$G)().t,n=(0,c.UO)().orderId,b=(0,p.useState)(!1),w=(0,u.Z)(b,2),k=w[0],g=w[1],_=(0,p.useState)([]),O=(0,u.Z)(_,2),E=O[0],j=O[1],L=(0,p.useState)(),S=(0,u.Z)(L,2),T=S[0],C=S[1],I=(0,p.useState)(),M=(0,u.Z)(I,2),F=(M[0],M[1]),z=(0,p.useState)([]),B=(0,u.Z)(z,2),P=B[0],R=B[1],N=(0,p.useState)(),A=(0,u.Z)(N,2),D=A[0],W=A[1],H=(0,p.useState)(),G=(0,u.Z)(H,2),V=G[0],U=G[1],q=(0,f.TA)({initialValues:V,validationSchema:D,enableReinitialize:!0,onSubmit:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("done!",T),!n||!T){e.next=7;break}return g(!0),e.next=5,h.Z.addUserAnswer(parseInt(n),T.id,t);case 5:e.sent,g(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});(0,p.useEffect)((function(){U((0,v.YB)(E)),W(y.Ry().shape((0,v.YT)(E,P,q))),q.values&&(null===E||void 0===E||E.map((function(e){e.answer&&q.setFieldValue(e.name,e.answer)})))}),[E,q.values,P]),(0,p.useEffect)((function(){Y()}),[]);var Y=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){var t,a,u,l;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.Z.getCompleteInfo(Number(n));case 2:return a=e.sent,F(a),e.next=6,h.Z.getForm(null===a||void 0===a?void 0:a.form.id,n);case 6:u=e.sent,C(u),l=[],null===(t=u.fields)||void 0===t||t.map((function(e){var t,n,r,o={key:e.id,name:e.name,placeholder:e.placeholder,label:e.label,type:e.type.type,typeId:e.type.id,required:e.required,answer:e.userAnswer,id:e.id,fromRelatedFields:!(null===e||void 0===e||null===(t=e.form)||void 0===t||!t.id||(null===e||void 0===e||null===(n=e.form)||void 0===n?void 0:n.id)==(null===u||void 0===u?void 0:u.id))};("dropDown"!==e.type.type&&"checkbox"!==e.type.type||(o=e.basic_data_id?(0,i.Z)((0,i.Z)({},o),{},{basic_data:e.basic_data,basic_data_id:e.basic_data_id,basicDataItems:e.basicDataItems.map((function(e){return{key:e.id,id:e.id,label:(0,x.jsx)("p",{children:e.label}),server_id:e.id,value:e.option}})),answer:e.userAnswer}):(0,i.Z)((0,i.Z)({},o),{},{options:e.options.map((function(t){return{id:t.id,key:t.id,label:(0,x.jsx)("p",{children:t.label}),server_id:t.id,value:t.option,answer:e.userAnswer}}))})),"uploadFile"===e.type.type)&&(o=(0,i.Z)((0,i.Z)({},o),{},{onlyImage:null===(r=JSON.parse(e.validation))||void 0===r?void 0:r.onlyImage,setPending:g,noBadge:!0}));l.push((0,i.Z)({},o))})),R((0,r.Z)(u.conditions)),j([].concat(l));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,x.jsxs)("div",{className:"w-full h-full",children:[(0,x.jsx)(s.Z,{title:"\u062a\u06a9\u0645\u06cc\u0644 \u0633\u0641\u0627\u0631\u0634",handleBack:function(){return e("/orders")}}),(0,x.jsx)("div",{className:"w-full flex gap-x-[20px]",children:(0,x.jsx)("div",{className:"w-full bg-white border border-text-300 h-min rounded-[6px] px-[20px] py-[24px]",children:(0,x.jsxs)("form",{onSubmit:q.handleSubmit,children:[k&&(0,x.jsx)(l.Z,{}),(0,x.jsx)("div",{children:E&&q&&(null===q||void 0===q?void 0:q.values)&&Object.keys(null===q||void 0===q?void 0:q.values).length>0&&E.map((function(e,t){var n=P.find((function(t){return t.relational_form_field_id==e.id})),r=!0;if(n){var i,o,a,u,l,s=E.find((function(e){return e.id==n.form_field_id}));if(s)if(s.basic_data_id)i=null===s||void 0===s||null===(o=s.basicDataItems)||void 0===o?void 0:o.find((function(e){return e.server_id==n.form_field_option_id}));else i=null===s||void 0===s||null===(a=s.options)||void 0===a?void 0:a.find((function(e){return e.server_id==n.form_field_option_id}));if(s&&i)if(1==n.operation)r=q.values[s.name]===i.value||(null===(u=q.values[s.name])||void 0===u?void 0:u.indexOf(i.value))>-1;else r=!(q.values[s.name]===i.value||(null===(l=q.values[s.name])||void 0===l?void 0:l.indexOf(i.value))>-1)}return r?(0,x.jsx)("div",{className:"mt-[30px]",children:(0,v.lw)(e,(function(){}),q)},t):(0,x.jsx)(x.Fragment,{})}))}),(0,x.jsx)("div",{className:"mt-[32px]",children:(0,x.jsx)(Z.Z,{after:!0,onClick:function(){console.log("formi",q.values)},text:t("submitForm2")})})]})})})]})}},9145:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(7573),i=n(2791),o=n(2007),a=n.n(o),u=["variant","color","size"],l=function(e){var t=e.color;return i.createElement(i.Fragment,null,i.createElement("path",{fill:t,d:"M16.19 2H7.81C4.17 2 2 4.17 2 7.81v8.37C2 19.83 4.17 22 7.81 22h8.37c3.64 0 5.81-2.17 5.81-5.81V7.81C22 4.17 19.83 2 16.19 2zm2.34 10.53l-4.29 4.29c-.15.15-.34.22-.53.22s-.38-.07-.53-.22a.754.754 0 010-1.06l3.01-3.01H6c-.41 0-.75-.34-.75-.75s.34-.75.75-.75h10.19l-3.01-3.01a.754.754 0 010-1.06c.29-.29.77-.29 1.06 0l4.29 4.29a.75.75 0 010 1.06z"}))},s=function(e){var t=e.color;return i.createElement(i.Fragment,null,i.createElement("path",{stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"1.5",d:"M14.43 5.93L20.5 12l-6.07 6.07M11.01 12h9.32M3.5 12h3.47"}))},c=function(e){var t=e.color;return i.createElement(i.Fragment,null,i.createElement("path",{fill:t,d:"M16.19 2H7.81C4.17 2 2 4.17 2 7.81v8.37C2 19.83 4.17 22 7.81 22h8.37c3.64 0 5.81-2.17 5.81-5.81V7.81C22 4.17 19.83 2 16.19 2z",opacity:".4"}),i.createElement("path",{fill:t,d:"M18.53 11.47l-4.29-4.29a.754.754 0 00-1.06 0c-.29.29-.29.77 0 1.06l3.01 3.01H6c-.41 0-.75.34-.75.75s.34.75.75.75h10.19l-3.01 3.01c-.29.29-.29.77 0 1.06.15.15.34.22.53.22s.38-.07.53-.22l4.29-4.29a.75.75 0 000-1.06z"}))},d=function(e){var t=e.color;return i.createElement(i.Fragment,null,i.createElement("path",{stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"1.5",d:"M14.43 5.93L20.5 12l-6.07 6.07M3.5 12h16.83"}))},p=function(e){var t=e.color;return i.createElement(i.Fragment,null,i.createElement("path",{fill:t,d:"M14.43 18.82c-.19 0-.38-.07-.53-.22a.754.754 0 010-1.06L19.44 12 13.9 6.46a.754.754 0 010-1.06c.29-.29.77-.29 1.06 0l6.07 6.07c.29.29.29.77 0 1.06l-6.07 6.07c-.15.15-.34.22-.53.22z"}),i.createElement("path",{fill:t,d:"M20.33 12.75H3.5c-.41 0-.75-.34-.75-.75s.34-.75.75-.75h16.83c.41 0 .75.34.75.75s-.34.75-.75.75z"}))},f=function(e){var t=e.color;return i.createElement(i.Fragment,null,i.createElement("path",{stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"1.5",d:"M14.43 5.93L20.5 12l-6.07 6.07"}),i.createElement("path",{stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"1.5",d:"M3.5 12h16.83",opacity:".4"}))},v=(0,i.forwardRef)((function(e,t){var n=e.variant,o=e.color,a=e.size,v=(0,r._)(e,u);return i.createElement("svg",(0,r.a)({},v,{xmlns:"http://www.w3.org/2000/svg",ref:t,width:a,height:a,viewBox:"0 0 24 24",fill:"none"}),function(e,t){switch(e){case"Bold":return i.createElement(l,{color:t});case"Broken":return i.createElement(s,{color:t});case"Bulk":return i.createElement(c,{color:t});case"Linear":default:return i.createElement(d,{color:t});case"Outline":return i.createElement(p,{color:t});case"TwoTone":return i.createElement(f,{color:t})}}(n,o))}));v.propTypes={variant:a().oneOf(["Linear","Bold","Broken","Bulk","Outline","TwoTone"]),color:a().string,size:a().oneOfType([a().string,a().number])},v.defaultProps={variant:"Linear",color:"currentColor",size:"24"},v.displayName="ArrowRight"},7573:function(e,t,n){"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}function i(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}n.d(t,{_:function(){return i},a:function(){return r}})},888:function(e,t,n){"use strict";var r=n(9047);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},2007:function(e,t,n){e.exports=n(888)()},9047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}}]);
//# sourceMappingURL=4129.d4185865.chunk.js.map