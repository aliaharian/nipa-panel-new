"use strict";(self.webpackChunknipa_panel_new=self.webpackChunknipa_panel_new||[]).push([[8287],{2737:function(n,t,e){e.d(t,{C:function(){return o},T:function(){return u}});var r=e(9434),u=function(){return(0,r.I0)()},o=r.v9},9722:function(n,t,e){var r=e(4165),u=e(5861),o=e(516);function i(){return(i=(0,u.Z)((0,r.Z)().mark((function n(){var t,e;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null===(t=(0,o.Z)())||void 0===t?void 0:t.get("/order");case 2:return e=n.sent,n.abrupt("return",null===e||void 0===e?void 0:e.data);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function a(){return(a=(0,u.Z)((0,r.Z)().mark((function n(t){var e,u;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null===(e=(0,o.Z)())||void 0===e?void 0:e.get("/order/"+t);case 2:return u=n.sent,n.abrupt("return",null===u||void 0===u?void 0:u.data);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function c(){return(c=(0,u.Z)((0,r.Z)().mark((function n(){var t,e;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null===(t=(0,o.Z)())||void 0===t?void 0:t.get("/orderGroup");case 2:return e=n.sent,n.abrupt("return",null===e||void 0===e?void 0:e.data);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function s(){return(s=(0,u.Z)((0,r.Z)().mark((function n(t){var e,u;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null===(e=(0,o.Z)())||void 0===e?void 0:e.post("/orderGroup",{customer_code:t});case 2:return u=n.sent,n.abrupt("return",null===u||void 0===u?void 0:u.data);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function d(){return(d=(0,u.Z)((0,r.Z)().mark((function n(t){var e,u;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null===(e=(0,o.Z)())||void 0===e?void 0:e.post("/order",t);case 2:return u=n.sent,n.abrupt("return",null===u||void 0===u?void 0:u.data);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function l(){return(l=(0,u.Z)((0,r.Z)().mark((function n(t){var e,u;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null===(e=(0,o.Z)())||void 0===e?void 0:e.get("/order/"+t+"/complete");case 2:return u=n.sent,n.abrupt("return",null===u||void 0===u?void 0:u.data);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function p(){return(p=(0,u.Z)((0,r.Z)().mark((function n(t,e){var u,i;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null===(u=(0,o.Z)())||void 0===u?void 0:u.get("/step/"+t+"/"+e+"/complete");case 2:return i=n.sent,n.abrupt("return",null===i||void 0===i?void 0:i.data);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}t.Z={ordersList:function(){return i.apply(this,arguments)},createOrder:function(n){return d.apply(this,arguments)},createOrderGroup:function(n){return s.apply(this,arguments)},orderGroupsList:function(){return c.apply(this,arguments)},orderDetail:function(n){return a.apply(this,arguments)},getCompleteInfo:function(n){return l.apply(this,arguments)},getStepInfo:function(n,t){return p.apply(this,arguments)}}},5138:function(n,t,e){e.d(t,{BU:function(){return a},Ir:function(){return f},ZU:function(){return c},bJ:function(){return s},gg:function(){return d},l$:function(){return v},nM:function(){return l},zm:function(){return p}});var r=e(4165),u=e(5861),o=e(685),i=e(5359).Z.actions,a=function(){return function(){var n=(0,u.Z)((0,r.Z)().mark((function n(t,e){var u;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.Z.productsList();case 2:u=n.sent,t(i.productsList(u));case 4:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}()},c=function(n){return function(){var t=(0,u.Z)((0,r.Z)().mark((function t(e,u){var a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.Z.productStepsList(n);case 2:a=t.sent,e(i.productStepsList(a));case 4:case"end":return t.stop()}}),t)})));return function(n,e){return t.apply(this,arguments)}}()},s=function(n){return function(){var t=(0,u.Z)((0,r.Z)().mark((function t(e,u){var a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==n){t.next=2;break}return t.abrupt("return",e(i.productStepInfo(null)));case 2:return t.next=4,o.Z.productStepInfo(n);case 4:a=t.sent,e(i.productStepInfo(a));case 6:case"end":return t.stop()}}),t)})));return function(n,e){return t.apply(this,arguments)}}()},d=function(n){return function(){var t=(0,u.Z)((0,r.Z)().mark((function t(e,u){var a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.Z.saveProduct(n);case 2:a=t.sent,e(i.saveProduct(a));case 4:case"end":return t.stop()}}),t)})));return function(n,e){return t.apply(this,arguments)}}()},l=function(n,t){return function(){var e=(0,u.Z)((0,r.Z)().mark((function e(u,c){var s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.updateProduct(n,t);case 2:s=e.sent,u(i.updateProduct(s)),u(a());case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},p=function(n){return function(){var t=(0,u.Z)((0,r.Z)().mark((function t(e,u){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(i.setSaveSuccess(n));case 1:case"end":return t.stop()}}),t)})));return function(n,e){return t.apply(this,arguments)}}()},f=function(n){return function(){var t=(0,u.Z)((0,r.Z)().mark((function t(e,u){var a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.Z.deleteProduct(n);case 2:a=t.sent,e(i.deleteProduct(a));case 4:case"end":return t.stop()}}),t)})));return function(n,e){return t.apply(this,arguments)}}()},v=function(n){return function(){var t=(0,u.Z)((0,r.Z)().mark((function t(e,u){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(i.setDeleteSuccess(n));case 1:case"end":return t.stop()}}),t)})));return function(n,e){return t.apply(this,arguments)}}()}},685:function(n,t,e){var r=e(4165),u=e(5861),o=e(516);function i(){return(i=(0,u.Z)((0,r.Z)().mark((function n(){var t,e;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null===(t=(0,o.Z)())||void 0===t?void 0:t.get("/products");case 2:return e=n.sent,n.abrupt("return",null===e||void 0===e?void 0:e.data);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function a(){return(a=(0,u.Z)((0,r.Z)().mark((function n(t){var e,u;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null===(e=(0,o.Z)())||void 0===e?void 0:e.get("/product/".concat(t,"/steps"));case 2:return u=n.sent,n.abrupt("return",null===u||void 0===u?void 0:u.data);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function c(){return(c=(0,u.Z)((0,r.Z)().mark((function n(t){var e,u;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null===(e=(0,o.Z)())||void 0===e?void 0:e.get("/productSteps/".concat(t));case 2:return u=n.sent,n.abrupt("return",null===u||void 0===u?void 0:u.data);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function s(){return(s=(0,u.Z)((0,r.Z)().mark((function n(t,e){var u,i;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null===(u=(0,o.Z)())||void 0===u?void 0:u.post("/product/steps/".concat(t,"/setRoles"),{roles:e.join(",")});case 2:return i=n.sent,n.abrupt("return",null===i||void 0===i?void 0:i.data);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function d(){return(d=(0,u.Z)((0,r.Z)().mark((function n(t){var e,u,i;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null===(e=(0,o.Z)())||void 0===e?void 0:e.post("/products",{name:t.name,code:t.code,custom:t.custom,price:t.price,count_type:t.count_type,status:t.status,description:t.description,images:null===(u=t.images)||void 0===u?void 0:u.map((function(n){return n.hashCode}))});case 2:return i=n.sent,n.abrupt("return",null===i||void 0===i?void 0:i.data);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function l(){return(l=(0,u.Z)((0,r.Z)().mark((function n(t,e){var u,i,a;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null===(u=(0,o.Z)())||void 0===u?void 0:u.put("/products/".concat(t),{name:e.name,code:e.code,custom:e.custom,count_type:e.count_type,price:e.price,status:e.status,description:e.description,images:null===(i=e.images)||void 0===i?void 0:i.map((function(n){return n.hashCode}))});case 2:return a=n.sent,n.abrupt("return",null===a||void 0===a?void 0:a.data);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function p(){return(p=(0,u.Z)((0,r.Z)().mark((function n(t){var e,u;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null===(e=(0,o.Z)())||void 0===e?void 0:e.delete("/products/".concat(t));case 2:return u=n.sent,n.abrupt("return",null===u||void 0===u?void 0:u.data);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function f(){return(f=(0,u.Z)((0,r.Z)().mark((function n(t){var e,u;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null===(e=(0,o.Z)())||void 0===e?void 0:e.get("/products/".concat(t));case 2:return u=n.sent,n.abrupt("return",null===u||void 0===u?void 0:u.data);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function v(){return(v=(0,u.Z)((0,r.Z)().mark((function n(t){var e,u;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null===(e=(0,o.Z)())||void 0===e?void 0:e.post("/product/steps/conditions",{step_id:t.stepId,field_id:t.fieldId,option_id:t.optionId,next_step_id:t.nextStepId});case 2:return u=n.sent,n.abrupt("return",null===u||void 0===u?void 0:u.data);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}t.Z={productsList:function(){return i.apply(this,arguments)},saveProduct:function(n){return d.apply(this,arguments)},deleteProduct:function(n){return p.apply(this,arguments)},productStepsList:function(n){return a.apply(this,arguments)},productStepInfo:function(n){return c.apply(this,arguments)},setProductStepRoles:function(n,t){return s.apply(this,arguments)},addProductConditions:function(n){return v.apply(this,arguments)},getProduct:function(n){return f.apply(this,arguments)},updateProduct:function(n,t){return l.apply(this,arguments)}}},7490:function(n,t,e){e.d(t,{KR:function(){return Z},Sd:function(){return m},bG:function(){return x},kS:function(){return h},fY:function(){return v},cp:function(){return f}});var r=e(4165),u=e(5861),o=e(516);function i(){return(i=(0,u.Z)((0,r.Z)().mark((function n(t){var e,u;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null===(e=(0,o.Z)())||void 0===e?void 0:e.post("/sendOtp",{mobile:t.mobile});case 2:return u=n.sent,n.abrupt("return",null===u||void 0===u?void 0:u.data);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function a(){return(a=(0,u.Z)((0,r.Z)().mark((function n(t){var e,u;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("cscscsc",t),n.next=3,null===(e=(0,o.Z)())||void 0===e?void 0:e.post("/confirmOtp",{mobile:t.mobile,otp:t.otp});case 3:return u=n.sent,n.abrupt("return",null===u||void 0===u?void 0:u.data);case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function c(){return(c=(0,u.Z)((0,r.Z)().mark((function n(){var t,e;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null===(t=(0,o.Z)())||void 0===t?void 0:t.get("/roles");case 2:return e=n.sent,n.abrupt("return",null===e||void 0===e?void 0:e.data);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function s(){return(s=(0,u.Z)((0,r.Z)().mark((function n(){var t,e;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null===(t=(0,o.Z)())||void 0===t?void 0:t.get("/profile");case 2:return e=n.sent,n.abrupt("return",null===e||void 0===e?void 0:e.data);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function d(){return(d=(0,u.Z)((0,r.Z)().mark((function n(){var t,e;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null===(t=(0,o.Z)())||void 0===t?void 0:t.get("/customers");case 2:return e=n.sent,n.abrupt("return",null===e||void 0===e?void 0:e.data);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var l={sendOtp:function(n){return i.apply(this,arguments)},confirmOtp:function(n){return a.apply(this,arguments)},getRolesList:function(){return c.apply(this,arguments)},getUserInfo:function(){return s.apply(this,arguments)},getCustomersList:function(){return d.apply(this,arguments)}},p=e(5797).Z.actions,f=function(n){return function(){var t=(0,u.Z)((0,r.Z)().mark((function t(e,u){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(p.setUserMobile(n));case 1:case"end":return t.stop()}}),t)})));return function(n,e){return t.apply(this,arguments)}}()},v=function(n){return function(){var t=(0,u.Z)((0,r.Z)().mark((function t(e,u){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(p.setUserLogin(n));case 1:case"end":return t.stop()}}),t)})));return function(n,e){return t.apply(this,arguments)}}()},m=function(){return function(){var n=(0,u.Z)((0,r.Z)().mark((function n(t,e){var u;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.getRolesList();case 2:u=n.sent,console.log(u),t(p.getRolesList(u));case 5:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}()},Z=function(){return function(){var n=(0,u.Z)((0,r.Z)().mark((function n(t,e){var u;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.getCustomersList();case 2:u=n.sent,t(p.getCustomersList(u.customers));case 4:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}()},x=function(){return function(){var n=(0,u.Z)((0,r.Z)().mark((function n(t,e){var u;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.getUserInfo();case 2:u=n.sent,console.log(u),t(p.getUserInfo(u));case 5:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}()},h=function(){return function(){var n=(0,u.Z)((0,r.Z)().mark((function n(t,e){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t(p.logout());case 1:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}()}},8287:function(n,t,e){e.r(t),e.d(t,{default:function(){return G}});var r=e(4165),u=e(5861),o=e(1413),i=e(3433),a=e(9439),c=e(6718),s=e(7689),d=e(2791),l=e(9230),p=e(745),f=e(184),v=function(n){var t=n.products,e=n.handleSelectProduct,r=(0,l.$G)().t;return(0,f.jsx)("div",{children:(0,f.jsx)(p.Z,{className:"group",name:"products",label:r("selectedProduct"),options:null===t||void 0===t?void 0:t.map((function(n){return{label:(0,f.jsx)("p",{children:n.name}),value:n.id||0}})),placeholder:r("pleaseSelectProduct"),formik:{handleChange:function(n){e(n.target.value)}}})})},m=e(2737),Z=e(5138),x=e(5601),h=e(9351),w=e(2636),y=e(4370),b=e(9145),g=e(8116),k=e(5705),j=e(1724),_=e(2841),S=function(n){var t=n.selectedOrder,e=n.products,c=n.handleClearOrder,s=n.handleSaveOrder,v=(0,l.$G)().t,m=(0,d.useState)(),Z=(0,a.Z)(m,2),S=(Z[0],Z[1]),I=(0,d.useState)([]),N=(0,a.Z)(I,2),P=N[0],C=N[1],O=(0,d.useState)([]),L=(0,a.Z)(O,2),F=L[0],D=L[1],G=(0,d.useState)(!1),R=(0,a.Z)(G,2),T=(R[0],R[1],(0,d.useState)(!1)),U=(0,a.Z)(T,2),E=U[0],M=U[1],$=(0,d.useState)(!1),B=(0,a.Z)($,2),q=B[0],J=B[1],Y=e.find((function(n){return n.id===t.product_id}));(0,d.useEffect)((function(){en()}),[]);var z=(0,d.useState)(),A=(0,a.Z)(z,2),K=A[0],V=A[1],H=(0,d.useState)(),Q=(0,a.Z)(H,2),W=Q[0],X=Q[1],nn=(0,k.TA)({initialValues:W,validationSchema:K,enableReinitialize:!0,onSubmit:function(){var n=(0,u.Z)((0,r.Z)().mark((function n(t){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:console.log("ok",t),Y&&s(Y,t,q);case 2:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()});(0,d.useEffect)((function(){X((0,h.YB)(P)),V(j.Ry().shape((0,h.YT)(P,F,nn)))}),[P,nn.values,F]);var tn=function(n){J(n),nn.handleSubmit(nn.values)},en=function(){var n=(0,u.Z)((0,r.Z)().mark((function n(){var t,e,u;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null===Y||void 0===Y||!Y.initialFormId){n.next=9;break}return n.next=3,x.Z.getForm(null===Y||void 0===Y?void 0:Y.initialFormId);case 3:e=n.sent,S(e),u=[],null===(t=e.fields)||void 0===t||t.map((function(n){var t,r,i,a={key:n.id,name:n.name,placeholder:n.placeholder,label:n.label,type:n.type.type,typeId:n.type.id,required:n.required,id:n.id,fromRelatedFields:!(null===n||void 0===n||null===(t=n.form)||void 0===t||!t.id||(null===n||void 0===n||null===(r=n.form)||void 0===r?void 0:r.id)==(null===e||void 0===e?void 0:e.id))};("dropDown"!==n.type.type&&"checkbox"!==n.type.type||(a=n.basic_data_id?(0,o.Z)((0,o.Z)({},a),{},{basic_data:n.basic_data,basic_data_id:n.basic_data_id,basicDataItems:n.basicDataItems.map((function(n){return{key:n.id,id:n.id,label:(0,f.jsx)("p",{children:n.label}),server_id:n.id,value:n.option}}))}):(0,o.Z)((0,o.Z)({},a),{},{options:n.options.map((function(n){return{id:n.id,key:n.id,label:(0,f.jsx)("p",{children:n.label}),server_id:n.id,value:n.option}}))})),"uploadFile"===n.type.type)&&(a=(0,o.Z)((0,o.Z)({},a),{},{onlyImage:null===(i=JSON.parse(n.validation))||void 0===i?void 0:i.onlyImage,setPending:M,noBadge:!0}));u.push((0,o.Z)({},a))})),D((0,i.Z)(e.conditions)),C([].concat(u));case 9:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return console.log("formik",nn.errors),(0,f.jsxs)("form",{onSubmit:nn.handleSubmit,children:[E&&(0,f.jsx)(_.Z,{}),(0,f.jsxs)("div",{children:[(0,f.jsx)(p.Z,{className:"group",name:"product",label:v("selectedProduct"),options:null===e||void 0===e?void 0:e.map((function(n,t){return{label:(0,f.jsx)("p",{children:n.name}),value:n.id||0,key:n.id||t}})),placeholder:v("pleaseSelectProduct"),disabled:!0,formik:{values:{product:t.product_id},handleChange:function(n){}}}),(0,f.jsx)("div",{children:P&&nn&&(null===nn||void 0===nn?void 0:nn.values)&&Object.keys(null===nn||void 0===nn?void 0:nn.values).length>0&&P.map((function(n,t){var e=F.find((function(t){return t.relational_form_field_id==n.id})),r=!0;if(e){var u,o,i,a,c,s=P.find((function(n){return n.id==e.form_field_id}));if(s)if(s.basic_data_id)u=null===s||void 0===s||null===(o=s.basicDataItems)||void 0===o?void 0:o.find((function(n){return n.server_id==e.form_field_option_id}));else u=null===s||void 0===s||null===(i=s.options)||void 0===i?void 0:i.find((function(n){return n.server_id==e.form_field_option_id}));if(s&&u)if(1==e.operation)r=nn.values[s.name]===u.value||(null===(a=nn.values[s.name])||void 0===a?void 0:a.indexOf(u.value))>-1;else r=!(nn.values[s.name]===u.value||(null===(c=nn.values[s.name])||void 0===c?void 0:c.indexOf(u.value))>-1)}return r?(0,f.jsx)("div",{className:"mt-[30px]",children:(0,h.lw)(n,(function(){}),nn)},t):(0,f.jsx)(f.Fragment,{})}))}),(0,f.jsx)("div",{className:"mt-[30px] mb-[50px]",children:(0,f.jsx)(w.Z,{icon:(0,f.jsx)(y.Z,{}),onClick:function(){tn(!0)},bordered:!0,text:v("addProductToOrder")})}),(0,f.jsxs)("div",{className:"w-full flex items-center justify-between",children:[(0,f.jsx)("div",{className:"w-[227px]",children:(0,f.jsx)(w.Z,{icon:(0,f.jsx)(b.Z,{className:"me-2"}),onClick:c,gray:!0,text:v("backToPrevStep")})}),(0,f.jsx)("div",{className:"w-[202px]",children:(0,f.jsx)(w.Z,{icon:(0,f.jsx)(g.Z,{className:"ms-2"}),after:!0,onClick:function(){return tn(!1)},text:v("saveAndContinue")})})]})]})]})},I=e(1193),N=e(6151),P=e(7139),C=e(1742),O=function(n){var t=n.item,e=n.handleIncrease,r=n.handleDecrease,u=(0,l.$G)().t;return(0,f.jsxs)("div",{className:"flex border border-text-400 px-[14px] py-[7px] rounded-[8px] items-center justify-between mt-2",children:[(0,f.jsx)("div",{children:(0,f.jsx)("p",{className:"text-[14px] text-text-500",children:u("productName")})}),(0,f.jsx)("div",{children:(0,f.jsx)("p",{children:t.product_name})}),(0,f.jsxs)("div",{className:"bg-text-200 p-2 rounded-[8px] flex items-center justify-between w-[97px]",children:[(0,f.jsx)(N.Z,{className:"!w-6 !max-w-[24px] !min-w-[24px] !p-[2px] h-6",onClick:e,children:(0,f.jsx)(y.Z,{className:"text-primary-main"})}),(0,f.jsx)("p",{className:"pointer-events-none select-none text-[16px] text-primary-main",children:I.ZP.toPersianDigits(t.count)}),(0,f.jsx)(N.Z,{className:"!w-6 !max-w-[24px] !min-w-[24px] !p-[2px] h-6",onClick:r,children:1==t.count?(0,f.jsx)(P.Z,{className:"text-error-primary"}):(0,f.jsx)(C.Z,{className:"text-primary-main"})})]})]})},L=e(7490),F=function(n){var t=n.orders,e=n.handleEditOrder,r=n.handleSubmitForm;console.log("orders",t);var u=(0,l.$G)().t,i=(0,d.useState)(0),c=(0,a.Z)(i,2),s=c[0],v=c[1],Z=(0,m.C)((function(n){return n.users.customers})),x=(0,m.T)(),h=(0,d.useState)(),y=(0,a.Z)(h,2),b=y[0],g=y[1];(0,d.useEffect)((function(){!Z&&I.ZP.checkPermission("add-order-as-another")&&x((0,L.KR)())}),[]),(0,d.useEffect)((function(){var n=0;null===t||void 0===t||t.map((function(t){n+=t.count})),v(n)}),[t]);return(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{children:I.ZP.checkPermission("add-order-as-another")&&(0,f.jsx)("div",{className:"flex rounded-[8px] items-center justify-between mb-5",children:(0,f.jsx)(p.Z,{className:"group",name:"customers",label:u("customer"),options:null===Z||void 0===Z?void 0:Z.map((function(n){return{label:(0,f.jsx)("p",{children:"".concat(n.code," - ").concat(n.user.name?n.user.name+" "+n.user.last_name:n.user.mobile)}),value:n.code}})),placeholder:u("pleaseSelectCustomer"),formik:{handleChange:function(n){g(n.target.value)}}})})}),(0,f.jsxs)("div",{className:"flex items-center justify-between text-primary-main font-bold mb-[29px]",children:[(0,f.jsx)("p",{children:u("productsOfThisOrder")}),(0,f.jsxs)("p",{children:[I.ZP.toPersianDigits(s)," ",u("product")]})]}),t.map((function(n,t){return(0,f.jsx)(O,{item:n,handleIncrease:function(){return function(n){e((0,o.Z)((0,o.Z)({},n),{},{count:n.count+1}))}(n)},handleDecrease:function(){return function(n){e((0,o.Z)((0,o.Z)({},n),{},{count:n.count>0?n.count-1:0}))}(n)}},t)})),(0,f.jsx)("div",{className:"mt-[32px]",children:(0,f.jsx)(w.Z,{after:!0,onClick:function(){return r(b)},text:u("submitForm")})})]})},D=e(9722),G=function(){var n=(0,s.s0)(),t=(0,l.$G)().t,e=(0,d.useState)(!1),p=(0,a.Z)(e,2),x=p[0],h=p[1],w=JSON.parse(localStorage.getItem("nipa_user")||""),y=(0,d.useState)([]),b=(0,a.Z)(y,2),g=b[0],k=b[1],j=(0,d.useState)(),I=(0,a.Z)(j,2),N=I[0],P=I[1],C=(0,m.C)((function(n){return n.products.products})),O=(0,m.T)();(0,d.useEffect)((function(){O((0,Z.BU)())}),[]);var L=function(){var t=(0,u.Z)((0,r.Z)().mark((function t(e){var u,o,i,a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h(!0),o=e||(null===(u=w.customer)||void 0===u?void 0:u.code),console.log("all neede data",o,g),i={customer_code:o,orders:g.map((function(n){return{count:n.count,product_id:n.product_id,form_id:n.form_id||null,data:n.form_id?n.values:null}}))},console.log("requestObject",i),t.next=7,D.Z.createOrder(i);case 7:return a=t.sent,console.log("response",a),h(!1),t.next=12,n("/orders");case 12:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}();return(0,f.jsxs)("div",{className:"w-full h-full",children:[x&&(0,f.jsx)(_.Z,{}),(0,f.jsx)(c.Z,{title:t("createNewOrder"),handleBack:function(){return n("/orders")}}),(0,f.jsxs)("div",{className:"w-full flex gap-x-[20px]",children:[(0,f.jsx)("div",{className:"".concat(g.length>0?"w-[calc(100%-340px)]":"w-full"," bg-white border border-text-300 h-min rounded-[6px] px-[20px] py-[24px]"),children:null!==N&&void 0!==N&&N.product_id?(0,f.jsx)(S,{handleSaveOrder:function(n,t,e){var r={product_id:n.id,product_name:n.name,saved:!0,values:t,form_id:n.initialFormId,id:Math.floor(1e4*Math.random()),count:1,custom:0};k([].concat((0,i.Z)(g),[(0,o.Z)({},r)])),P(null)},products:null===C||void 0===C?void 0:C.filter((function(n){return(n.initialFormId||0===n.custom)&&1===n.status})),handleClearOrder:function(){P(null)},selectedOrder:N}):(0,f.jsx)(v,{products:null===C||void 0===C?void 0:C.filter((function(n){return(n.initialFormId||0===n.custom)&&1===n.status})),handleSelectProduct:function(n){var t=null===C||void 0===C?void 0:C.find((function(t){return t.id==n}));if(console.log("prod",t),0==(null===t||void 0===t?void 0:t.custom)){var e={product_id:n,product_name:t.name,saved:!0,values:null,form_id:null,custom:0,id:Math.floor(1e4*Math.random()),count:1};k([].concat((0,i.Z)(g),[(0,o.Z)({},e)])),P(null)}else P({product_id:n,saved:!1})}})}),g.length>0&&(0,f.jsx)("div",{className:"w-[320px] h-min bg-white border border-text-300 rounded-[6px] px-[16px] py-[18px]",children:(0,f.jsx)(F,{handleSubmitForm:L,orders:g,handleEditOrder:function(n){console.log("order",n);var t=g.findIndex((function(t){return t.id==n.id}));if(t>-1){var e=(0,i.Z)(g);n.count<=0?e.splice(t,1):e[t]=(0,o.Z)({},n),k((0,i.Z)(e))}}})})]})]})}}}]);
//# sourceMappingURL=8287.542af072.chunk.js.map