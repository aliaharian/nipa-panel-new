"use strict";(self.webpackChunknipa_panel_new=self.webpackChunknipa_panel_new||[]).push([[2388],{6612:function(e,t,n){var r=n(8854),a=n(184);t.Z=function(e){var t=e.title,n=e.subTitle,l=e.action;return(0,a.jsxs)("div",{className:"w-full flex flex-col items-center justify-center py-4",children:[(0,a.jsx)("div",{className:"svg:w-[40px] svg:h-[40px] mb-4 svg:text-text-500",children:(0,a.jsx)(r.Z,{})}),(0,a.jsx)("p",{className:"text-[14px] text-text-600 mb-4",children:t}),n&&(0,a.jsx)("p",{className:"text-[12px] text-text-600 mb-4",children:n}),l&&(0,a.jsx)("div",{className:"w-[130px]",children:l})]})}},2388:function(e,t,n){n.r(t),n.d(t,{default:function(){return W}});var r=n(9439),a=n(2634),l=n(747),o=n(4370),s=n(2791),i=n(6718),c=n(2636),u=n(1310),d=n(1594),m=n(9230),f=n(7689),p=n(9354),v=n(4247),x=n(1123),h=n(1193),Z=n(4280),j=n(4165),b=n(5861),g=n(3433),_=n(2038),w=n(9134),k=n(5705),E=n(4917),N=n(9174),S=n(3398),y=n(745),F=n(2737),C=n(516);function L(){return(L=(0,b.Z)((0,j.Z)().mark((function e(){var t,n,r;return(0,j.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=(0,C.Z)())||void 0===t?void 0:t.get("/factor/status");case 2:return r=e.sent,e.abrupt("return",null===r||void 0===r||null===(n=r.data)||void 0===n?void 0:n.statuses);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var T={getFactorStatuses:function(){return L.apply(this,arguments)}},P=n(6742).Z.actions,M=n(184),O=function(e){var t=e.open,n=e.handleClose,a=e.handleSubmit,l=(0,m.$G)("common").t,o=(0,s.useState)([]),i=(0,r.Z)(o,2),u=i[0],d=(i[1],(0,s.useState)([])),f=(0,r.Z)(d,2),p=f[0],v=f[1],x=(0,F.C)((function(e){return e.financial.factorStatuses})),Z=(0,F.T)(),C=(0,k.TA)({initialValues:{user:null,fromDate:null,toDate:null,status:null,type:"all",validity:"all",isOnline:"all"},onSubmit:function(e){var t,r,l,o={user_id:null!==(t=e.user)&&void 0!==t&&t.value?"all"===(null===(r=e.user)||void 0===r?void 0:r.value)?null:null===(l=e.user)||void 0===l?void 0:l.value:null,factor_status_id:e.status?"all"===e.status?null:e.status:null,date_from:e.fromDate?h.ZP.toISOLocal(e.fromDate):null,date_to:e.toDate?h.ZP.toISOLocal(e.toDate):null};a&&a(o),null===n||void 0===n||n()}});(0,s.useEffect)((function(){t&&!x&&Z(function(){var e=(0,b.Z)((0,j.Z)().mark((function e(t,n){var r;return(0,j.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getFactorStatuses();case 2:r=e.sent,t(P.getFactorStatuses(r));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}),[t]),(0,s.useEffect)((function(){v(x?[{value:"all",label:(0,M.jsx)("p",{children:"\u0647\u0645\u0647"})}].concat((0,g.Z)(null===x||void 0===x?void 0:x.map((function(e){return{value:e.id.toString(),label:(0,M.jsx)("p",{children:e.name})}})))):[{value:"all",label:(0,M.jsx)("p",{children:"\u0647\u0645\u0647"})}])}),[x]);var L=function(){var e=(0,b.Z)((0,j.Z)().mark((function e(t){var n;return(0,j.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.Z.getWalletsUsers(t);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",[{label:"\u0647\u0645\u0647",value:null}]);case 5:return e.abrupt("return",[{label:"\u0647\u0645\u0647",value:null}].concat((0,g.Z)(null===n||void 0===n?void 0:n.map((function(e){return{label:e.user.name?e.user.name+" "+e.user.last_name:e.user.mobile,value:e.id}})))));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,M.jsxs)(w.Z,{headerText:"\u0641\u06cc\u0644\u062a\u0631 \u06a9\u06cc\u0641 \u067e\u0648\u0644 \u0648 \u062a\u0631\u0627\u06a9\u0646\u0634 \u0647\u0627",headerIcon:(0,M.jsx)(_.Z,{}),open:t,handleClose:n,children:[(0,M.jsx)(w.Z.Content,{children:(0,M.jsx)("div",{className:"p-7 font-bold text-[18px]",children:(0,M.jsx)("form",{onSubmit:C.handleSubmit,className:"w-full",children:(0,M.jsxs)("div",{className:"mt-7 w-full grid grid-cols-2 gap-x-5 gap-y-7",children:[(0,M.jsx)(E.Z,{className:"group",name:"user",fetchList:L,label:"\u0646\u0627\u0645 \u0645\u0634\u062a\u0631\u06cc",options:(0,g.Z)(u),placeholder:"select one",formik:C}),(0,M.jsx)(y.Z,{className:"group",name:"status",label:"\u0648\u0636\u0639\u06cc\u062a",options:(0,g.Z)(p),placeholder:"\u0627\u0646\u062a\u062e\u0627\u0628 \u06a9\u0646\u06cc\u062f",formik:C}),(0,M.jsx)(S.Z,{label:"\u062a\u0627\u0631\u06cc\u062e \u0627\u0632",name:"fromDate",formik:C,placeholder:"\u0627\u0646\u062a\u062e\u0627\u0628 \u062a\u0627\u0631\u06cc\u062e"}),(0,M.jsx)(S.Z,{label:"\u062a\u0627\u0631\u06cc\u062e \u062a\u0627",name:"toDate",formik:C,placeholder:"\u0627\u0646\u062a\u062e\u0627\u0628 \u062a\u0627\u0631\u06cc\u062e"})]})})})}),(0,M.jsx)(w.Z.Footer,{children:(0,M.jsxs)("div",{className:"py-[24px] border-t border-text-300 px-7 flex justify-between",children:[(0,M.jsx)("div",{className:"w-[126px]",children:(0,M.jsx)(c.Z,{text:l("clearFilters"),onClick:function(){C.resetForm(),a&&a({user_id:null,transaction_status_id:null,is_valid:null,date_from:null,date_to:null,transaction_type:null,payment_method:null}),null===n||void 0===n||n()},gray:!0,className:"!text-error-primary"})}),(0,M.jsx)("div",{className:"w-[207px]",children:(0,M.jsx)(c.Z,{text:l("applyFilters"),onClick:function(){C.handleSubmit()}})})]})})]})},D=n(6612),B=n(7072),W=function(){var e,t,n=(0,s.useState)([]),j=(0,r.Z)(n,2),b=j[0],g=j[1],_=(0,f.s0)(),w=(0,m.$G)("common").t,k=(0,s.useState)(null),E=(0,r.Z)(k,2),N=(E[0],E[1]),S=(0,s.useState)(1),y=(0,r.Z)(S,2),F=y[0],C=y[1],L=(0,s.useState)({}),T=(0,r.Z)(L,2),P=T[0],W=T[1],z=(0,s.useState)(!1),A=(0,r.Z)(z,2),I=A[0],G=A[1],$=(0,B.qI)(F,P).data;(0,s.useEffect)((function(){if(null!==$&&void 0!==$&&$.factors){var e=[{name:w("factorNo"),selector:function(e){return e.code},sortable:!0}];null!==$&&void 0!==$&&$.accessAll&&e.push({name:w("customer"),selector:function(e){return e.customer_full_name},sortable:!0}),e.push({name:w("forWhat"),selector:function(e){return(0,M.jsx)(v.Z,{title:"".concat(w("forOrderNumber")," ").concat(e.order_group_id),children:(0,M.jsxs)(x.Z,{className:"!text-[13px]",children:[w("forOrderNumber")," ",e.order_group_id]})})},sortable:!0},{name:w("createdAt"),selector:function(e){return h.ZP.renderChatTime(h.ZP.dateToTimestamp(e.created_at),!1)},sortable:!0},{name:w("sumPrice"),selector:function(e){return e.total_price?h.ZP.toPersianDigitsPutCommas(e.total_price.toString())+" "+w("toman")+" ":w("notDetermined")},sortable:!0},{name:w("status"),selector:function(e){var t,n,r,a,l,o,s,i;return(0,M.jsx)(v.Z,{title:null!==(t=null===(n=e.last_status)||void 0===n?void 0:n.description)&&void 0!==t?t:null===(r=e.last_status)||void 0===r||null===(a=r.factor_status_enum)||void 0===a?void 0:a.name,children:(0,M.jsx)(x.Z,{noWrap:!0,className:"!text-[13px] p-2 rounded-[6px] ".concat(h.ZP.renderStatusStyle(null===(l=e.last_status)||void 0===l||null===(o=l.factor_status_enum)||void 0===o?void 0:o.description)),children:null===(s=e.last_status)||void 0===s||null===(i=s.factor_status_enum)||void 0===i?void 0:i.name})})},sortable:!0}),e.push({allowOverflow:!0,button:!0,width:"120px",cell:function(e){var t;return(h.ZP.checkPermission("can-view-all-invoices")||(null===(t=e.validity)||void 0===t?void 0:t.validity))&&(0,M.jsx)(d.Z,{items:[{icon:(0,M.jsx)(a.Z,{variant:"Bold"}),text:$.canEdit?w("editPreFactor"):w("viewFactor"),name:"edit"}].filter(Boolean),handleAction:q,row:e})}}),g([].concat(e))}}),[$]);var q=function(e,t){switch(N(e),t){case"delete":default:break;case"edit":_("/finance/"+e.code)}};return(0,M.jsxs)("div",{className:"w-full h-full",children:[(0,M.jsx)(O,{open:I,handleClose:function(){return G(!1)},handleSubmit:function(e){C(1),W(e)}}),(0,M.jsx)(i.Z,{actions:(null===$||void 0===$||null===(e=$.factors)||void 0===e?void 0:e.length)>0&&(0,M.jsx)(M.Fragment,{children:(0,M.jsx)("div",{className:"w-[153px] ms-4",children:(0,M.jsx)(c.Z,{icon:(0,M.jsx)(l.Z,{}),text:w("advancedFilter"),onClick:function(){G(!0)},simple:!0,className:"!bg-white !text-text-800"})})}),title:w("financial")}),(0,M.jsx)("div",{children:$?(null===$||void 0===$||null===(t=$.factors)||void 0===t?void 0:t.length)>0?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(u.Z,{columns:b,data:(null===$||void 0===$?void 0:$.factors)||[]}),(0,M.jsx)("div",{className:"mt-8",children:(0,M.jsx)(Z.Z,{total:$.pagination.total_pages,current:$.pagination.current_page,onChange:function(e){C(e)}})})]}):(0,M.jsx)(D.Z,{title:w("noFactorsFound"),subTitle:w("orderFirstOrder")||"",action:(0,M.jsx)(c.Z,{icon:(0,M.jsx)(o.Z,{}),text:w("submitOrder"),href:"/orders/create",sm:!0})}):(0,M.jsx)(p.Z,{})})]})}},8854:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(7573),a=n(2791),l=n(2007),o=n.n(l),s=["variant","color","size"],i=function(e){var t=e.color;return a.createElement(a.Fragment,null,a.createElement("path",{d:"M11.01 20.02a9.01 9.01 0 1 0 0-18.02 9.01 9.01 0 0 0 0 18.02ZM21.99 18.95c-.33-.61-1.03-.95-1.97-.95-.71 0-1.32.29-1.68.79-.36.5-.44 1.17-.22 1.84.43 1.3 1.18 1.59 1.59 1.64.06.01.12.01.19.01.44 0 1.12-.19 1.78-1.18.53-.77.63-1.54.31-2.15Z",fill:t}))},c=function(e){var t=e.color;return a.createElement(a.Fragment,null,a.createElement("path",{d:"M11 2a9 9 0 1 1-4.07.97M19.071 20.97c.53 1.6 1.74 1.76 2.67.36.86-1.28.3-2.33-1.24-2.33-1.15 0-1.79.89-1.43 1.97Z",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))},u=function(e){var t=e.color;return a.createElement(a.Fragment,null,a.createElement("path",{opacity:".4",d:"M11.01 20.02a9.01 9.01 0 1 0 0-18.02 9.01 9.01 0 0 0 0 18.02Z",fill:t}),a.createElement("path",{d:"M21.99 18.95c-.33-.61-1.03-.95-1.97-.95-.71 0-1.32.29-1.68.79-.36.5-.44 1.17-.22 1.84.43 1.3 1.18 1.59 1.59 1.64.06.01.12.01.19.01.44 0 1.12-.19 1.78-1.18.53-.77.63-1.54.31-2.15Z",fill:t}))},d=function(e){var t=e.color;return a.createElement(a.Fragment,null,a.createElement("path",{d:"M11 20a9 9 0 1 0 0-18 9 9 0 0 0 0 18ZM18.93 20.69c.53 1.6 1.74 1.76 2.67.36.85-1.28.29-2.33-1.25-2.33-1.14-.01-1.78.88-1.42 1.97Z",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))},m=function(e){var t=e.color;return a.createElement(a.Fragment,null,a.createElement("path",{d:"M11 20.75c-5.38 0-9.75-4.37-9.75-9.75S5.62 1.25 11 1.25s9.75 4.37 9.75 9.75-4.37 9.75-9.75 9.75Zm0-18c-4.55 0-8.25 3.7-8.25 8.25s3.7 8.25 8.25 8.25 8.25-3.7 8.25-8.25-3.7-8.25-8.25-8.25ZM20.16 22.79c-.08 0-.16-.01-.23-.02-.47-.06-1.32-.38-1.8-1.81-.25-.75-.16-1.5.25-2.07.41-.57 1.1-.89 1.89-.89 1.02 0 1.82.39 2.18 1.08.36.69.26 1.57-.31 2.42-.71 1.07-1.48 1.29-1.98 1.29Zm-.6-2.3c.17.52.41.78.57.8.16.02.46-.17.77-.62.29-.43.31-.74.24-.88s-.35-.29-.87-.29c-.31 0-.54.1-.67.27-.12.17-.14.43-.04.72Z",fill:t}))},f=function(e){var t=e.color;return a.createElement(a.Fragment,null,a.createElement("path",{d:"M11 20a9 9 0 1 0 0-18 9 9 0 0 0 0 18Z",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{opacity:".4",d:"M18.93 20.689c.53 1.6 1.74 1.76 2.67.36.85-1.28.29-2.33-1.25-2.33-1.14-.01-1.78.88-1.42 1.97Z",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))},p=(0,a.forwardRef)((function(e,t){var n=e.variant,l=e.color,o=e.size,p=(0,r._)(e,s);return a.createElement("svg",(0,r.a)({},p,{xmlns:"http://www.w3.org/2000/svg",ref:t,width:o,height:o,viewBox:"0 0 24 24",fill:"none"}),function(e,t){switch(e){case"Bold":return a.createElement(i,{color:t});case"Broken":return a.createElement(c,{color:t});case"Bulk":return a.createElement(u,{color:t});case"Linear":default:return a.createElement(d,{color:t});case"Outline":return a.createElement(m,{color:t});case"TwoTone":return a.createElement(f,{color:t})}}(n,l))}));p.propTypes={variant:o().oneOf(["Linear","Bold","Broken","Bulk","Outline","TwoTone"]),color:o().string,size:o().oneOfType([o().string,o().number])},p.defaultProps={variant:"Linear",color:"currentColor",size:"24"},p.displayName="SearchNormal"}}]);
//# sourceMappingURL=2388.1999ac44.chunk.js.map