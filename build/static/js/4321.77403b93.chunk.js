"use strict";(self.webpackChunknipa_panel_new=self.webpackChunknipa_panel_new||[]).push([[4321],{934:function(e,n,t){t.d(n,{YN:function(){return p},jH:function(){return x},hu:function(){return m}});var r=t(4165),a=t(5861),i=t(9778),l=t(516);function o(){return s.apply(this,arguments)}function s(){return(s=(0,a.Z)((0,r.Z)().mark((function e(){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=(0,l.Z)())||void 0===n?void 0:n.get("/order");case 2:return t=e.sent,e.abrupt("return",null===t||void 0===t?void 0:t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return d.apply(this,arguments)}function d(){return(d=(0,a.Z)((0,r.Z)().mark((function e(){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=(0,l.Z)())||void 0===n?void 0:n.get("/orderGroup");case 2:return t=e.sent,e.abrupt("return",null===t||void 0===t?void 0:t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(e){return v.apply(this,arguments)}function v(){return(v=(0,a.Z)((0,r.Z)().mark((function e(n){var t,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=(0,l.Z)())||void 0===t?void 0:t.get("/order/"+n);case 2:return a=e.sent,e.abrupt("return",null===a||void 0===a?void 0:a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var p=function(){var e=(0,i.a)({queryKey:["orderGroups"],queryFn:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});return{data:e.data}},m=function(){var e=(0,i.a)({queryKey:["orders"],queryFn:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});return{data:e.data}},x=function(e){var n=(0,i.a)({queryKey:["order",{id:e}],queryFn:function(){var n=(0,a.Z)((0,r.Z)().mark((function n(){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c(e);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()});return{data:n.data}}},7421:function(e,n,t){var r=t(9439),a=t(6739),i=t(2791),l=t(184);n.Z=function(e){var n=e.children,t=e.title,o=(0,i.useState)(!1),s=(0,r.Z)(o,2),u=s[0],d=s[1];return(0,l.jsxs)("div",{className:"mb-[20px]",children:[(0,l.jsxs)("div",{onClick:function(){d(!u)},className:"border border-text-300 w-full h-[72px] bg-white flex items-center justify-between px-[16px] rounded-[5px]",children:[(0,l.jsx)("p",{className:"text-primary-dark text-[16px] font-bold cursor-pointer",children:t}),(0,l.jsx)("div",{className:"w-[28px] h-[28px] bg-text-300 flex items-center justify-center rounded-[8px] cursor-pointer hover:bg-text-400 transition-all",children:(0,l.jsx)(a.Z,{className:"w-[18px] h-[18px] transition-all ".concat(u?"rotate-0":"rotate-180")})})]}),(0,l.jsx)("div",{className:"overflow-hidden ".concat(u?"h-auto opacity-100":"h-0 opacity-0"," w-full transition-all mt-[20px] flex flex-col justify-start items-start"),children:(0,l.jsx)("div",{className:"border border-text-300 bg-white rounded-[5px] w-full h-full",children:n})})]})}},6612:function(e,n,t){var r=t(8854),a=t(184);n.Z=function(e){var n=e.title,t=e.subTitle,i=e.action;return(0,a.jsxs)("div",{className:"w-full flex flex-col items-center justify-center py-4",children:[(0,a.jsx)("div",{className:"svg:w-[40px] svg:h-[40px] mb-4 svg:text-text-500",children:(0,a.jsx)(r.Z,{})}),(0,a.jsx)("p",{className:"text-[14px] text-text-600 mb-4",children:n}),t&&(0,a.jsx)("p",{className:"text-[12px] text-text-600 mb-4",children:t}),i&&(0,a.jsx)("div",{className:"w-[130px]",children:i})]})}},8923:function(e,n,t){t(2791);var r=t(9504),a=t.n(r),i=t(4110),l=t(3466),o=t(1193),s=t(9230),u=t(184);n.Z=function(e){var n,t,r,d,c,v,p,m,x,f,h=e.name,b=e.label,j=e.formik,Z=e.type,w=void 0===Z?"text":Z,y=e.placeholder,g=e.maskChar,N=e.className,k=e.mask,_=e.inputActions,C=e.normal,S=e.endEndorement,P=e.multiline,F=e.readonly,T=e.value,D=(0,s.$G)().i18n;return(0,u.jsxs)("div",{className:"flex flex-col w-full items-start justify-start ".concat(N),children:[b&&(0,u.jsxs)("div",{className:"text-sm mb-2 flex justify-between w-full",children:[(0,u.jsx)("label",{htmlFor:h,className:"font-normal !text-xs",children:b}),null===_||void 0===_?void 0:_()]}),C?(0,u.jsx)(i.Z,{value:"number"==w?o.ZP.toPersianDigitsPutCommas(null===j||void 0===j||null===(d=j.values)||void 0===d?void 0:d[h]):null===j||void 0===j||null===(c=j.values)||void 0===c?void 0:c[h],type:"text",readOnly:F,id:h,name:h,multiline:P,rows:P?4:1,placeholder:y||"",onChange:function(e){var n=o.ZP.convetToEnglishDigitsRemoveCommas(e.target.value),t="";if("number"==w){var r=n.replace(/[^0-9.]/g,"").split(".");t=r.length>1?(r[0]||"0")+"."+(r[1]||""):r[0]}else t=e.target.value;null===j||void 0===j||j.handleChange({target:{name:h,value:t}})},disableUnderline:!0,endAdornment:(0,u.jsx)(l.Z,{position:"end",children:S}),className:"!text-sm text-text-400 w-full ".concat(P?"h-[100px] resize-none !p-2":"h-12"," border border-text-400 rounded-[8px] p-2 focus:border-primary-main !outline-none invalid:border-error-primary ").concat(null!==j&&void 0!==j&&null!==(v=j.errors)&&void 0!==v&&v[h]&&null!==j&&void 0!==j&&null!==(p=j.touched)&&void 0!==p&&p[h]?"!border-error-primary":"")}):(0,u.jsx)(a(),{mask:k||"",maskChar:g||" ",value:T||(null===j||void 0===j||null===(n=j.values)||void 0===n?void 0:n[h]),type:w,dir:D.dir(),className:"w-full h-12 border border-text-400 rounded-[8px] p-2 text-sm focus:border-primary-main !outline-none invalid:border-error-primary ".concat(null!==j&&void 0!==j&&null!==(t=j.errors)&&void 0!==t&&t[h]&&null!==j&&void 0!==j&&null!==(r=j.touched)&&void 0!==r&&r[h]?"!border-error-primary":""),id:h,name:h,style:{direction:"tel"==w?"ltr":D.dir()},placeholder:y||"",readOnly:F,onChange:function(e){null===j||void 0===j||j.handleChange({target:{name:h,value:e.target.value}})}}),(null===j||void 0===j||null===(m=j.errors)||void 0===m?void 0:m[h])&&(null===j||void 0===j||null===(x=j.touched)||void 0===x?void 0:x[h])&&(0,u.jsx)("p",{className:"text-error-primary text-[10px] mt-1",children:null===j||void 0===j||null===(f=j.errors)||void 0===f?void 0:f[h]})]})}},4321:function(e,n,t){t.r(n),t.d(n,{default:function(){return C}});var r=t(9439),a=t(9769),i=t(1369),l=t(2634),o=t(7139),s=t(747),u=t(4370),d=t(2791),c=t(6718),v=t(2636),p=t(9134),m=t(8923),x=t(5705),f=t(184),h=function(e){var n=e.open,t=e.handleClose,r=(0,x.TA)({initialValues:{mobile:""},onSubmit:function(e){console.log("values",e)}});return(0,f.jsx)(p.Z,{headerText:"\u0627\u0641\u0632\u0648\u062f\u0646 \u06a9\u0627\u0631\u0628\u0631 \u062c\u062f\u06cc\u062f",headerIcon:(0,f.jsx)(u.Z,{}),open:n,handleClose:t,children:(0,f.jsx)("div",{className:"p-7",children:(0,f.jsx)("form",{onSubmit:r.handleSubmit,className:"w-full",children:(0,f.jsxs)("div",{className:"mt-7 w-full grid grid-cols-2 gap-x-5 gap-y-7",children:[(0,f.jsx)(m.Z,{name:"mobile",label:"\u0634\u0645\u0627\u0631\u0647 \u0645\u0648\u0628\u0627\u06cc\u0644",type:"text",placeholder:"\u0634\u0645\u0627\u0631\u0647 \u0647\u0645\u0631\u0627\u0647 \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u0646\u0645\u0627\u06cc\u06cc\u062f",formik:r}),(0,f.jsx)(m.Z,{name:"mobile",label:"\u0634\u0645\u0627\u0631\u0647 \u0645\u0648\u0628\u0627\u06cc\u0644",type:"tel",placeholder:"\u0634\u0645\u0627\u0631\u0647 \u0647\u0645\u0631\u0627\u0647 \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u0646\u0645\u0627\u06cc\u06cc\u062f",formik:r})]})})})})},b=t(1310),j=t(1594),Z=t(7047),w=t(7421),y=t(1193),g=t(7689),N=t(6612),k=t(9230),_=t(934),C=function(){var e=(0,d.useState)([]),n=(0,r.Z)(e,2),t=n[0],p=n[1],m=(0,d.useState)(!1),x=(0,r.Z)(m,2),C=x[0],S=x[1],P=(0,g.s0)(),F=(0,k.$G)().t,T=(0,_.YN)().data,D=(0,_.hu)().data,O=(0,d.useCallback)((function(e,n){switch(n){case"edit":case"delete":default:break;case"view":P("/orders/".concat(e.id));break;case"nextStep":P("/orders/".concat(e.id,"/").concat(e.nextStep.id,"/showForm"))}}),[P]);return(0,d.useEffect)((function(){if(D){var e=[{name:F("orderCode"),selector:function(e){return e.id},sortable:!0},{name:F("productName"),selector:function(e){return e.product.name}},{name:F("submitDate"),selector:function(e){return e.jalali_date}},{name:F("customerName"),selector:function(e){return e.customer}},{name:F("count"),selector:function(e){return y.ZP.toPersianDigits(e.count||1)}}];D.cols.forEach((function(n){e.push({name:n.field_label,selector:function(e){var t,r,a,i,l;return(null===(t=e.additional_data)||void 0===t||null===(r=t.find((function(e){return e.fild_name===n.fild_name})))||void 0===r||null===(a=r.field_value)||void 0===a?void 0:a.label)||(null===(i=e.additional_data)||void 0===i||null===(l=i.find((function(e){return e.fild_name===n.fild_name})))||void 0===l?void 0:l.field_value)||(0,f.jsx)("div",{className:"bg-error-secondary",children:F("dontHave")})}})})),e.push({name:F("status"),selector:function(e){var n;return null===e||void 0===e||null===(n=e.step)||void 0===n?void 0:n.step_name}}),e.push({allowOverflow:!0,button:!0,width:"120px",cell:function(e){var n,t=[];t.push({icon:(0,f.jsx)(a.Z,{variant:"Bold"}),text:F("viewDetails"),name:"view"});var r,s,u=null===(n=JSON.parse(localStorage.getItem("nipa_user")||"{}"))||void 0===n?void 0:n.roles,d=!1;u&&(d=null===(r=e.nextStep)||void 0===r||null===(s=r.roles)||void 0===s?void 0:s.some((function(e){return u.some((function(n){return n.slug===e.slug}))})));return d&&t.push({icon:(0,f.jsx)(i.Z,{variant:"Bold"}),text:e.nextStep.step_name||"",name:"nextStep"}),D.permissions.canEdit&&t.push({icon:(0,f.jsx)(l.Z,{variant:"Bold"}),text:F("edit"),name:"edit"}),D.permissions.canDelete&&t.push({icon:(0,f.jsx)(o.Z,{variant:"Bold"}),text:F("delete"),name:"delete"}),(0,f.jsx)(j.Z,{handleAction:O,items:[].concat(t),row:e})}}),p([].concat(e)),console.log("data.orders",D.cols)}}),[D,O,F]),(0,f.jsxs)("div",{className:"w-full h-full",children:[(0,f.jsx)(h,{open:C,handleClose:function(){return S(!1)}}),(0,f.jsx)(c.Z,{actions:(null===T||void 0===T?void 0:T.length)>0&&(0,f.jsxs)(f.Fragment,{children:[" ",(0,f.jsx)("div",{className:"w-[186px]",children:(0,f.jsx)(v.Z,{icon:(0,f.jsx)(s.Z,{}),text:F("advancedFilter"),onClick:function(){return S(!0)},simple:!0})}),(0,f.jsx)("div",{className:"w-[186px] ms-4",children:(0,f.jsx)(v.Z,{icon:(0,f.jsx)(u.Z,{}),text:F("addNewOrder"),href:"create"})})]}),title:F("orders")}),(0,f.jsx)("div",{children:(0,f.jsx)("div",{className:"w-full",children:T?T.length>0?T.map((function(e){return(0,f.jsx)(w.Z,{title:F("orderInfoTitle",{code:y.ZP.toPersianDigits(e.id),date:y.ZP.toPersianDigits(y.ZP.renderChatTime(y.ZP.dateToTimestamp(e.created_at))),user:e.user.name?e.user.name+" "+e.user.last_name:e.user.mobile}),children:(0,f.jsx)(b.Z,{columns:t,data:null===D||void 0===D?void 0:D.orders.filter((function(n){var t,r;return(null===(t=n.order_group)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.id)===e.id}))})},e.id)})):(0,f.jsx)(N.Z,{title:F("noOrdersFound"),subTitle:F("orderFirstOrder")||"",action:(0,f.jsx)(v.Z,{icon:(0,f.jsx)(u.Z,{}),text:F("submitOrder"),href:"create",sm:!0})}):(0,f.jsx)("div",{className:"grid grid-cols-1 gap-[40px]",children:Array.from(Array(3).keys()).map((function(e,n){return(0,f.jsx)(Z.Z,{variant:"rounded",width:"100%",height:72,animation:"wave"},n)}))})})})]})}}}]);
//# sourceMappingURL=4321.77403b93.chunk.js.map