"use strict";(self.webpackChunknipa_panel_new=self.webpackChunknipa_panel_new||[]).push([[8287],{2737:function(t,n,e){e.d(n,{C:function(){return o},T:function(){return u}});var r=e(9434),u=function(){return(0,r.I0)()},o=r.v9},9722:function(t,n,e){var r=e(4165),u=e(5861),o=e(516);function i(){return(i=(0,u.Z)((0,r.Z)().mark((function t(){var n,e;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(n=(0,o.Z)())||void 0===n?void 0:n.get("/order");case 2:return e=t.sent,t.abrupt("return",null===e||void 0===e?void 0:e.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function a(){return(a=(0,u.Z)((0,r.Z)().mark((function t(n){var e,u;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(e=(0,o.Z)())||void 0===e?void 0:e.get("/order/"+n);case 2:return u=t.sent,t.abrupt("return",null===u||void 0===u?void 0:u.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function c(){return(c=(0,u.Z)((0,r.Z)().mark((function t(){var n,e;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(n=(0,o.Z)())||void 0===n?void 0:n.get("/orderGroup");case 2:return e=t.sent,t.abrupt("return",null===e||void 0===e?void 0:e.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function s(){return(s=(0,u.Z)((0,r.Z)().mark((function t(n){var e,u;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(e=(0,o.Z)())||void 0===e?void 0:e.post("/orderGroup",{customer_code:n});case 2:return u=t.sent,t.abrupt("return",null===u||void 0===u?void 0:u.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function d(){return(d=(0,u.Z)((0,r.Z)().mark((function t(n){var e,u;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(e=(0,o.Z)())||void 0===e?void 0:e.post("/order",n);case 2:return u=t.sent,t.abrupt("return",null===u||void 0===u?void 0:u.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function l(){return(l=(0,u.Z)((0,r.Z)().mark((function t(n){var e,u;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(e=(0,o.Z)())||void 0===e?void 0:e.get("/order/"+n+"/complete");case 2:return u=t.sent,t.abrupt("return",null===u||void 0===u?void 0:u.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(){return(p=(0,u.Z)((0,r.Z)().mark((function t(n,e){var u,i;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(u=(0,o.Z)())||void 0===u?void 0:u.get("/step/"+n+"/"+e+"/complete");case 2:return i=t.sent,t.abrupt("return",null===i||void 0===i?void 0:i.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}n.Z={ordersList:function(){return i.apply(this,arguments)},createOrder:function(t){return d.apply(this,arguments)},createOrderGroup:function(t){return s.apply(this,arguments)},orderGroupsList:function(){return c.apply(this,arguments)},orderDetail:function(t){return a.apply(this,arguments)},getCompleteInfo:function(t){return l.apply(this,arguments)},getStepInfo:function(t,n){return p.apply(this,arguments)}}},5138:function(t,n,e){e.d(n,{BU:function(){return a},Ir:function(){return f},ZU:function(){return c},bJ:function(){return s},gg:function(){return d},l$:function(){return v},nM:function(){return l},zm:function(){return p}});var r=e(4165),u=e(5861),o=e(685),i=e(5359).Z.actions,a=function(){return function(){var t=(0,u.Z)((0,r.Z)().mark((function t(n,e){var u;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.Z.productsList();case 2:u=t.sent,n(i.productsList(u));case 4:case"end":return t.stop()}}),t)})));return function(n,e){return t.apply(this,arguments)}}()},c=function(t){return function(){var n=(0,u.Z)((0,r.Z)().mark((function n(e,u){var a;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.Z.productStepsList(t);case 2:a=n.sent,e(i.productStepsList(a));case 4:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}()},s=function(t){return function(){var n=(0,u.Z)((0,r.Z)().mark((function n(e,u){var a;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(0!==t){n.next=2;break}return n.abrupt("return",e(i.productStepInfo(null)));case 2:return n.next=4,o.Z.productStepInfo(t);case 4:a=n.sent,e(i.productStepInfo(a));case 6:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}()},d=function(t){return function(){var n=(0,u.Z)((0,r.Z)().mark((function n(e,u){var a;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.Z.saveProduct(t);case 2:a=n.sent,e(i.saveProduct(a));case 4:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}()},l=function(t,n){return function(){var e=(0,u.Z)((0,r.Z)().mark((function e(u,c){var s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.updateProduct(t,n);case 2:s=e.sent,u(i.updateProduct(s)),u(a());case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},p=function(t){return function(){var n=(0,u.Z)((0,r.Z)().mark((function n(e,u){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e(i.setSaveSuccess(t));case 1:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}()},f=function(t){return function(){var n=(0,u.Z)((0,r.Z)().mark((function n(e,u){var a;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.Z.deleteProduct(t);case 2:a=n.sent,e(i.deleteProduct(a));case 4:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}()},v=function(t){return function(){var n=(0,u.Z)((0,r.Z)().mark((function n(e,u){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e(i.setDeleteSuccess(t));case 1:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}()}},685:function(t,n,e){var r=e(4165),u=e(5861),o=e(516);function i(){return(i=(0,u.Z)((0,r.Z)().mark((function t(){var n,e;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(n=(0,o.Z)())||void 0===n?void 0:n.get("/products");case 2:return e=t.sent,t.abrupt("return",null===e||void 0===e?void 0:e.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function a(){return(a=(0,u.Z)((0,r.Z)().mark((function t(n){var e,u;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(e=(0,o.Z)())||void 0===e?void 0:e.get("/product/".concat(n,"/steps"));case 2:return u=t.sent,t.abrupt("return",null===u||void 0===u?void 0:u.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function c(){return(c=(0,u.Z)((0,r.Z)().mark((function t(n){var e,u;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(e=(0,o.Z)())||void 0===e?void 0:e.get("/productSteps/".concat(n));case 2:return u=t.sent,t.abrupt("return",null===u||void 0===u?void 0:u.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function s(){return(s=(0,u.Z)((0,r.Z)().mark((function t(n,e){var u,i;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(u=(0,o.Z)())||void 0===u?void 0:u.post("/product/steps/".concat(n,"/setRoles"),{roles:e.join(",")});case 2:return i=t.sent,t.abrupt("return",null===i||void 0===i?void 0:i.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function d(){return(d=(0,u.Z)((0,r.Z)().mark((function t(n){var e,u,i;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(e=(0,o.Z)())||void 0===e?void 0:e.post("/products",{name:n.name,code:n.code,custom:n.custom,price:n.price,count_type:n.count_type,status:n.status,description:n.description,images:null===(u=n.images)||void 0===u?void 0:u.map((function(t){return t.hashCode}))});case 2:return i=t.sent,t.abrupt("return",null===i||void 0===i?void 0:i.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function l(){return(l=(0,u.Z)((0,r.Z)().mark((function t(n,e){var u,i,a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(u=(0,o.Z)())||void 0===u?void 0:u.put("/products/".concat(n),{name:e.name,code:e.code,custom:e.custom,count_type:e.count_type,price:e.price,status:e.status,description:e.description,images:null===(i=e.images)||void 0===i?void 0:i.map((function(t){return t.hashCode}))});case 2:return a=t.sent,t.abrupt("return",null===a||void 0===a?void 0:a.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(){return(p=(0,u.Z)((0,r.Z)().mark((function t(n){var e,u;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(e=(0,o.Z)())||void 0===e?void 0:e.delete("/products/".concat(n));case 2:return u=t.sent,t.abrupt("return",null===u||void 0===u?void 0:u.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function f(){return(f=(0,u.Z)((0,r.Z)().mark((function t(n){var e,u;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(e=(0,o.Z)())||void 0===e?void 0:e.get("/products/".concat(n));case 2:return u=t.sent,t.abrupt("return",null===u||void 0===u?void 0:u.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(){return(v=(0,u.Z)((0,r.Z)().mark((function t(n){var e,u;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(e=(0,o.Z)())||void 0===e?void 0:e.post("/product/steps/conditions",{step_id:n.stepId,field_id:n.fieldId,option_id:n.optionId,next_step_id:n.nextStepId});case 2:return u=t.sent,t.abrupt("return",null===u||void 0===u?void 0:u.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}n.Z={productsList:function(){return i.apply(this,arguments)},saveProduct:function(t){return d.apply(this,arguments)},deleteProduct:function(t){return p.apply(this,arguments)},productStepsList:function(t){return a.apply(this,arguments)},productStepInfo:function(t){return c.apply(this,arguments)},setProductStepRoles:function(t,n){return s.apply(this,arguments)},addProductConditions:function(t){return v.apply(this,arguments)},getProduct:function(t){return f.apply(this,arguments)},updateProduct:function(t,n){return l.apply(this,arguments)}}},7490:function(t,n,e){e.d(n,{KR:function(){return Z},Sd:function(){return m},bG:function(){return x},kS:function(){return h},fY:function(){return v},cp:function(){return f}});var r=e(4165),u=e(5861),o=e(516);function i(){return(i=(0,u.Z)((0,r.Z)().mark((function t(n){var e,u;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(e=(0,o.Z)())||void 0===e?void 0:e.post("/sendOtp",{mobile:n.mobile});case 2:return u=t.sent,t.abrupt("return",null===u||void 0===u?void 0:u.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function a(){return(a=(0,u.Z)((0,r.Z)().mark((function t(n){var e,u;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("cscscsc",n),t.next=3,null===(e=(0,o.Z)())||void 0===e?void 0:e.post("/confirmOtp",{mobile:n.mobile,otp:n.otp});case 3:return u=t.sent,t.abrupt("return",null===u||void 0===u?void 0:u.data);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function c(){return(c=(0,u.Z)((0,r.Z)().mark((function t(){var n,e;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(n=(0,o.Z)())||void 0===n?void 0:n.get("/roles");case 2:return e=t.sent,t.abrupt("return",null===e||void 0===e?void 0:e.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function s(){return(s=(0,u.Z)((0,r.Z)().mark((function t(){var n,e;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(n=(0,o.Z)())||void 0===n?void 0:n.get("/profile");case 2:return e=t.sent,t.abrupt("return",null===e||void 0===e?void 0:e.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function d(){return(d=(0,u.Z)((0,r.Z)().mark((function t(){var n,e;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(n=(0,o.Z)())||void 0===n?void 0:n.get("/customers");case 2:return e=t.sent,t.abrupt("return",null===e||void 0===e?void 0:e.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var l={sendOtp:function(t){return i.apply(this,arguments)},confirmOtp:function(t){return a.apply(this,arguments)},getRolesList:function(){return c.apply(this,arguments)},getUserInfo:function(){return s.apply(this,arguments)},getCustomersList:function(){return d.apply(this,arguments)}},p=e(5797).Z.actions,f=function(t){return function(){var n=(0,u.Z)((0,r.Z)().mark((function n(e,u){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e(p.setUserMobile(t));case 1:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}()},v=function(t){return function(){var n=(0,u.Z)((0,r.Z)().mark((function n(e,u){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e(p.setUserLogin(t));case 1:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}()},m=function(){return function(){var t=(0,u.Z)((0,r.Z)().mark((function t(n,e){var u;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.getRolesList();case 2:u=t.sent,console.log(u),n(p.getRolesList(u));case 5:case"end":return t.stop()}}),t)})));return function(n,e){return t.apply(this,arguments)}}()},Z=function(){return function(){var t=(0,u.Z)((0,r.Z)().mark((function t(n,e){var u;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.getCustomersList();case 2:u=t.sent,n(p.getCustomersList(u.customers));case 4:case"end":return t.stop()}}),t)})));return function(n,e){return t.apply(this,arguments)}}()},x=function(){return function(){var t=(0,u.Z)((0,r.Z)().mark((function t(n,e){var u;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.getUserInfo();case 2:u=t.sent,console.log(u),n(p.getUserInfo(u));case 5:case"end":return t.stop()}}),t)})));return function(n,e){return t.apply(this,arguments)}}()},h=function(){return function(){var t=(0,u.Z)((0,r.Z)().mark((function t(n,e){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(p.logout());case 1:case"end":return t.stop()}}),t)})));return function(n,e){return t.apply(this,arguments)}}()}},8287:function(t,n,e){e.r(n),e.d(n,{default:function(){return G}});var r=e(4165),u=e(5861),o=e(1413),i=e(3433),a=e(9439),c=e(6718),s=e(7689),d=e(2791),l=e(9230),p=e(745),f=e(184),v=function(t){var n=t.products,e=t.handleSelectProduct,r=(0,l.$G)().t;return(0,f.jsx)("div",{children:(0,f.jsx)(p.Z,{className:"group",name:"products",label:r("selectedProduct"),options:null===n||void 0===n?void 0:n.map((function(t){return{label:(0,f.jsx)("p",{children:t.name}),value:t.id||0}})),placeholder:r("pleaseSelectProduct"),formik:{handleChange:function(t){e(t.target.value)}}})})},m=e(2737),Z=e(5138),x=e(5601),h=e(9351),w=e(2636),y=e(4370),b=e(9145),g=e(8116),k=e(5705),j=e(1724),_=e(2841),S=function(t){var n=t.selectedOrder,e=t.products,c=t.handleClearOrder,s=t.handleSaveOrder,v=(0,l.$G)().t,m=(0,d.useState)(),Z=(0,a.Z)(m,2),S=(Z[0],Z[1]),I=(0,d.useState)([]),N=(0,a.Z)(I,2),P=N[0],C=N[1],O=(0,d.useState)([]),L=(0,a.Z)(O,2),F=L[0],D=L[1],G=(0,d.useState)(!1),R=(0,a.Z)(G,2),T=(R[0],R[1],(0,d.useState)(!1)),U=(0,a.Z)(T,2),E=U[0],M=U[1],$=(0,d.useState)(!1),B=(0,a.Z)($,2),q=B[0],J=B[1],Y=e.find((function(t){return t.id===n.product_id}));(0,d.useEffect)((function(){et()}),[]);var z=(0,d.useState)(),A=(0,a.Z)(z,2),K=A[0],V=A[1],H=(0,d.useState)(),Q=(0,a.Z)(H,2),W=Q[0],X=Q[1],tt=(0,k.TA)({initialValues:W,validationSchema:K,enableReinitialize:!0,onSubmit:function(){var t=(0,u.Z)((0,r.Z)().mark((function t(n){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("ok",n),Y&&s(Y,n,q);case 2:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()});(0,d.useEffect)((function(){X((0,h.YB)(P)),V(j.Ry().shape((0,h.YT)(P,F,tt)))}),[P,tt.values,F]);var nt=function(t){J(t),tt.handleSubmit(tt.values)},et=function(){var t=(0,u.Z)((0,r.Z)().mark((function t(){var n,e,u;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===Y||void 0===Y||!Y.initialFormId){t.next=9;break}return t.next=3,x.Z.getForm(null===Y||void 0===Y?void 0:Y.initialFormId);case 3:e=t.sent,S(e),u=[],null===(n=e.fields)||void 0===n||n.map((function(t){var n,r,i,a={key:t.id,name:t.name,placeholder:t.placeholder,label:t.label,type:t.type.type,typeId:t.type.id,required:t.required,id:t.id,fromRelatedFields:!(null===t||void 0===t||null===(n=t.form)||void 0===n||!n.id||(null===t||void 0===t||null===(r=t.form)||void 0===r?void 0:r.id)==(null===e||void 0===e?void 0:e.id))};("dropDown"!==t.type.type&&"checkbox"!==t.type.type||(a=t.basic_data_id?(0,o.Z)((0,o.Z)({},a),{},{basic_data:t.basic_data,basic_data_id:t.basic_data_id,basicDataItems:t.basicDataItems.map((function(t){return{key:t.id,id:t.id,label:(0,f.jsx)("p",{children:t.label}),server_id:t.id,value:t.option}}))}):(0,o.Z)((0,o.Z)({},a),{},{options:t.options.map((function(t){return{id:t.id,key:t.id,label:(0,f.jsx)("p",{children:t.label}),server_id:t.id,value:t.option}}))})),"uploadFile"===t.type.type)&&(a=(0,o.Z)((0,o.Z)({},a),{},{onlyImage:null===(i=JSON.parse(t.validation))||void 0===i?void 0:i.onlyImage,setPending:M,noBadge:!0}));u.push((0,o.Z)({},a))})),D((0,i.Z)(e.conditions)),C([].concat(u));case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return console.log("formik",tt.errors),(0,f.jsxs)("form",{onSubmit:tt.handleSubmit,children:[E&&(0,f.jsx)(_.Z,{}),(0,f.jsxs)("div",{children:[(0,f.jsx)(p.Z,{className:"group",name:"product",label:v("selectedProduct"),options:null===e||void 0===e?void 0:e.map((function(t,n){return{label:(0,f.jsx)("p",{children:t.name}),value:t.id||0,key:t.id||n}})),placeholder:v("pleaseSelectProduct"),disabled:!0,formik:{values:{product:n.product_id},handleChange:function(t){}}}),(0,f.jsx)("div",{children:P&&tt&&(null===tt||void 0===tt?void 0:tt.values)&&Object.keys(null===tt||void 0===tt?void 0:tt.values).length>0&&P.map((function(t,n){var e=F.find((function(n){return n.relational_form_field_id==t.id})),r=!0;if(e){var u,o,i,a,c,s=P.find((function(t){return t.id==e.form_field_id}));if(s)if(s.basic_data_id)u=null===s||void 0===s||null===(o=s.basicDataItems)||void 0===o?void 0:o.find((function(t){return t.id==e.basic_data_item_id}));else u=null===s||void 0===s||null===(i=s.options)||void 0===i?void 0:i.find((function(t){return t.server_id==e.form_field_option_id}));if(s&&u)if(1==e.operation)r=tt.values[s.name]===u.value||(null===(a=tt.values[s.name])||void 0===a?void 0:a.indexOf(u.value))>-1;else r=!(tt.values[s.name]===u.value||(null===(c=tt.values[s.name])||void 0===c?void 0:c.indexOf(u.value))>-1)}return r?(0,f.jsx)("div",{className:"mt-[30px]",children:(0,h.lw)(t,(function(){}),tt)},n):(0,f.jsx)(f.Fragment,{})}))}),(0,f.jsx)("div",{className:"mt-[30px] mb-[50px]",children:(0,f.jsx)(w.Z,{icon:(0,f.jsx)(y.Z,{}),onClick:function(){nt(!0)},bordered:!0,text:v("addProductToOrder")})}),(0,f.jsxs)("div",{className:"w-full flex items-center justify-between",children:[(0,f.jsx)("div",{className:"w-[227px]",children:(0,f.jsx)(w.Z,{icon:(0,f.jsx)(b.Z,{className:"me-2"}),onClick:c,gray:!0,text:v("backToPrevStep")})}),(0,f.jsx)("div",{className:"w-[202px]",children:(0,f.jsx)(w.Z,{icon:(0,f.jsx)(g.Z,{className:"ms-2"}),after:!0,onClick:function(){return nt(!1)},text:v("saveAndContinue")})})]})]})]})},I=e(1193),N=e(6151),P=e(7139),C=e(1742),O=function(t){var n=t.item,e=t.handleIncrease,r=t.handleDecrease,u=(0,l.$G)().t;return(0,f.jsxs)("div",{className:"flex border border-text-400 px-[14px] py-[7px] rounded-[8px] items-center justify-between mt-2",children:[(0,f.jsx)("div",{children:(0,f.jsx)("p",{className:"text-[14px] text-text-500",children:u("productName")})}),(0,f.jsx)("div",{children:(0,f.jsx)("p",{children:n.product_name})}),(0,f.jsxs)("div",{className:"bg-text-200 p-2 rounded-[8px] flex items-center justify-between w-[97px]",children:[(0,f.jsx)(N.Z,{className:"!w-6 !max-w-[24px] !min-w-[24px] !p-[2px] h-6",onClick:e,children:(0,f.jsx)(y.Z,{className:"text-primary-main"})}),(0,f.jsx)("p",{className:"pointer-events-none select-none text-[16px] text-primary-main",children:I.ZP.toPersianDigits(n.count)}),(0,f.jsx)(N.Z,{className:"!w-6 !max-w-[24px] !min-w-[24px] !p-[2px] h-6",onClick:r,children:1==n.count?(0,f.jsx)(P.Z,{className:"text-error-primary"}):(0,f.jsx)(C.Z,{className:"text-primary-main"})})]})]})},L=e(7490),F=function(t){var n=t.orders,e=t.handleEditOrder,r=t.handleSubmitForm;console.log("orders",n);var u=(0,l.$G)().t,i=(0,d.useState)(0),c=(0,a.Z)(i,2),s=c[0],v=c[1],Z=(0,m.C)((function(t){return t.users.customers})),x=(0,m.T)(),h=(0,d.useState)(),y=(0,a.Z)(h,2),b=y[0],g=y[1];(0,d.useEffect)((function(){!Z&&I.ZP.checkPermission("add-order-as-another")&&x((0,L.KR)())}),[]),(0,d.useEffect)((function(){var t=0;null===n||void 0===n||n.map((function(n){t+=n.count})),v(t)}),[n]);return(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{children:I.ZP.checkPermission("add-order-as-another")&&(0,f.jsx)("div",{className:"flex rounded-[8px] items-center justify-between mb-5",children:(0,f.jsx)(p.Z,{className:"group",name:"customers",label:u("customer"),options:null===Z||void 0===Z?void 0:Z.map((function(t){return{label:(0,f.jsx)("p",{children:"".concat(t.code," - ").concat(t.user.name?t.user.name+" "+t.user.last_name:t.user.mobile)}),value:t.code}})),placeholder:u("pleaseSelectCustomer"),formik:{handleChange:function(t){g(t.target.value)}}})})}),(0,f.jsxs)("div",{className:"flex items-center justify-between text-primary-main font-bold mb-[29px]",children:[(0,f.jsx)("p",{children:u("productsOfThisOrder")}),(0,f.jsxs)("p",{children:[I.ZP.toPersianDigits(s)," ",u("product")]})]}),n.map((function(t,n){return(0,f.jsx)(O,{item:t,handleIncrease:function(){return function(t){e((0,o.Z)((0,o.Z)({},t),{},{count:t.count+1}))}(t)},handleDecrease:function(){return function(t){e((0,o.Z)((0,o.Z)({},t),{},{count:t.count>0?t.count-1:0}))}(t)}},n)})),(0,f.jsx)("div",{className:"mt-[32px]",children:(0,f.jsx)(w.Z,{after:!0,onClick:function(){return r(b)},text:u("submitForm")})})]})},D=e(9722),G=function(){var t=(0,s.s0)(),n=(0,l.$G)().t,e=(0,d.useState)(!1),p=(0,a.Z)(e,2),x=p[0],h=p[1],w=JSON.parse(localStorage.getItem("nipa_user")||""),y=(0,d.useState)([]),b=(0,a.Z)(y,2),g=b[0],k=b[1],j=(0,d.useState)(),I=(0,a.Z)(j,2),N=I[0],P=I[1],C=(0,m.C)((function(t){return t.products.products})),O=(0,m.T)();(0,d.useEffect)((function(){O((0,Z.BU)())}),[]);var L=function(){var n=(0,u.Z)((0,r.Z)().mark((function n(e){var u,o,i,a;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return h(!0),o=e||(null===(u=w.customer)||void 0===u?void 0:u.code),console.log("all neede data",o,g),i={customer_code:o,orders:g.map((function(t){return{count:t.count,product_id:t.product_id,form_id:t.form_id||null,data:t.form_id?t.values:null}}))},console.log("requestObject",i),n.next=7,D.Z.createOrder(i);case 7:return a=n.sent,console.log("response",a),h(!1),n.next=12,t("/orders");case 12:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}();return(0,f.jsxs)("div",{className:"w-full h-full",children:[x&&(0,f.jsx)(_.Z,{}),(0,f.jsx)(c.Z,{title:n("createNewOrder"),handleBack:function(){return t("/orders")}}),(0,f.jsxs)("div",{className:"w-full flex gap-x-[20px]",children:[(0,f.jsx)("div",{className:"".concat(g.length>0?"w-[calc(100%-340px)]":"w-full"," bg-white border border-text-300 h-min rounded-[6px] px-[20px] py-[24px]"),children:null!==N&&void 0!==N&&N.product_id?(0,f.jsx)(S,{handleSaveOrder:function(t,n,e){var r={product_id:t.id,product_name:t.name,saved:!0,values:n,form_id:t.initialFormId,id:Math.floor(1e4*Math.random()),count:1,custom:0};k([].concat((0,i.Z)(g),[(0,o.Z)({},r)])),P(null)},products:null===C||void 0===C?void 0:C.filter((function(t){return(t.initialFormId||0===t.custom)&&1===t.status})),handleClearOrder:function(){P(null)},selectedOrder:N}):(0,f.jsx)(v,{products:null===C||void 0===C?void 0:C.filter((function(t){return(t.initialFormId||0===t.custom)&&1===t.status})),handleSelectProduct:function(t){var n=null===C||void 0===C?void 0:C.find((function(n){return n.id==t}));if(console.log("prod",n),0==(null===n||void 0===n?void 0:n.custom)){var e={product_id:t,product_name:n.name,saved:!0,values:null,form_id:null,custom:0,id:Math.floor(1e4*Math.random()),count:1};k([].concat((0,i.Z)(g),[(0,o.Z)({},e)])),P(null)}else P({product_id:t,saved:!1})}})}),g.length>0&&(0,f.jsx)("div",{className:"w-[320px] h-min bg-white border border-text-300 rounded-[6px] px-[16px] py-[18px]",children:(0,f.jsx)(F,{handleSubmitForm:L,orders:g,handleEditOrder:function(t){console.log("order",t);var n=g.findIndex((function(n){return n.id==t.id}));if(n>-1){var e=(0,i.Z)(g);t.count<=0?e.splice(n,1):e[n]=(0,o.Z)({},t),k((0,i.Z)(e))}}})})]})]})}}}]);
//# sourceMappingURL=8287.f371ea52.chunk.js.map