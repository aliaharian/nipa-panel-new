(self.webpackChunknipa_panel_new=self.webpackChunknipa_panel_new||[]).push([[5084],{2199:(e,t,n)=>{"use strict";n.d(t,{GQ:()=>m,Zk:()=>p,z6:()=>h,Hu:()=>d});var o=n(7097),s=n(3747),r=n(3248),a=n(670);async function i(){var e;let t=await(null===(e=(0,a.A)())||void 0===e?void 0:e.get("/profile"));return null===t||void 0===t?void 0:t.data}async function l(e){var t;let n=await(null===(t=(0,a.A)())||void 0===t?void 0:t.post("/completeProfile",e));return null===n||void 0===n?void 0:n.data}var u=n(7311),c=n(7417);const d=()=>{const e=(0,u.j)(),{mutate:t,isPending:n}=(0,o.n)({mutationKey:["sendOtp"],mutationFn:e=>async function(e){var t;let n=await(null===(t=(0,a.A)())||void 0===t?void 0:t.post("/sendOtp",{mobile:e.mobile}));return{...null===n||void 0===n?void 0:n.data,mobile:e.mobile}}(e),onSuccess:t=>{e((0,c.ex)(t.mobile))}});return{mutate:t,loading:n}},p=()=>{const e=(0,u.j)(),{mutate:t,isPending:n}=(0,o.n)({mutationKey:["confirmOtp"],mutationFn:e=>async function(e){var t;let n=await(null===(t=(0,a.A)())||void 0===t?void 0:t.post("/confirmOtp",{mobile:e.mobile,otp:e.otp}));return null===n||void 0===n?void 0:n.data}(e),onSuccess:t=>{e((0,c.PT)(t))}});return{mutate:t,loading:n}},h=()=>{const{data:e,isPending:t}=(0,s.I)({queryKey:["userInfo"],queryFn:i});return{data:e,isPending:t}},m=()=>{const e=(0,r.jE)(),{mutate:t,isPending:n}=(0,o.n)({mutationKey:["completeProfile"],mutationFn:l,onSuccess:t=>{e.setQueryData(["userInfo"],t)}});return{mutate:t,loading:n}}},6041:(e,t,n)=>{"use strict";n.d(t,{J3:()=>r,WG:()=>a,hR:()=>s});const o=n(8852).A.actions,s=e=>async(t,n)=>{t(o.setApiLoading(e))},r=e=>async(t,n)=>{t(o.setCollapseMenu(e))},a=e=>async(t,n)=>{t(o.setOpenMenu(e))}},7311:(e,t,n)=>{"use strict";n.d(t,{G:()=>r,j:()=>s});var o=n(9456);const s=()=>(0,o.wA)(),r=o.d4},7417:(e,t,n)=>{"use strict";n.d(t,{gJ:()=>u,Up:()=>l,ug:()=>c,ri:()=>d,PT:()=>i,ex:()=>a});var o=n(670);const s={sendOtp:async function(e){var t;let n=await(null===(t=(0,o.A)())||void 0===t?void 0:t.post("/sendOtp",{mobile:e.mobile}));return null===n||void 0===n?void 0:n.data},confirmOtp:async function(e){var t;console.log("cscscsc",e);let n=await(null===(t=(0,o.A)())||void 0===t?void 0:t.post("/confirmOtp",{mobile:e.mobile,otp:e.otp}));return null===n||void 0===n?void 0:n.data},getRolesList:async function(){var e;let t=await(null===(e=(0,o.A)())||void 0===e?void 0:e.get("/roles"));return null===t||void 0===t?void 0:t.data},getUserInfo:async function(){var e;let t=await(null===(e=(0,o.A)())||void 0===e?void 0:e.get("/profile"));return null===t||void 0===t?void 0:t.data},getCustomersList:async function(){var e;let t=await(null===(e=(0,o.A)())||void 0===e?void 0:e.get("/customers"));return null===t||void 0===t?void 0:t.data}};const r=n(5730).A.actions,a=e=>async(t,n)=>{t(r.setUserMobile(e))},i=e=>async(t,n)=>{t(r.setUserLogin(e))},l=()=>async(e,t)=>{const n=await s.getRolesList();console.log(n),e(r.getRolesList(n))},u=()=>async(e,t)=>{const n=await s.getCustomersList();e(r.getCustomersList(n.customers))},c=()=>async(e,t)=>{const n=await s.getUserInfo();console.log(n),e(r.getUserInfo(n))},d=()=>async(e,t)=>{e(r.logout())}},670:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var o=n(7154),s=n(6041),r=n(6254),a=n(5424);const i=()=>{const e=o.A.create({baseURL:"https://apidemo.nipaco.ir/api/v1",headers:localStorage.getItem("nipa_token")?{"Content-Type":"application/json",Accept:"application/json",language:localStorage.getItem("nipa-lang")||"fa",authorization:"Bearer "+localStorage.getItem("nipa_token")}:{"Content-Type":"application/json",Accept:"application/json"}});return e.interceptors.request.use((function(e){return r.A.dispatch((0,s.hR)(!0)),e}),(function(e){return r.A.dispatch((0,s.hR)(!1)),Promise.reject(e)})),e.interceptors.response.use((function(e){return r.A.dispatch((0,s.hR)(!1)),e}),(function(e){if(e.response.status,403==e.response.status&&(document.location.href="/errors/403"),e.response.data.errors){Object.keys(e.response.data.errors).map((t=>e.response.data.errors[t])).forEach((e=>{a.A.error(e)}))}else console.log("err",e.response),a.A.error(e.response.data.message||e.response.data.msg||e.response.data.error);return r.A.dispatch((0,s.hR)(!1)),Promise.reject(e)})),e}},6640:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>s});var o=n(1735);const s={toISOLocal:function(e){var t=e=>("0"+e).slice(-2),n=e.getTimezoneOffset();return n=Math.abs(n),e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())},pluralize:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"s";return"".concat(e," ").concat(t).concat(1!==e?n:"")},fileToUrl:e=>new Promise(((t,n)=>{const o=new FileReader;o.onload=function(e){const n=e.target.result;t(n)},o.onerror=function(e){n(e.target.error)},o.readAsDataURL(e)})),imageValidExtensions:["image/jpeg","image/jpg","image/png","image/gif"],base64ToBlob:function(e,t){const n=window.atob(e),o=n.length,s=new Uint8Array(o);for(let r=0;r<o;++r)s[r]=n.charCodeAt(r);return new Blob([s],{type:t})},renderStatusStyle:e=>{let t;switch(e){case"success":t="bg-success-secondary text-success-primary ";break;case"warning":t="bg-warning-secondary text-warning-text ";break;case"error":t="bg-error-secondary text-error-primary ";break;case"info":t="bg-info-secondary text-info-primary ";break;default:t="bg-text-300 text-text-600 "}return t},toPersianDigitsPutCommas:(e,t)=>{const n="\u06f0".charCodeAt(0);!e&&(e="");let s=e.split(".");s[0].length>3&&(s[0]=s[0].replace(/\B(?=(\d{3})+(?!\d))/g,","));const r=s.join(".");if(t||"fa"===o.A.language){return String(r).replace(/[0-9]/g,(e=>String.fromCharCode(e.charCodeAt(0)+n-48)))}return r},fileToBlob:function(e){return new Blob([e],{type:e.type})},toPersianDigits:(e,t)=>{if(t||"fa"===o.A.language){const t="\u06f0".charCodeAt(0);return String(e).replace(/[0-9]/g,(e=>String.fromCharCode(e.charCodeAt(0)+t-48)))}return e},dateToTimestamp:e=>new Date(e).getTime(),renderChatTime:(e,t,n)=>{let s=Math.floor(Date.now());if(t)return n?new Date(e).toLocaleDateString("fa-IR"):new Date(e).toLocaleDateString("fa-IR")+" , "+new Date(e).toLocaleTimeString("fa-IR").slice(0,5);let r=Math.floor((s-e)/1e3);return r<60?o.A.t("fewSecondsAgo"):r<3600?Math.floor(r/60)+" "+o.A.t("minutesAgo"):r<86400?Math.floor(r/3600)+" "+o.A.t("hoursAgo"):r<604800?Math.floor(r/86400)+" "+o.A.t("daysAgo"):new Date(e).toLocaleDateString("fa-IR")},checkPermission:e=>{var t;let n=null===(t=JSON.parse(localStorage.getItem("nipa_user")||"{}"))||void 0===t?void 0:t.permissions;return!(null===n||void 0===n||!n.find((t=>t.slug===e)))},convetToEnglishDigitsRemoveCommas:e=>{const t="\u06f0".charCodeAt(0);return String(e).replace(/[\u06f0-\u06f9]/g,(e=>String.fromCharCode(e.charCodeAt(0)-t+48)))}}},7578:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var o=n(1637),s=(n(5043),n(5475)),r=n(579);const a=e=>{let{type:t,simple:n,bordered:a,href:i,text:l,onClick:u,icon:c,after:d,sm:p,xs:h,gray:m,disabled:f,loading:v,className:g}=e;const k="w-full ".concat(g," ").concat(h?"h-[36px]":p?"h-[38px]":"h-12"," rounded-[8px] flex items-center justify-center bg-primary-main text-white ").concat(a?"border border-primary-main bg-transparent !text-primary-main":"","\n   ").concat(n?"border-none bg-transparent !text-primary-main":"","\n   ").concat(m?"border-none !bg-text-200 !text-text-500":"","\n    ").concat(f?"opacity-90 cursor-not-allowed pointer-events-none":"","\n  "),w=()=>c?(0,r.jsx)("div",{className:"inline-block me-1",children:c}):(0,r.jsx)(r.Fragment,{});return(0,r.jsxs)(r.Fragment,{children:[i&&(0,r.jsxs)(s.N_,{to:i,className:k,children:[!d&&w(),v?(0,r.jsx)(o.A,{className:"!text-white !w-[20px] !h-[20px]"}):l,d&&w()]}),t&&(0,r.jsxs)("button",{className:k,type:t,children:[!d&&w(),v?(0,r.jsx)(o.A,{className:"!text-white !w-[20px] !h-[20px]"}):l,d&&w()]}),u&&(0,r.jsxs)("button",{className:k,onClick:u,children:[!d&&w(),v?(0,r.jsx)(o.A,{className:"!text-white !w-[20px] !h-[20px]"}):l,d&&w()]})]})}},9973:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});n(5043);var o=n(4457),s=n.n(o),r=n(3360),a=n(1787),i=n(6640),l=n(4117),u=n(579);const c=e=>{var t,n,o,c,d,p,h,m,f,v;let{name:g,label:k,formik:w,type:b="text",placeholder:y,maskChar:x,className:A,mask:C,inputActions:S,normal:O,endEndorement:M,multiline:j,readonly:I,value:D}=e;const{i18n:E}=(0,l.Bd)();return(0,u.jsxs)("div",{className:"flex flex-col w-full items-start justify-start ".concat(A),children:[k&&(0,u.jsxs)("div",{className:"text-sm mb-2 flex justify-between w-full",children:[(0,u.jsx)("label",{htmlFor:g,className:"font-normal !text-xs",children:k}),null===S||void 0===S?void 0:S()]}),O?(0,u.jsx)(r.A,{value:"number"==b?i.Ay.toPersianDigitsPutCommas(null===w||void 0===w||null===(c=w.values)||void 0===c?void 0:c[g]):null===w||void 0===w||null===(d=w.values)||void 0===d?void 0:d[g],type:"text",readOnly:I,id:g,name:g,multiline:j,rows:j?4:1,placeholder:y||"",onChange:e=>{const t=i.Ay.convetToEnglishDigitsRemoveCommas(e.target.value);let n="";if("number"==b){let e=t.replace(/[^0-9.]/g,"").split(".");n=e.length>1?(e[0]||"0")+"."+(e[1]||""):e[0]}else n=e.target.value;null===w||void 0===w||w.handleChange({target:{name:g,value:n}})},disableUnderline:!0,endAdornment:(0,u.jsx)(a.A,{position:"end",children:M}),className:"!text-sm text-text-400 w-full ".concat(j?"h-[100px] resize-none !p-2":"h-12"," border border-text-400 rounded-[8px] p-2 focus:border-primary-main !outline-none invalid:border-error-primary ").concat(null!==w&&void 0!==w&&null!==(p=w.errors)&&void 0!==p&&p[g]&&null!==w&&void 0!==w&&null!==(h=w.touched)&&void 0!==h&&h[g]?"!border-error-primary":"")}):(0,u.jsx)(s(),{mask:C||"",maskChar:x||" ",value:D||(null===w||void 0===w||null===(t=w.values)||void 0===t?void 0:t[g]),type:b,dir:E.dir(),className:"w-full h-12 border border-text-400 rounded-[8px] p-2 text-sm focus:border-primary-main !outline-none invalid:border-error-primary ".concat(null!==w&&void 0!==w&&null!==(n=w.errors)&&void 0!==n&&n[g]&&null!==w&&void 0!==w&&null!==(o=w.touched)&&void 0!==o&&o[g]?"!border-error-primary":""),id:g,name:g,style:{direction:"tel"==b?"ltr":E.dir()},placeholder:y||"",readOnly:I,onChange:e=>{null===w||void 0===w||w.handleChange({target:{name:g,value:e.target.value}})}}),(null===w||void 0===w||null===(m=w.errors)||void 0===m?void 0:m[g])&&(null===w||void 0===w||null===(f=w.touched)||void 0===f?void 0:f[g])&&(0,u.jsx)("p",{className:"text-error-primary text-[10px] mt-1",children:null===w||void 0===w||null===(v=w.errors)||void 0===v?void 0:v[g]})]})}},5084:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});var o=n(3516),s=(n(5043),n(9973)),r=n(3033),a=n(7578),i=n(3216),l=n(2199),u=n(579);const c=r.Ik().shape({mobile:r.Yj().min(13,"\u0634\u0645\u0627\u0631\u0647 \u0645\u0648\u0628\u0627\u06cc\u0644 \u0635\u062d\u06cc\u062d \u0646\u06cc\u0633\u062a").max(13,"\u0634\u0645\u0627\u0631\u0647 \u0645\u0648\u0628\u0627\u06cc\u0644 \u0635\u062d\u06cc\u062d \u0646\u06cc\u0633\u062a ").required("\u0634\u0645\u0627\u0631\u0647 \u0645\u0648\u0628\u0627\u06cc\u0644 \u0627\u0644\u0632\u0627\u0645\u06cc \u0627\u0633\u062a")}),d=()=>{const e=(0,i.Zp)(),{loading:t,mutate:n}=(0,l.Hu)(),r=(0,o.Wx)({initialValues:{mobile:""},validationSchema:c,onSubmit:t=>{n({mobile:t.mobile.replaceAll(" ","")},{onSuccess:()=>{e("/auth/verify",{replace:!0})}})}});return(0,u.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center",children:[(0,u.jsx)("h1",{className:"text-xl font-bold mb-7",children:"\u0648\u0631\u0648\u062f / \u062b\u0628\u062a \u0646\u0627\u0645"}),(0,u.jsx)("p",{className:"text-text-500",children:"\u0628\u0631\u0627\u06cc \u0627\u062f\u0627\u0645\u0647 \u0634\u0645\u0627\u0631\u0647 \u0645\u0648\u0628\u0627\u06cc\u0644 \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f."}),(0,u.jsxs)("form",{onSubmit:r.handleSubmit,className:"w-full px-[80px]",children:[(0,u.jsx)("div",{className:"mt-7 w-full",children:(0,u.jsx)(s.A,{name:"mobile",mask:"0999 999 9999",label:"\u0634\u0645\u0627\u0631\u0647 \u0645\u0648\u0628\u0627\u06cc\u0644",type:"tel",placeholder:"\u0634\u0645\u0627\u0631\u0647 \u0647\u0645\u0631\u0627\u0647 \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u0646\u0645\u0627\u06cc\u06cc\u062f",formik:r})}),(0,u.jsxs)("div",{className:"mt-20",children:[(0,u.jsx)(a.A,{loading:t,disabled:t,text:"\u062a\u0627\u06cc\u06cc\u062f \u0648 \u062f\u0631\u06cc\u0627\u0641\u062a \u06a9\u062f",type:"submit"}),(0,u.jsx)(a.A,{text:"\u0648\u0631\u0648\u062f \u0628\u0627 \u06a9\u0644\u0645\u0647 \u0639\u0628\u0648\u0631",href:"/auth/verify",simple:!0})]})]})]})}},4457:(e,t,n)=>{e.exports=n(4085)},4085:(e,t,n)=>{"use strict";var o,s=(o=n(5043))&&"object"==typeof o&&"default"in o?o.default:o,r=n(7950);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function i(e,t){e.prototype=Object.create(t.prototype),function(e,t){for(var n=Object.getOwnPropertyNames(t),o=0;o<n.length;o++){var s=n[o],r=Object.getOwnPropertyDescriptor(t,s);r&&r.configurable&&void 0===e[s]&&Object.defineProperty(e,s,r)}}(e.prototype.constructor=e,t)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var u=function(e,t,n,o,s,r,a,i){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,o,s,r,a,i],c=0;(l=new Error(t.replace(/%s/g,(function(){return u[c++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}};function c(e,t,n){if("selectionStart"in e&&"selectionEnd"in e)e.selectionStart=t,e.selectionEnd=n;else{var o=e.createTextRange();o.collapse(!0),o.moveStart("character",t),o.moveEnd("character",n-t),o.select()}}var d={9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"};function p(e,t,n){var o="",s="",r=null,a=[];if(void 0===t&&(t="_"),null==n&&(n=d),!e||"string"!=typeof e)return{maskChar:t,formatChars:n,mask:null,prefix:null,lastEditablePosition:null,permanents:[]};var i=!1;return e.split("").forEach((function(e){i=!i&&"\\"===e||(i||!n[e]?(a.push(o.length),o.length===a.length-1&&(s+=e)):r=o.length+1,o+=e,!1)})),{maskChar:t,formatChars:n,prefix:s,mask:o,lastEditablePosition:r,permanents:a}}function h(e,t){return-1!==e.permanents.indexOf(t)}function m(e,t,n){var o=e.mask,s=e.formatChars;if(!n)return!1;if(h(e,t))return o[t]===n;var r=s[o[t]];return new RegExp(r).test(n)}function f(e,t){return t.split("").every((function(t,n){return h(e,n)||!m(e,n,t)}))}function v(e,t){var n=e.maskChar,o=e.prefix;if(!n){for(;t.length>o.length&&h(e,t.length-1);)t=t.slice(0,t.length-1);return t.length}for(var s=o.length,r=t.length;r>=o.length;r--){var a=t[r];if(!h(e,r)&&m(e,r,a)){s=r+1;break}}return s}function g(e,t){return v(e,t)===e.mask.length}function k(e,t){var n=e.maskChar,o=e.mask,s=e.prefix;if(!n){for((t=w(e,"",t,0)).length<s.length&&(t=s);t.length<o.length&&h(e,t.length);)t+=o[t.length];return t}if(t)return w(e,k(e,""),t,0);for(var r=0;r<o.length;r++)h(e,r)?t+=o[r]:t+=n;return t}function w(e,t,n,o){var s=e.mask,r=e.maskChar,a=e.prefix,i=n.split(""),l=g(e,t);return!r&&o>t.length&&(t+=s.slice(t.length,o)),i.every((function(n){for(;c=n,h(e,u=o)&&c!==s[u];){if(o>=t.length&&(t+=s[o]),i=n,r&&h(e,o)&&i===r)return!0;if(++o>=s.length)return!1}var i,u,c;return!m(e,o,n)&&n!==r||(o<t.length?t=r||l||o<a.length?t.slice(0,o)+n+t.slice(o+1):(t=t.slice(0,o)+n+t.slice(o),k(e,t)):r||(t+=n),++o<s.length)})),t}function b(e,t){for(var n=e.mask,o=t;o<n.length;++o)if(!h(e,o))return o;return null}function y(e){return e||0===e?e+"":""}function x(e,t,n,o,s){var r=e.mask,a=e.prefix,i=e.lastEditablePosition,l=t,u="",c=0,d=0,p=Math.min(s.start,n.start);return n.end>s.start?d=(c=function(e,t,n,o){var s=e.mask,r=e.maskChar,a=n.split(""),i=o;return a.every((function(t){for(;a=t,h(e,n=o)&&a!==s[n];)if(++o>=s.length)return!1;var n,a;return(m(e,o,t)||t===r)&&o++,o<s.length})),o-i}(e,0,u=l.slice(s.start,n.end),p))?s.length:0:l.length<o.length&&(d=o.length-l.length),l=o,d&&(1!==d||s.length||(p=s.start===n.start?b(e,n.start):function(e,t){for(var n=t;0<=n;--n)if(!h(e,n))return n;return null}(e,n.start)),l=function(e,t,n,o){var s=n+o,r=e.maskChar,a=e.mask,i=e.prefix,l=t.split("");if(r)return l.map((function(t,o){return o<n||s<=o?t:h(e,o)?a[o]:r})).join("");for(var u=s;u<l.length;u++)h(e,u)&&(l[u]="");return n=Math.max(i.length,n),l.splice(n,s-n),t=l.join(""),k(e,t)}(e,l,p,d)),l=w(e,l,u,p),(p+=c)>=r.length?p=r.length:p<a.length&&!c?p=a.length:p>=a.length&&p<i&&c&&(p=b(e,p)),u||(u=null),{value:l=k(e,l),enteredString:u,selection:{start:p,end:p}}}function A(e){return"function"==typeof e}function C(){return window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame}function S(e){return(C()?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame:function(){return setTimeout(e,1e3/60)})(e)}function O(e){(C()||clearTimeout)(e)}var M=function(e){function t(t){var n=e.call(this,t)||this;n.focused=!1,n.mounted=!1,n.previousSelection=null,n.selectionDeferId=null,n.saveSelectionLoopDeferId=null,n.saveSelectionLoop=function(){n.previousSelection=n.getSelection(),n.saveSelectionLoopDeferId=S(n.saveSelectionLoop)},n.runSaveSelectionLoop=function(){null===n.saveSelectionLoopDeferId&&n.saveSelectionLoop()},n.stopSaveSelectionLoop=function(){null!==n.saveSelectionLoopDeferId&&(O(n.saveSelectionLoopDeferId),n.saveSelectionLoopDeferId=null,n.previousSelection=null)},n.getInputDOMNode=function(){if(!n.mounted)return null;var e=r.findDOMNode(l(l(n))),t="undefined"!=typeof window&&e instanceof window.Element;if(e&&!t)return null;if("INPUT"!==e.nodeName&&(e=e.querySelector("input")),!e)throw new Error("react-input-mask: inputComponent doesn't contain input node");return e},n.getInputValue=function(){var e=n.getInputDOMNode();return e?e.value:null},n.setInputValue=function(e){var t=n.getInputDOMNode();t&&(n.value=e,t.value=e)},n.setCursorToEnd=function(){var e=v(n.maskOptions,n.value),t=b(n.maskOptions,e);null!==t&&n.setCursorPosition(t)},n.setSelection=function(e,t,o){void 0===o&&(o={});var s=n.getInputDOMNode(),r=n.isFocused();s&&r&&(o.deferred||c(s,e,t),null!==n.selectionDeferId&&O(n.selectionDeferId),n.selectionDeferId=S((function(){n.selectionDeferId=null,c(s,e,t)})),n.previousSelection={start:e,end:t,length:Math.abs(t-e)})},n.getSelection=function(){return function(e){var t=0,n=0;if("selectionStart"in e&&"selectionEnd"in e)t=e.selectionStart,n=e.selectionEnd;else{var o=document.selection.createRange();o.parentElement()===e&&(t=-o.moveStart("character",-e.value.length),n=-o.moveEnd("character",-e.value.length))}return{start:t,end:n,length:n-t}}(n.getInputDOMNode())},n.getCursorPosition=function(){return n.getSelection().start},n.setCursorPosition=function(e){n.setSelection(e,e)},n.isFocused=function(){return n.focused},n.getBeforeMaskedValueChangeConfig=function(){var e=n.maskOptions,t=e.mask,o=e.maskChar,s=e.permanents,r=e.formatChars;return{mask:t,maskChar:o,permanents:s,alwaysShowMask:!!n.props.alwaysShowMask,formatChars:r}},n.isInputAutofilled=function(e,t,o,s){var r=n.getInputDOMNode();try{if(r.matches(":-webkit-autofill"))return!0}catch(u){}return!n.focused||s.end<o.length&&t.end===e.length},n.onChange=function(e){var t=l(l(n)).beforePasteState,o=l(l(n)).previousSelection,s=n.props.beforeMaskedValueChange,r=n.getInputValue(),a=n.value,i=n.getSelection();n.isInputAutofilled(r,i,a,o)&&(a=k(n.maskOptions,""),o={start:0,end:0,length:0}),t&&(o=t.selection,a=t.value,i={start:o.start+r.length,end:o.start+r.length,length:0},r=a.slice(0,o.start)+r+a.slice(o.end),n.beforePasteState=null);var u=x(n.maskOptions,r,i,a,o),c=u.enteredString,d=u.selection,p=u.value;if(A(s)){var h=s({value:p,selection:d},{value:a,selection:o},c,n.getBeforeMaskedValueChangeConfig());p=h.value,d=h.selection}n.setInputValue(p),A(n.props.onChange)&&n.props.onChange(e),n.isWindowsPhoneBrowser?n.setSelection(d.start,d.end,{deferred:!0}):n.setSelection(d.start,d.end)},n.onFocus=function(e){var t=n.props.beforeMaskedValueChange,o=n.maskOptions,s=o.mask,r=o.prefix;if(n.focused=!0,n.mounted=!0,s){if(n.value)v(n.maskOptions,n.value)<n.maskOptions.mask.length&&n.setCursorToEnd();else{var a=k(n.maskOptions,r),i=k(n.maskOptions,a),l=v(n.maskOptions,i),u=b(n.maskOptions,l),c={start:u,end:u};if(A(t)){var d=t({value:i,selection:c},{value:n.value,selection:null},null,n.getBeforeMaskedValueChangeConfig());i=d.value,c=d.selection}var p=i!==n.getInputValue();p&&n.setInputValue(i),p&&A(n.props.onChange)&&n.props.onChange(e),n.setSelection(c.start,c.end)}n.runSaveSelectionLoop()}A(n.props.onFocus)&&n.props.onFocus(e)},n.onBlur=function(e){var t=n.props.beforeMaskedValueChange,o=n.maskOptions.mask;if(n.stopSaveSelectionLoop(),n.focused=!1,o&&!n.props.alwaysShowMask&&f(n.maskOptions,n.value)){var s="";A(t)&&(s=t({value:s,selection:null},{value:n.value,selection:n.previousSelection},null,n.getBeforeMaskedValueChangeConfig()).value);var r=s!==n.getInputValue();r&&n.setInputValue(s),r&&A(n.props.onChange)&&n.props.onChange(e)}A(n.props.onBlur)&&n.props.onBlur(e)},n.onMouseDown=function(e){if(!n.focused&&document.addEventListener){n.mouseDownX=e.clientX,n.mouseDownY=e.clientY,n.mouseDownTime=(new Date).getTime();document.addEventListener("mouseup",(function e(t){if(document.removeEventListener("mouseup",e),n.focused){var o=Math.abs(t.clientX-n.mouseDownX),s=Math.abs(t.clientY-n.mouseDownY),r=Math.max(o,s),a=(new Date).getTime()-n.mouseDownTime;(r<=10&&a<=200||r<=5&&a<=300)&&n.setCursorToEnd()}}))}A(n.props.onMouseDown)&&n.props.onMouseDown(e)},n.onPaste=function(e){A(n.props.onPaste)&&n.props.onPaste(e),e.defaultPrevented||(n.beforePasteState={value:n.getInputValue(),selection:n.getSelection()},n.setInputValue(""))},n.handleRef=function(e){null==n.props.children&&A(n.props.inputRef)&&n.props.inputRef(e)};var o=t.mask,s=t.maskChar,a=t.formatChars,i=t.alwaysShowMask,u=t.beforeMaskedValueChange,d=t.defaultValue,h=t.value;n.maskOptions=p(o,s,a),null==d&&(d=""),null==h&&(h=d);var m=y(h);if(n.maskOptions.mask&&(i||m)&&(m=k(n.maskOptions,m),A(u))){var g=t.value;null==t.value&&(g=d),m=u({value:m,selection:null},{value:g=y(g),selection:null},null,n.getBeforeMaskedValueChangeConfig()).value}return n.value=m,n}i(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.getInputDOMNode()&&(this.isWindowsPhoneBrowser=function(){var e=new RegExp("windows","i"),t=new RegExp("phone","i"),n=navigator.userAgent;return e.test(n)&&t.test(n)}(),this.maskOptions.mask&&this.getInputValue()!==this.value&&this.setInputValue(this.value))},n.componentDidUpdate=function(){var e=this.previousSelection,t=this.props,n=t.beforeMaskedValueChange,o=t.alwaysShowMask,s=t.mask,r=t.maskChar,a=t.formatChars,i=this.maskOptions,l=o||this.isFocused(),u=null!=this.props.value,c=u?y(this.props.value):this.value,d=e?e.start:null;if(this.maskOptions=p(s,r,a),this.maskOptions.mask){!i.mask&&this.isFocused()&&this.runSaveSelectionLoop();var h=this.maskOptions.mask&&this.maskOptions.mask!==i.mask;if(i.mask||u||(c=this.getInputValue()),(h||this.maskOptions.mask&&(c||l))&&(c=k(this.maskOptions,c)),h){var m=v(this.maskOptions,c);(null===d||m<d)&&(d=g(this.maskOptions,c)?m:b(this.maskOptions,m))}!this.maskOptions.mask||!f(this.maskOptions,c)||l||u&&this.props.value||(c="");var w={start:d,end:d};if(A(n)){var x=n({value:c,selection:w},{value:this.value,selection:this.previousSelection},null,this.getBeforeMaskedValueChangeConfig());c=x.value,w=x.selection}this.value=c;var C=this.getInputValue()!==this.value;C?(this.setInputValue(this.value),this.forceUpdate()):h&&this.forceUpdate();var S=!1;null!=w.start&&null!=w.end&&(S=!e||e.start!==w.start||e.end!==w.end),(S||C)&&this.setSelection(w.start,w.end)}else i.mask&&(this.stopSaveSelectionLoop(),this.forceUpdate())},n.componentWillUnmount=function(){this.mounted=!1,null!==this.selectionDeferId&&O(this.selectionDeferId),this.stopSaveSelectionLoop()},n.render=function(){var e,t=this.props,n=(t.mask,t.alwaysShowMask,t.maskChar,t.formatChars,t.inputRef,t.beforeMaskedValueChange,t.children),o=function(e,t){if(null==e)return{};var n,o,s={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],0<=t.indexOf(n)||(s[n]=e[n]);return s}(t,["mask","alwaysShowMask","maskChar","formatChars","inputRef","beforeMaskedValueChange","children"]);if(n){A(n)||u(!1);var r=["onChange","onPaste","onMouseDown","onFocus","onBlur","value","disabled","readOnly"],i=a({},o);r.forEach((function(e){return delete i[e]})),e=n(i),r.filter((function(t){return null!=e.props[t]&&e.props[t]!==o[t]})).length&&u(!1)}else e=s.createElement("input",a({ref:this.handleRef},o));var l={onFocus:this.onFocus,onBlur:this.onBlur};return this.maskOptions.mask&&(o.disabled||o.readOnly||(l.onChange=this.onChange,l.onPaste=this.onPaste,l.onMouseDown=this.onMouseDown),null!=o.value&&(l.value=this.value)),e=s.cloneElement(e,l)},t}(s.Component);e.exports=M},7097:(e,t,n)=>{"use strict";n.d(t,{n:()=>A});var o,s,r,a,i,l=n(5043),u=n(9790),c=n(5149),d=n(8458),p=n(4181),h=n(4558),m=n(5239),f=n(1454),v=n(329),g=n(9723),k=(o=new WeakMap,s=new WeakMap,r=new WeakMap,a=new WeakMap,i=new WeakSet,class extends v.Q{constructor(e,t){super(),(0,u.A)(this,i),(0,c.A)(this,o,void 0),(0,c.A)(this,s,void 0),(0,c.A)(this,r,void 0),(0,c.A)(this,a,void 0),(0,h.A)(o,this,e),this.setOptions(t),this.bindMethods(),(0,p.A)(i,this,w).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;const n=this.options;this.options=(0,d.A)(o,this).defaultMutationOptions(e),(0,g.f8)(this.options,n)||(0,d.A)(o,this).getMutationCache().notify({type:"observerOptionsUpdated",mutation:(0,d.A)(r,this),observer:this}),null!==n&&void 0!==n&&n.mutationKey&&this.options.mutationKey&&(0,g.EN)(n.mutationKey)!==(0,g.EN)(this.options.mutationKey)?this.reset():"pending"===(null===(t=(0,d.A)(r,this))||void 0===t?void 0:t.state.status)&&(0,d.A)(r,this).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(null===(e=(0,d.A)(r,this))||void 0===e||e.removeObserver(this))}onMutationUpdate(e){(0,p.A)(i,this,w).call(this),(0,p.A)(i,this,b).call(this,e)}getCurrentResult(){return(0,d.A)(s,this)}reset(){var e;null===(e=(0,d.A)(r,this))||void 0===e||e.removeObserver(this),(0,h.A)(r,this,void 0),(0,p.A)(i,this,w).call(this),(0,p.A)(i,this,b).call(this)}mutate(e,t){var n;return(0,h.A)(a,this,t),null===(n=(0,d.A)(r,this))||void 0===n||n.removeObserver(this),(0,h.A)(r,this,(0,d.A)(o,this).getMutationCache().build((0,d.A)(o,this),this.options)),(0,d.A)(r,this).addObserver(this),(0,d.A)(r,this).execute(e)}});function w(){var e,t;const n=null!==(e=null===(t=(0,d.A)(r,this))||void 0===t?void 0:t.state)&&void 0!==e?e:(0,m.$)();(0,h.A)(s,this,{...n,isPending:"pending"===n.status,isSuccess:"success"===n.status,isError:"error"===n.status,isIdle:"idle"===n.status,mutate:this.mutate,reset:this.reset})}function b(e){f.j.batch((()=>{if((0,d.A)(a,this)&&this.hasListeners()){const p=(0,d.A)(s,this).variables,h=(0,d.A)(s,this).context;var t,n,o,r;if("success"===(null===e||void 0===e?void 0:e.type))null===(t=(n=(0,d.A)(a,this)).onSuccess)||void 0===t||t.call(n,e.data,p,h),null===(o=(r=(0,d.A)(a,this)).onSettled)||void 0===o||o.call(r,e.data,null,p,h);else if("error"===(null===e||void 0===e?void 0:e.type)){var i,l,u,c;null===(i=(l=(0,d.A)(a,this)).onError)||void 0===i||i.call(l,e.error,p,h),null===(u=(c=(0,d.A)(a,this)).onSettled)||void 0===u||u.call(c,void 0,e.error,p,h)}}this.listeners.forEach((e=>{e((0,d.A)(s,this))}))}))}var y=n(3248),x=n(3247);function A(e,t){const n=(0,y.jE)(t),[o]=l.useState((()=>new k(n,e)));l.useEffect((()=>{o.setOptions(e)}),[o,e]);const s=l.useSyncExternalStore(l.useCallback((e=>o.subscribe(f.j.batchCalls(e))),[o]),(()=>o.getCurrentResult()),(()=>o.getCurrentResult())),r=l.useCallback(((e,t)=>{o.mutate(e,t).catch(x.l)}),[o]);if(s.error&&(0,x.G)(o.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:r,mutateAsync:s.mutate}}}}]);
//# sourceMappingURL=5084.41c4642d.chunk.js.map