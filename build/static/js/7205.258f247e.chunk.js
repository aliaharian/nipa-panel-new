"use strict";(self.webpackChunknipa_panel_new=self.webpackChunknipa_panel_new||[]).push([[7205],{5601:function(e,n,t){var r=t(1413),a=t(4165),l=t(5861),i=t(516),o=t(8825);function s(){return(s=(0,l.Z)((0,a.Z)().mark((function e(n,t){var r,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(r=(0,i.Z)())||void 0===r?void 0:r.get("/forms/".concat(n).concat(t?"?orderId="+t:""),{headers:{languege:o.ZP.language}});case 2:return l=e.sent,e.abrupt("return",null===l||void 0===l?void 0:l.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=(0,l.Z)((0,a.Z)().mark((function e(n){var t,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=(0,i.Z)())||void 0===t?void 0:t.post("/forms",(0,r.Z)({},n));case 2:return l=e.sent,e.abrupt("return",null===l||void 0===l?void 0:l.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(){return(c=(0,l.Z)((0,a.Z)().mark((function e(){var n,t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=(0,i.Z)())||void 0===n?void 0:n.get("/formFieldTypes",{headers:{languege:o.ZP.language}});case 2:return t=e.sent,e.abrupt("return",null===t||void 0===t?void 0:t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return(d=(0,l.Z)((0,a.Z)().mark((function e(n){var t,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=(0,i.Z)())||void 0===t?void 0:t.post("/formFields",(0,r.Z)({},n));case 2:return l=e.sent,e.abrupt("return",null===l||void 0===l?void 0:l.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return(f=(0,l.Z)((0,a.Z)().mark((function e(n,t){var l,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(l=(0,i.Z)())||void 0===l?void 0:l.put("/formFields/".concat(n),(0,r.Z)({},t));case 2:return o=e.sent,e.abrupt("return",null===o||void 0===o?void 0:o.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=(0,l.Z)((0,a.Z)().mark((function e(n,t){var l,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(l=(0,i.Z)())||void 0===l?void 0:l.put("/forms/".concat(n),(0,r.Z)({},t));case 2:return o=e.sent,e.abrupt("return",null===o||void 0===o?void 0:o.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=(0,l.Z)((0,a.Z)().mark((function e(n){var t,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=(0,i.Z)())||void 0===t?void 0:t.delete("/formFieldOptions/".concat(n));case 2:return r=e.sent,e.abrupt("return",null===r||void 0===r?void 0:r.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=(0,l.Z)((0,a.Z)().mark((function e(n,t){var r,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(r=(0,i.Z)())||void 0===r?void 0:r.post("/formFields/".concat(n),{_method:"delete",form_id:t});case 2:return l=e.sent,e.abrupt("return",null===l||void 0===l?void 0:l.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=(0,l.Z)((0,a.Z)().mark((function e(n,t,l){var o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(o=(0,i.Z)())||void 0===o?void 0:o.post("/userAnswer/".concat(t,"/answer"),(0,r.Z)({order_id:n},l));case 2:return s=e.sent,e.abrupt("return",null===s||void 0===s?void 0:s.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n.Z={getForm:function(e,n){return s.apply(this,arguments)},createForm:function(e){return u.apply(this,arguments)},getFormFieldTypes:function(){return c.apply(this,arguments)},createFormField:function(e){return d.apply(this,arguments)},updateFormField:function(e,n){return f.apply(this,arguments)},updateForm:function(e,n){return p.apply(this,arguments)},deleteOption:function(e){return v.apply(this,arguments)},deleteItem:function(e,n){return m.apply(this,arguments)},addUserAnswer:function(e,n,t){return h.apply(this,arguments)}}},9351:function(e,n,t){t.d(n,{lw:function(){return v},YB:function(){return m},YT:function(){return h}});var r=t(8923),a=t(8555),l=t(745),i=t(3433),o=t(9439),s=t(2791),u=t(1400),c=t(184),d=function(e){var n,t,r,a=e.name,l=e.label,d=e.formik,f=(e.placeholder,e.maskChar,e.className),p=(e.mask,e.inputActions),v=e.options,m=(0,s.useState)([]),h=(0,o.Z)(m,2),x=h[0],b=h[1];return(0,c.jsxs)("div",{className:"flex flex-col w-full items-start justify-start ".concat(f),children:[(0,c.jsxs)("div",{className:"text-sm mb-2 flex justify-between w-full",children:[(0,c.jsx)("label",{htmlFor:a,children:l}),null===p||void 0===p?void 0:p()]}),(0,c.jsx)("div",{className:"flex items-center justify-start max-w-full flex-wrap",children:null===v||void 0===v?void 0:v.map((function(e,n){return(0,c.jsx)(u.Z,{className:"group",name:a,value:e.value,label:e.label,checked:x.includes(e.value)||!1,handleCheck:function(){return function(e){if(x.includes(e.value)){var n=(0,i.Z)(x),t=n.indexOf(e.value);-1!==t&&(n.splice(t,1),b((0,i.Z)(n))),d.setFieldValue(a,(0,i.Z)(n))}else b([].concat((0,i.Z)(x),[e.value])),d.setFieldValue(a,[].concat((0,i.Z)(x),[e.value]))}(e)}},n)}))}),(null===(n=d.errors)||void 0===n?void 0:n[a])&&(null===(t=d.touched)||void 0===t?void 0:t[a])&&(0,c.jsx)("p",{className:"text-error-primary text-[10px] mt-1",children:null===(r=d.errors)||void 0===r?void 0:r[a]})]})},f=t(1724),p=t(5583),v=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){},t=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=t||{handleChange:function(){},setFieldValue:function(){},values:null};switch(e.type){case"text":return(0,c.jsx)(r.Z,{className:"group",name:e.name,label:e.label,type:"text",placeholder:e.placeholder,inputActions:function(){return n(e)},formik:o});case"textArea":return(0,c.jsx)(a.Z,{className:"group",name:e.name,label:e.label,inputActions:function(){return n(e)},formik:o});case"number":return(0,c.jsx)(r.Z,{className:"group",name:e.name,label:e.label,type:"number",placeholder:e.placeholder,inputActions:function(){return n(e)},formik:o});case"uploadFile":return(0,c.jsx)(p.Z,{className:"group",name:e.name,label:e.label,placeholder:e.placeholder,imageOnly:e.onlyImage,formik:o,setPending:e.setPending,mock:i||!1,noBadge:e.noBadge||!1});case"dropDown":return(0,c.jsx)(l.Z,{className:"group",name:e.name,label:e.label,options:e.basicDataItems||e.options,placeholder:e.placeholder,inputActions:function(){return n(e)},formik:o});case"checkbox":return(0,c.jsx)(d,{className:"group",name:e.name,label:e.label,options:e.basicDataItems||e.options,placeholder:e.placeholder,inputActions:function(){return n(e)},formik:o});default:return(0,c.jsx)("p",{children:"not defined"})}},m=function(e){var n={};return e.map((function(e){switch(e.type){case"text":case"textArea":n[e.name]=e.answer||"";break;case"uploadFile":case"dropDown":n[e.name]=e.answer||null;break;case"number":n[e.name]=e.answer||0;break;case"checkbox":n[e.name]=e.answer||[]}})),n},h=function(e,n,t){var r={};return e.map((function(a){var l=n.find((function(e){return e.relational_form_field_id==a.id})),i=!0;if(l){var o,s,u,c,d,p=e.find((function(e){return e.id==l.form_field_id}));if(p)if(p.basic_data_id)o=null===p||void 0===p||null===(s=p.basicDataItems)||void 0===s?void 0:s.find((function(e){return e.server_id==l.form_field_option_id}));else o=null===p||void 0===p||null===(u=p.options)||void 0===u?void 0:u.find((function(e){return e.server_id==l.form_field_option_id}));if(p&&o)if(1==l.operation)i=t.values[p.name]===o.value||(null===(c=t.values[p.name])||void 0===c?void 0:c.indexOf(o.value))>-1;else i=!(t.values[p.name]===o.value||(null===(d=t.values[p.name])||void 0===d?void 0:d.indexOf(o.value))>-1)}if(i)switch(a.type){case"text":case"textArea":r[a.name]=a.required?f.Z_().required("\u0627\u06cc\u0646 \u0641\u06cc\u0644\u062f \u0627\u062c\u0628\u0627\u0631\u06cc \u0627\u0633\u062a"):f.Z_();break;case"uploadFile":a.required&&(r[a.name]=f.Z_().nullable().required("\u0627\u06cc\u0646 \u0641\u06cc\u0644\u062f \u0627\u062c\u0628\u0627\u0631\u06cc \u0627\u0633\u062a"));break;case"dropDown":r[a.name]=f.Z_().nullable().required("\u0627\u06cc\u0646 \u0641\u06cc\u0644\u062f \u0627\u062c\u0628\u0627\u0631\u06cc \u0627\u0633\u062a");break;case"number":r[a.name]=a.required?f.Rx().required("\u0627\u06cc\u0646 \u0641\u06cc\u0644\u062f \u0627\u062c\u0628\u0627\u0631\u06cc \u0627\u0633\u062a"):f.Rx();break;case"checkbox":r[a.name]=a.required?f.IX().of(f.Z_()).min(1,"\u0627\u06cc\u0646 \u0641\u06cc\u0644\u062f \u0627\u062c\u0628\u0627\u0631\u06cc \u0627\u0633\u062a").required("\u0627\u06cc\u0646 \u0641\u06cc\u0644\u062f \u0627\u062c\u0628\u0627\u0631\u06cc \u0627\u0633\u062a"):f.IX().of(f.Z_()).nullable()}})),r}},1400:function(e,n,t){t.d(n,{Z:function(){return d}});var r,a=t(2791),l=["title","titleId"];function i(){return i=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},i.apply(this,arguments)}function o(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)t=l[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)t=l[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}function s(e,n){var t=e.title,s=e.titleId,u=o(e,l);return a.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",ref:n,"aria-labelledby":s},u),t?a.createElement("title",{id:s},t):null,r||(r=a.createElement("path",{d:"m7.75 12 2.83 2.83 5.67-5.66",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})))}var u=a.forwardRef(s),c=(t.p,t(184)),d=function(e){var n=e.name,t=e.label,r=e.value,a=e.className,l=e.checked,i=e.handleCheck;return(0,c.jsxs)("div",{className:"flex me-4 mb-4 items-start justify-start relative cursor-pointer ".concat(a),onClick:i,children:[(0,c.jsx)("input",{type:"checkbox",checked:l,value:r,name:n,onChange:i,className:"absolute top-0 left-0 opacity-0"}),(0,c.jsx)("div",{className:"w-6 h-6  rounded-[4px] me-2\n      ".concat(l?"border-none bg-primary-main":"border border-text-400","\n      "),children:(0,c.jsx)(u,{className:"text-white"})}),(0,c.jsx)("p",{className:"text-[14px]",children:t})]})}},8555:function(e,n,t){var r=t(9687),a=t(2791),l=t(184);n.Z=function(e){var n,t,i,o,s,u=e.name,c=e.label,d=e.formik,f=e.className,p=e.inputActions,v=(0,a.useRef)(null);return(0,l.jsxs)("div",{className:"flex flex-col w-full items-start justify-start ".concat(f),children:[(0,l.jsxs)("div",{className:"text-sm mb-2 flex justify-between w-full",children:[(0,l.jsx)("label",{htmlFor:u,children:c}),null===p||void 0===p?void 0:p()]}),(0,l.jsx)(r.M,{onInit:function(e,n){return v.current=n},initialValue:(null===(n=d.values)||void 0===n?void 0:n[u])||"",id:u,value:null===(t=d.values)||void 0===t?void 0:t[u],onEditorChange:function(e){d.handleChange({target:{name:u,value:e}})},apiKey:"ajj87dt2tkk9iay286x5uxdjdb685g4spq516y5lacgqlerz",init:{height:150,width:"100%",menubar:!1,toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"}}),(null===(i=d.errors)||void 0===i?void 0:i[u])&&(null===(o=d.touched)||void 0===o?void 0:o[u])&&(0,l.jsx)("p",{className:"text-error-primary text-[10px] mt-1",children:null===(s=d.errors)||void 0===s?void 0:s[u]})]})}},5583:function(e,n,t){t.d(n,{Z:function(){return j}});var r=t(1413),a=t(4165),l=t(3433),i=t(5861),o=t(9439),s=t(2791),u=t(7427),c=t(8433),d=t(1150),f=t(7139),p=t(9230),v=t(1193),m=t(3239),h=t(184),x=function(e){var n=e.src,t=e.badge,r=e.handleDelete,a=e.handleFullscreen,l=e.handleViewImage,i=e.hashCode,u=(0,s.useState)(),x=(0,o.Z)(u,2),b=x[0],Z=x[1],w=(0,s.useState)(!1),g=(0,o.Z)(w,2),y=g[0],j=g[1],k=(0,p.$G)(["common","validations"]).t;return(0,s.useEffect)((function(){if(n.hash_code){Z("http://localhost:8000/api/v1/files/"+n.hash_code)}else v.ZP.fileToUrl(n).then((function(e){Z(e)}))}),[]),(0,s.useEffect)((function(){var e;j((null===n||void 0===n||null===(e=n.type)||void 0===e?void 0:e.search("image"))>-1)}),[n]),(0,h.jsx)("div",{className:"group/item w-full h-full rounded-[6px] overflow-hidden relative",children:(0,h.jsxs)("div",{className:"w-full h-full relative",children:[t&&y&&(0,h.jsx)("p",{className:"right-[8px] top-[8px] text-[10px] inline-block absolute py-[5px] px-[8px] bg-secondary-500 text-white rounded-[4px]",children:t}),y?(0,h.jsx)("img",{src:b,alt:"",className:"w-full h-full object-cover rounded-[6px]"}):(0,h.jsxs)("div",{className:"w-full h-full flex items-center justify-center flex-col text-primary-main",children:[(0,h.jsx)(c.Z,{className:"w-8 h-8"}),(0,h.jsx)("p",{className:"mt-2",children:n.name})]}),(0,h.jsxs)("div",{className:"absolute top-0 left-0 bg-black-60 w-full h-full flex grid grid-rows-3 ".concat(i?"opacity-0":"opacity-100"," pointer-events-none group-hover/item:opacity-100 group-hover/item:pointer-events-auto transition-all"),children:[(0,h.jsx)("div",{}),(0,h.jsx)("div",{children:i?l&&(0,h.jsx)("p",{onClick:l,className:"cursor-pointer text-[10px] inline-block py-[5px] px-[8px] bg-secondary-500 text-white rounded-[4px]",children:k(y?"viewImage":"viewFile")}):(0,h.jsx)(m.Z,{})}),(0,h.jsxs)("div",{className:"w-full flex items-center justify-between px-[10px] py-[12px] text-white",children:[i&&a&&(0,h.jsx)("div",{className:"cursor-pointer",onClick:a,children:y&&(0,h.jsx)(d.Z,{})}),i&&r&&(0,h.jsx)("div",{className:"cursor-pointer",onClick:r,children:(0,h.jsx)(f.Z,{})})]})]})]})})},b=t(5374),Z=function(e){var n=e.url;return(0,h.jsxs)("div",{id:"image-fullscreen",className:"fixed w-[100vw] h-[100vh] bg-black-90 flex flex-col items-center justify-center left-0 top-0 z-[999]",children:[(0,h.jsx)("div",{className:"w-full h-[60px] px-16 pt-8 flex items-center text-white",children:(0,h.jsx)(b.Z,{onClick:function(){document.body.removeChild(document.getElementById("image-fullscreen"))},className:"w-[40px] h-[40px] cursor-pointer"})}),(0,h.jsx)("div",{className:"w-full h-[calc(100%-60px)] flex items-center justify-center pb-10",children:(0,h.jsx)("img",{src:n,className:"w-full max-w-[70vw] h-full object-contain",alt:""})})]})},w=t(1250),g=t(516),y=t(174),j=function(e){var n,t,c,d,f,m,b=e.name,j=e.label,k=e.formik,N=e.placeholder,_=e.className,F=e.imageOnly,C=e.setPending,O=e.mock,I=e.noBadge,A=(0,p.$G)(["common","validations"]).t,E=(0,s.useRef)(null),P=(0,s.useState)([]),q=(0,o.Z)(P,2),D=q[0],R=q[1],S=(0,s.useState)(!1),V=(0,o.Z)(S,2),B=V[0],T=V[1],U=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(n){var t,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,l.Z)(D),r=b+"_"+Math.floor(100*Math.random()),t.push({name:r,value:n.target.value,hashCode:null}),R((0,l.Z)(t)),T(!0),L(n.target.value,r,t);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),L=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(n,t,i){var o,s,u,c,d,f,p,v,m;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=new FormData).append("file",n),e.prev=2,e.next=5,null===(s=(0,g.Z)())||void 0===s?void 0:s.post("/files",o,{headers:{"Content-Type":"multipart/form-data"}});case 5:null!==(d=e.sent)&&void 0!==d&&null!==(u=d.data)&&void 0!==u&&null!==(c=u.file)&&void 0!==c&&c.hash_code&&(f=(0,l.Z)(i),-1!==(p=f.findIndex((function(e){return e.name===t})))&&(f[p]=(0,r.Z)((0,r.Z)({},f[p]),{},{hashCode:d.data.file.hash_code}),R((0,l.Z)(f)))),T(!1),e.next=17;break;case 10:e.prev=10,e.t0=e.catch(2),v=(0,l.Z)(i),-1!==(m=v.findIndex((function(e){return e.name===t})))&&(v.splice(m,1),R((0,l.Z)(v))),y.Z.error(A("validations:uploadError")),T(!1);case 17:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(n,t,r){return e.apply(this,arguments)}}(),z=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(n,t){var r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,l.Z)(D),e.prev=1,e.next=4,null===(i=(0,g.Z)())||void 0===i?void 0:i.delete("/files/".concat(n.hashCode));case 4:e.sent,r.splice(t,1),R((0,l.Z)(r)),y.Z.success(A("validations:imageDeleteSuccess")),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),y.Z.error(A("validations:imageDeleteError"));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(n,t){return e.apply(this,arguments)}}();((0,s.useEffect)((function(){k.setFieldValue(b,D)}),[D]),(null===(n=k.values)||void 0===n||null===(t=n[b])||void 0===t?void 0:t.length)>0&&0==D.length)&&R((null===(m=k.values)||void 0===m?void 0:m[b])||[]);return(0,s.useEffect)((function(){C&&C(B)}),[B]),(0,h.jsxs)("div",{className:"flex flex-col w-full items-start justify-start ".concat(_),children:[(0,h.jsx)("div",{className:"text-sm mb-2 flex justify-between w-full",children:(0,h.jsx)("label",{className:"font-normal",htmlFor:b,children:j})}),(0,h.jsxs)("div",{className:"bg-text-300 w-full p-[14px] grid grid-cols-5 gap-x-5 gap-y-5",children:[D.length<5&&(0,h.jsx)("div",{className:"bg-white w-full h-min rounded-[6px]",children:(0,h.jsx)(u.Z,{disabled:B,name:"uploadFile",imageOnly:F,fileRef:E,placeholder:B?A("pleaseWait")||"":N||"",formik:{handleChange:function(e){O||(U(e),E.current&&(E.current.value=""))}}})}),D.map((function(e,n){return(0,h.jsx)("div",{className:"bg-white rounded-[6px] w-full h-[144px]",children:(0,h.jsx)(x,{src:(null===e||void 0===e?void 0:e.value)||(null===e||void 0===e?void 0:e.file),hashCode:e.hashCode,handleDelete:function(){z(e,n)},handleFullscreen:function(){!function(e){v.ZP.imageValidExtensions.includes(e.type)&&v.ZP.fileToUrl(e).then((function(e){var n=document.createElement("div");n.setAttribute("id","image-fullscreen"),document.body.appendChild(n),w.createRoot(n).render((0,h.jsx)(Z,{url:e}))}))}(e.value)},handleViewImage:function(){!function(e){var n=v.ZP.fileToBlob(e),t=URL.createObjectURL(n);window.open(t,"_blank")}(e.value)},badge:0!==n||I?"":A("mainImage")||""})},n)}))]}),(null===(c=k.errors)||void 0===c?void 0:c[b])&&(null===(d=k.touched)||void 0===d?void 0:d[b])&&(0,h.jsx)("p",{className:"text-error-primary text-[10px] mt-1",children:null===(f=k.errors)||void 0===f?void 0:f[b]})]})}}}]);
//# sourceMappingURL=7205.258f247e.chunk.js.map